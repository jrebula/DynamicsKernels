(* Content-type: application/mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 7.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       145,          7]
NotebookDataLength[     81713,       1847]
NotebookOptionsPosition[     79832,       1780]
NotebookOutlinePosition[     80275,       1797]
CellTagsIndexPosition[     80232,       1794]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["\<\
Ballistic Walker, with floating base\
\>", "Title",
 CellChangeTimes->{{3.446917747848176*^9, 3.446917769908661*^9}, {
  3.4821408156397667`*^9, 3.4821408172821283`*^9}, {3.5787504167873793`*^9, 
  3.5787504649171915`*^9}, {3.6314642005656815`*^9, 3.631464226262317*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "outputFile", " ", "=", " ", 
   "\"\<C:\\\\Users\\\\john\\\\workspace\\\\DynamicsKernels\\\\\
BallisticAndCompassWalker\\\\mathematicaOutputBallisticWalker.m\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<C:\\\\Users\\\\john\\\\workspace\\\\DynamicsKernels\\\\\
BallisticAndCompassWalker\\\\DynamicsWorkbenchModifiedFixUJoint.m\>\"", "]"}],
   ";"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.446934412694668*^9, 3.4469344189176893`*^9}, {
  3.578516528511217*^9, 3.578516529344217*^9}, {3.5785166544342165`*^9, 
  3.578516694146217*^9}, {3.631464450622593*^9, 3.631464519176262*^9}, {
  3.6314682370212245`*^9, 3.6314682373724747`*^9}}],

Cell[CellGroupData[{

Cell["Equations of motion", "Section",
 CellChangeTimes->{{3.44693654093233*^9, 3.446936542796586*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"NewModel", "[", "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.446933798487845*^9, 3.4469338643521357`*^9}, {
   3.446933973115541*^9, 3.446933973964518*^9}, {3.446934165197138*^9, 
   3.446934196255003*^9}, {3.446934232495329*^9, 3.446934296806625*^9}, {
   3.4469343369097557`*^9, 3.446934396401021*^9}, {3.446934874977736*^9, 
   3.446934894293985*^9}, {3.44693499207298*^9, 3.446935146273335*^9}, {
   3.44693525471518*^9, 3.446935466215646*^9}, {3.446935962145954*^9, 
   3.446935976732356*^9}, {3.446936070668562*^9, 3.44693608258097*^9}, 
   3.4469363147903633`*^9, {3.482140849758827*^9, 3.482140852963435*^9}}],

Cell[CellGroupData[{

Cell["\<\
Pelvis is in mid-air, defined by x, y, and pitch angle (q1-3)\
\>", "Subsubsection",
 CellChangeTimes->{{3.446936318237425*^9, 3.446936330297329*^9}, {
  3.578749977859491*^9, 3.5787500010568104`*^9}, {3.5787544859174285`*^9, 
  3.5787544869124284`*^9}, {3.6314642319403524`*^9, 3.631464244116992*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"AddBody", "[", 
   RowBox[{"pelvisX", ",", "ground", ",", "Slider", ",", 
    RowBox[{"TAxis", "\[Rule]", 
     RowBox[{"ground", "[", "1", "]"}]}], ",", 
    RowBox[{"Qdof", "\[Rule]", "1"}], ",", 
    RowBox[{"Udof", "\[Rule]", "1"}]}], "]"}], ";"}], "\n", 
 RowBox[{
  RowBox[{"AddBody", "[", 
   RowBox[{"pelvisZ", ",", "pelvisX", ",", "Slider", ",", 
    RowBox[{"TAxis", "\[Rule]", 
     RowBox[{"ground", "[", "3", "]"}]}], ",", 
    RowBox[{"Qdof", "\[Rule]", "2"}], ",", 
    RowBox[{"Udof", "\[Rule]", "2"}]}], "]"}], ";"}], "\n", 
 RowBox[{
  RowBox[{"AddBody", "[", 
   RowBox[{"pelvis", ",", "pelvisZ", ",", "Hinge", ",", 
    RowBox[{"Axis", "\[Rule]", 
     RowBox[{"ground", "[", "2", "]"}]}], ",", 
    RowBox[{"Mass", "\[Rule]", "MPelvis"}], ",", " ", 
    RowBox[{"Inertia", " ", "\[Rule]", " ", 
     RowBox[{"{", 
      RowBox[{"0", ",", " ", "IPelvis", ",", " ", "0"}], "}"}]}], ",", " ", 
    RowBox[{"Qdof", "\[Rule]", "3"}], ",", 
    RowBox[{"Udof", "\[Rule]", "3"}]}], "]"}], ";"}]}], "Input",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQBWIQnTvnvErjupeOm1y4dUF086bFViA69O4+MP3Fb1kQ
iP6j0REGovfc5I8G0ffPSyaD6B0yshkgWutqTz6InusZvxpEB2ecXAuib4Uy
7QLRmvs9zoLog4+u3QLRk565fQXRK1a7GDcB6bJ8cVMQfSflqgOI9pse5ASi
V3hFxoPoxetCk0D0h3O+/deAtMKPKWA6R2Tmld0bXjoWem0H08pv5054s/KV
Y8Re43Ug2uSE7QcQLVW6HkzrBfxc8hZIv5OSXgqiHzL8v/EeSD/odrkJoi3D
WZQ/AeltM3eqgGgBjqrn5XyvHRfMX/0CRF9Lr30Dop2y1oDpP3yPP4LoQzPy
P4NoAPW3vb4=
  "]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Stance and swing thighs rotate about pelvis in sagittal plane (pitch) (q4, \
q5), swing shank rotates about swing knee in saggital plane (q6)\
\>", "Subsubsection",
 CellChangeTimes->{{3.4469363466535482`*^9, 3.446936373878829*^9}, {
  3.482141165062211*^9, 3.482141167065091*^9}, {3.578750332894991*^9, 
  3.578750374561157*^9}, {3.5787505538650856`*^9, 3.57875055490919*^9}, {
  3.63146437219092*^9, 3.6314643735088496`*^9}, {3.631464895844696*^9, 
  3.6314649128767595`*^9}, {3.631467962227148*^9, 3.6314679656015663`*^9}}],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"stanceLegMassOffsetVector", " ", "=", " ", 
     RowBox[{
      RowBox[{"legMassVerticalOffsetBelowPelvis", " ", 
       RowBox[{"stanceLeg", "[", "3", "]"}]}], "-", 
      RowBox[{"legMassForwardOffset", " ", 
       RowBox[{"stanceLeg", "[", "1", "]"}]}]}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AddBody", "[", 
     RowBox[{"stanceLeg", ",", " ", "pelvis", ",", " ", "Hinge", ",", " ", 
      RowBox[{"Axis", "->", 
       RowBox[{"ground", "[", "2", "]"}]}], ",", 
      RowBox[{"RelativeTo", "\[Rule]", "ground"}], ",", " ", 
      RowBox[{"InbToJnt", "\[Rule]", "0"}], ",", " ", 
      RowBox[{"Mass", "\[Rule]", "MLeg"}], ",", 
      RowBox[{"Inertia", "->", 
       RowBox[{"{", 
        RowBox[{"0", ",", "ILeg", ",", " ", "0"}], "}"}]}], ",", 
      RowBox[{"BodyToJnt", "\[Rule]", "stanceLegMassOffsetVector"}]}], "]"}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AddBody", "[", 
     RowBox[{
     "stanceContactPoint", ",", " ", "stanceLeg", ",", " ", "Fixed", ",", 
      RowBox[{"InbToJnt", "\[Rule]", 
       RowBox[{"stanceLegMassOffsetVector", " ", "-", " ", 
        RowBox[{"L", " ", 
         RowBox[{"stanceLeg", "[", "3", "]"}]}]}]}], ",", 
      RowBox[{"BodyToJnt", "\[Rule]", "0"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"swingThighMassOffsetVector", " ", "=", " ", 
     RowBox[{
      RowBox[{"swingThighMassVerticalOffsetBelowPelvis", " ", 
       RowBox[{"swingThigh", "[", "3", "]"}]}], "-", 
      RowBox[{"swingThighMassForwardOffset", " ", 
       RowBox[{"swingThigh", "[", "1", "]"}]}]}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AddBody", "[", 
     RowBox[{"swingThigh", ",", " ", "pelvis", ",", " ", "Hinge", ",", " ", 
      RowBox[{"Axis", "->", 
       RowBox[{"ground", "[", "2", "]"}]}], ",", 
      RowBox[{"RelativeTo", "\[Rule]", "ground"}], ",", " ", 
      RowBox[{"InbToJnt", "\[Rule]", "0"}], ",", " ", "\[IndentingNewLine]", 
      RowBox[{"Mass", "\[Rule]", "MThigh"}], ",", 
      RowBox[{"Inertia", "->", 
       RowBox[{"{", 
        RowBox[{"0", ",", "IThigh", ",", " ", "0"}], "}"}]}], ",", 
      RowBox[{"BodyToJnt", "\[Rule]", "swingThighMassOffsetVector"}]}], "]"}],
     ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"swingShankMassOffsetVector", " ", "=", " ", 
     RowBox[{
      RowBox[{"swingShankMassVerticalOffsetBelowPelvis", " ", 
       RowBox[{"swingShank", "[", "3", "]"}]}], "-", 
      RowBox[{"swingShankMassForwardOffset", " ", 
       RowBox[{"swingShank", "[", "1", "]"}]}]}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AddBody", "[", 
     RowBox[{
     "swingShank", ",", " ", "swingThigh", ",", " ", "Hinge", ",", " ", 
      RowBox[{"Axis", "->", 
       RowBox[{"ground", "[", "2", "]"}]}], ",", 
      RowBox[{"RelativeTo", "\[Rule]", "ground"}], ",", " ", 
      RowBox[{"InbToJnt", "\[Rule]", " ", 
       RowBox[{"swingThighMassOffsetVector", " ", "-", " ", 
        RowBox[{"LThigh", " ", 
         RowBox[{"swingThigh", "[", "3", "]"}]}]}]}], ",", " ", 
      "\[IndentingNewLine]", 
      RowBox[{"Mass", "\[Rule]", "MShank"}], ",", 
      RowBox[{"Inertia", "->", 
       RowBox[{"{", 
        RowBox[{"0", ",", "IShank", ",", " ", "0"}], "}"}]}], ",", 
      RowBox[{"BodyToJnt", "\[Rule]", "swingShankMassOffsetVector"}]}], "]"}],
     ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AddBody", "[", 
     RowBox[{
     "swingContactPoint", ",", " ", "swingShank", ",", " ", "Fixed", ",", 
      RowBox[{"InbToJnt", "\[Rule]", 
       RowBox[{"swingShankMassOffsetVector", " ", "-", " ", 
        RowBox[{"LShank", " ", 
         RowBox[{"swingShank", "[", "3", "]"}]}]}]}], ",", 
      RowBox[{"BodyToJnt", "\[Rule]", "0"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{{3.446933798487845*^9, 3.4469338643521357`*^9}, {
   3.446933973115541*^9, 3.446933973964518*^9}, {3.446934165197138*^9, 
   3.446934196255003*^9}, {3.446934232495329*^9, 3.446934296806625*^9}, {
   3.4469343369097557`*^9, 3.446934396401021*^9}, {3.446934874977736*^9, 
   3.446934894293985*^9}, {3.44693499207298*^9, 3.446935146273335*^9}, {
   3.44693525471518*^9, 3.446935466215646*^9}, {3.446935962145954*^9, 
   3.446935976732356*^9}, {3.446936070668562*^9, 3.44693608258097*^9}, {
   3.4469363147903633`*^9, 3.446936338677568*^9}, 3.446936378812018*^9, {
   3.4471087351120424`*^9, 3.4471087378627677`*^9}, {3.4481026874620094`*^9, 
   3.448102702886552*^9}, {3.448102761625425*^9, 3.448102768122074*^9}, {
   3.448102820844346*^9, 3.4481028223004913`*^9}, {3.4821414061689053`*^9, 
   3.4821414214108224`*^9}, {3.4821414642524257`*^9, 3.482141476149533*^9}, {
   3.482141655136904*^9, 3.482141660013917*^9}, {3.482141725858597*^9, 
   3.4821417277513185`*^9}, {3.5787505024899487`*^9, 
   3.5787505075804577`*^9}, {3.578750795509248*^9, 3.578750833278024*^9}, {
   3.5787515081510377`*^9, 3.5787515744540377`*^9}, {3.5787516523330374`*^9, 
   3.5787516576120377`*^9}, 3.578751755209038*^9, {3.5787519016520376`*^9, 
   3.5787519046600375`*^9}, 3.578751984209038*^9, {3.5787520234300375`*^9, 
   3.5787520336910377`*^9}, {3.5787520869020376`*^9, 
   3.5787521186160374`*^9}, {3.5787521561120377`*^9, 
   3.5787521592220373`*^9}, {3.578752219320038*^9, 3.5787522391240377`*^9}, {
   3.578752342478038*^9, 3.5787523564200373`*^9}, {3.5787524939440374`*^9, 
   3.5787525420950375`*^9}, {3.5787526077960377`*^9, 
   3.5787526490530376`*^9}, {3.5787527942390375`*^9, 3.578752880006308*^9}, 
   3.578753553127974*^9, {3.578753590520713*^9, 3.578753590831744*^9}, {
   3.5787536331139717`*^9, 3.5787536912077804`*^9}, {3.578753746087268*^9, 
   3.5787537494146004`*^9}, {3.5787538261142697`*^9, 
   3.5787538356952276`*^9}, {3.5787539018298407`*^9, 
   3.5787539197406316`*^9}, {3.5787569081818776`*^9, 3.578756939778037*^9}, {
   3.5787569830193605`*^9, 3.5787570021842766`*^9}, {3.578757048379896*^9, 
   3.5787570921412716`*^9}, {3.5787571423192887`*^9, 
   3.5787572521772738`*^9}, {3.5787574736334233`*^9, 
   3.5787574787504234`*^9}, {3.5787595447984233`*^9, 
   3.5787596145914235`*^9}, {3.578761451693204*^9, 3.57876145545858*^9}, {
   3.578761545697603*^9, 3.578761547255759*^9}, {3.578761591118145*^9, 
   3.578761686961728*^9}, {3.578761830974128*^9, 3.5787618317922096`*^9}, {
   3.5787618807371035`*^9, 3.5787618823662663`*^9}, {3.5787619276167912`*^9, 
   3.5787619907801065`*^9}, {3.578762042038232*^9, 3.578762101291157*^9}, 
   3.5787624416331873`*^9, {3.578769908001306*^9, 3.5787699081383133`*^9}, {
   3.5788397042839365`*^9, 3.5788397058029366`*^9}, {3.5788397440249367`*^9, 
   3.578839746792937*^9}, 3.578850230916913*^9, 3.5788537759170055`*^9, {
   3.5788538806049933`*^9, 3.578853882016074*^9}, {3.578855936226568*^9, 
   3.578855937185623*^9}, 3.578856847970717*^9, {3.57920068050898*^9, 
   3.579200786570789*^9}, {3.579200878075232*^9, 3.579200900422593*^9}, {
   3.631464384887931*^9, 3.6314643883023815`*^9}, {3.631464583272766*^9, 
   3.631464608766864*^9}, {3.6314646612541265`*^9, 3.6314646848448734`*^9}, {
   3.631464718277609*^9, 3.6314647204001155`*^9}, {3.6314647859706655`*^9, 
   3.631464818025423*^9}, {3.631464856529786*^9, 3.631464888880726*^9}, {
   3.6314668796566296`*^9, 3.63146704646504*^9}, {3.631467082186411*^9, 
   3.631467084495019*^9}, {3.6314671664121747`*^9, 3.6314672235467415`*^9}, {
   3.631467258155306*^9, 3.631467332794314*^9}, {3.6314673748461666`*^9, 
   3.6314674373015156`*^9}, {3.631467500255207*^9, 3.631467500925661*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Apply gravitational and spring forces", "Subsubsection",
 CellChangeTimes->{{3.446936462821484*^9, 3.446936493067205*^9}, {
  3.4482332964944153`*^9, 3.448233342564022*^9}, {3.483287161868603*^9, 
  3.483287162519539*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"AppFrc", "[", 
   RowBox[{"pelvis", ",", 
    RowBox[{
     RowBox[{"Mass", "[", "pelvis", "]"}], " ", "grav"}], ",", " ", "0"}], 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AppFrc", "[", 
   RowBox[{"stanceLeg", ",", 
    RowBox[{
     RowBox[{"Mass", "[", "stanceLeg", "]"}], " ", "grav"}], ",", "0"}], 
   "]"}], ";"}], "\n", 
 RowBox[{
  RowBox[{"AppFrc", "[", 
   RowBox[{"swingThigh", ",", 
    RowBox[{
     RowBox[{"Mass", "[", "swingThigh", "]"}], " ", "grav"}], ",", "0"}], 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"AppFrc", "[", 
    RowBox[{"swingShank", ",", 
     RowBox[{
      RowBox[{"Mass", "[", "swingShank", "]"}], " ", "grav"}], ",", "0"}], 
    "]"}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
     "spring", " ", "between", " ", "legs", "\[IndentingNewLine]", 
      "hipSpringExtension"}], " ", "=", " ", 
     RowBox[{
      RowBox[{"q", "[", "5", "]"}], "-", 
      RowBox[{"q", "[", "6", "]"}]}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"AppTrq", "[", 
     RowBox[{"stanceLeg", ",", " ", 
      RowBox[{
       RowBox[{"-", "KHip"}], " ", "*", " ", "hipSpringExtension", " ", "*", 
       RowBox[{"stanceLeg", "[", "2", "]"}]}]}], "]"}], ";", "\n", 
    RowBox[{"AppTrq", "[", 
     RowBox[{"swingLeg", ",", " ", 
      RowBox[{"KHip", " ", "*", " ", "hipSpringExtension", "*", " ", 
       RowBox[{"swingLeg", "[", "2", "]"}]}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"legAngleDisplacement", " ", "=", " ", 
     RowBox[{
      RowBox[{"q", "[", "6", "]"}], " ", "-", " ", 
      RowBox[{
       RowBox[{"q", "[", "5", "]"}], "\[IndentingNewLine]", 
       RowBox[{"AppTrq", "[", 
        RowBox[{"stanceLeg", ",", " ", 
         RowBox[{"KSwing", " ", "*", " ", "legAngleDisplacement", " ", "*", 
          RowBox[{"stanceLeg", "[", "2", "]"}]}]}], "]"}]}]}]}], ";", "\n", 
    RowBox[{"AppTrq", "[", 
     RowBox[{"swingLeg", ",", " ", 
      RowBox[{
       RowBox[{"-", "KSwing"}], " ", "*", " ", "legAngleDisplacement", "*", 
       " ", 
       RowBox[{"swingLeg", "[", "2", "]"}]}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppTrq", "[", 
     RowBox[{"stanceLeg", ",", " ", 
      RowBox[{"KSwing", " ", "*", " ", 
       RowBox[{"q", "[", "6", "]"}], " ", "*", 
       RowBox[{"stanceLeg", "[", "2", "]"}]}]}], "]"}], ";", "\n", 
    RowBox[{"AppTrq", "[", 
     RowBox[{"swingLeg", ",", " ", 
      RowBox[{
       RowBox[{"-", "KSwing"}], " ", "*", " ", 
       RowBox[{"q", "[", "6", "]"}], "*", " ", 
       RowBox[{"swingLeg", "[", "2", "]"}]}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"directionOfGravity", " ", "=", "  ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"-", 
       RowBox[{"Cos", "[", "groundAngle", "]"}]}], " ", 
      RowBox[{"ground", "[", "3", "]"}]}], "+", 
     RowBox[{
      RowBox[{"Sin", "[", "groundAngle", "]"}], " ", 
      RowBox[{"ground", "[", "1", "]"}]}]}], ")"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"grav", "=", 
    RowBox[{"g", " ", "*", " ", "directionOfGravity"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.446933798487845*^9, 3.4469338643521357`*^9}, {
   3.446933973115541*^9, 3.446933973964518*^9}, {3.446934165197138*^9, 
   3.446934196255003*^9}, {3.446934232495329*^9, 3.446934296806625*^9}, {
   3.4469343369097557`*^9, 3.446934396401021*^9}, {3.446934874977736*^9, 
   3.446934894293985*^9}, {3.44693499207298*^9, 3.446935146273335*^9}, {
   3.44693525471518*^9, 3.446935466215646*^9}, {3.446935962145954*^9, 
   3.446935976732356*^9}, {3.446936070668562*^9, 3.44693608258097*^9}, {
   3.4469363147903633`*^9, 3.446936338677568*^9}, 3.446936378812018*^9, 
   3.4469364610240583`*^9, {3.4475855130356894`*^9, 3.4475855219784155`*^9}, {
   3.447978308088942*^9, 3.4479783106736836`*^9}, {3.4479783870460453`*^9, 
   3.447978484110526*^9}, {3.4479841407195263`*^9, 3.4479841960575266`*^9}, 
   3.4479844393925266`*^9, {3.4479845083805265`*^9, 3.447984518412526*^9}, {
   3.4479846555075264`*^9, 3.4479846601115265`*^9}, {3.4479847738695264`*^9, 
   3.4479847813245263`*^9}, {3.4479848288575263`*^9, 
   3.4479849433645267`*^9}, {3.4480987792682242`*^9, 
   3.4480987798112783`*^9}, {3.4481029399452553`*^9, 3.448103051450404*^9}, {
   3.4481030917564344`*^9, 3.448103107434002*^9}, {3.448103148577116*^9, 
   3.4481032313756886`*^9}, {3.4481054441571136`*^9, 
   3.4481054648399763`*^9}, {3.4483301941466227`*^9, 
   3.4483302194216223`*^9}, {3.482142877494568*^9, 3.4821428791169004`*^9}, {
   3.4821429310916367`*^9, 3.482142940364971*^9}, {3.4821429710891504`*^9, 
   3.482142978960469*^9}, {3.4821430412700653`*^9, 3.4821433715850353`*^9}, {
   3.482143422768634*^9, 3.482143462205341*^9}, 3.4821439194528303`*^9, {
   3.482143970386069*^9, 3.4821440096825743`*^9}, {3.482171949209017*^9, 
   3.482172118117906*^9}, {3.4821721968117747`*^9, 3.4821722426633596`*^9}, 
   3.4821923440432043`*^9, {3.4825769635486126`*^9, 3.4825769667866125`*^9}, {
   3.4825770019776125`*^9, 3.4825770097766128`*^9}, {3.4825770516456127`*^9, 
   3.482577108920613*^9}, {3.4825772275936127`*^9, 3.482577233514613*^9}, {
   3.4825773184166126`*^9, 3.482577323414613*^9}, {3.48320629996772*^9, 
   3.483206357751589*^9}, {3.4832063992646575`*^9, 3.483206399785323*^9}, {
   3.483206449620011*^9, 3.483206486248662*^9}, {3.483207111809553*^9, 
   3.483207129773413*^9}, {3.483207236835617*^9, 3.4832072404303913`*^9}, {
   3.4832073996218348`*^9, 3.4832074012540026`*^9}, {3.483207499225484*^9, 
   3.483207514075652*^9}, {3.4832084365785522`*^9, 3.4832084740794845`*^9}, {
   3.48320850893744*^9, 3.483208521524786*^9}, {3.4832086286424046`*^9, 
   3.4832087388743153`*^9}, {3.4832089448481674`*^9, 3.483209041210965*^9}, {
   3.4832096651840973`*^9, 3.483209666005245*^9}, 3.483211368283484*^9, {
   3.4832114596421185`*^9, 3.4832115327650766`*^9}, {3.4832116128083754`*^9, 
   3.483211730084671*^9}, {3.4832118060023212`*^9, 3.483211828814669*^9}, {
   3.48321219187949*^9, 3.4832122032155647`*^9}, {3.4832134191597567`*^9, 
   3.483213449753138*^9}, 3.4832135577362566`*^9, 3.4832143171401987`*^9, {
   3.4832191647171187`*^9, 3.4832192205373845`*^9}, 3.4832192765779667`*^9, {
   3.483219320400981*^9, 3.483219358035096*^9}, {3.4832194039210773`*^9, 
   3.483219445520895*^9}, {3.483221374644839*^9, 3.4832213767979345`*^9}, {
   3.483221409745311*^9, 3.483221458164935*^9}, {3.4832216071191206`*^9, 
   3.483221619837408*^9}, {3.483229760086443*^9, 3.4832297843012624`*^9}, {
   3.4832871514736557`*^9, 3.483287152184678*^9}, {3.4832918597838736`*^9, 
   3.4832918985896735`*^9}, {3.4832925936891775`*^9, 
   3.4832926077293663`*^9}, {3.4832927055800686`*^9, 
   3.4832927084041295`*^9}, {3.4832934279788275`*^9, 3.48329342834936*^9}, {
   3.4832934815458527`*^9, 3.483293485852045*^9}, {3.4832937304737935`*^9, 
   3.483293747087683*^9}, {3.4832939173625264`*^9, 3.4832939234713106`*^9}, {
   3.483294190224883*^9, 3.4832942129976287`*^9}, {3.483294657066168*^9, 
   3.4832946600104017`*^9}, {3.4832953921932287`*^9, 
   3.4832953939858065`*^9}, {3.4832956300452433`*^9, 3.483295634411522*^9}, {
   3.483295719744224*^9, 3.483295721416629*^9}, {3.4832959130822306`*^9, 
   3.483295913623008*^9}, 3.4832959536705933`*^9, {3.483295988921282*^9, 
   3.4832959894720736`*^9}, {3.4832961923137455`*^9, 3.483296202418275*^9}, {
   3.483296447370499*^9, 3.483296449563653*^9}, {3.483297269903243*^9, 
   3.4832972747101555`*^9}, {3.483297319664797*^9, 3.4832973276262445`*^9}, {
   3.4832980016354227`*^9, 3.4832980073736734`*^9}, {3.48329807327844*^9, 
   3.483298082591832*^9}, {3.483298190256646*^9, 3.483298192299584*^9}, {
   3.4832988038689775`*^9, 3.4832988092266817`*^9}, {3.4832988650469475`*^9, 
   3.4832988712759037`*^9}, {3.483299623587675*^9, 3.483299626181405*^9}, {
   3.484471801761492*^9, 3.4844718036876016`*^9}, {3.484472037269962*^9, 
   3.484472067850711*^9}, {3.4844723938483567`*^9, 3.4844724241760917`*^9}, {
   3.4844726609746356`*^9, 3.4844726772145643`*^9}, {3.4901089517952385`*^9, 
   3.490109003245239*^9}, {3.4902305688547387`*^9, 3.4902306225901117`*^9}, {
   3.490291128458542*^9, 3.490291207641346*^9}, {3.4902912392774196`*^9, 
   3.4902912396118536`*^9}, {3.4902912896327963`*^9, 
   3.4902913547900257`*^9}, {3.4902916844462748`*^9, 3.490291685253436*^9}, {
   3.4903001528455243`*^9, 3.4903002651157503`*^9}, {3.490304894344627*^9, 
   3.490304901214314*^9}, 3.4912316351961613`*^9, {3.4912333794642963`*^9, 
   3.4912334598999567`*^9}, {3.491303206775587*^9, 3.491303215608288*^9}, {
   3.4913032986476927`*^9, 3.491303298978168*^9}, {3.4913036280713806`*^9, 
   3.4913036762606735`*^9}, {3.491305954967293*^9, 3.491305967104746*^9}, {
   3.4913060295345154`*^9, 3.4913061332937136`*^9}, 3.4913154497080913`*^9, {
   3.5787539599826555`*^9, 3.5787539973963966`*^9}, {3.578754048571513*^9, 
   3.578754104725128*^9}, {3.578754135266182*^9, 3.578754135660221*^9}, {
   3.578754177282383*^9, 3.578754179705428*^9}, {3.5787542953344283`*^9, 
   3.578754358396428*^9}, 3.5787543977554283`*^9, {3.5787545501624284`*^9, 
   3.5787545851674285`*^9}, {3.5787546195154285`*^9, 3.5787546623594284`*^9}, 
   {3.5787546950234284`*^9, 3.5787547465304284`*^9}, {3.5787549427934284`*^9, 
   3.5787549513504286`*^9}, {3.578754983113428*^9, 3.5787549957474284`*^9}, {
   3.5787550385964284`*^9, 3.5787550805504284`*^9}, 3.578759739886423*^9, {
   3.5787618056245933`*^9, 3.5787618093969707`*^9}, {3.5787621061486425`*^9, 
   3.578762107741802*^9}, {3.578768807953387*^9, 3.578768809973502*^9}, {
   3.5787690177673874`*^9, 3.578769040924712*^9}, {3.5787699111284847`*^9, 
   3.5787699230311656`*^9}, 3.578769959740265*^9, {3.5791017428388863`*^9, 
   3.579101775804681*^9}, {3.5791024148098526`*^9, 3.5791024619635677`*^9}, {
   3.57910477732629*^9, 3.57910479179729*^9}, {3.631467518806347*^9, 
   3.6314675580351996`*^9}, {3.6314682141389785`*^9, 3.6314682229762583`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Calculate equations of motion, energies\
\>", "Subsubsection",
 CellChangeTimes->{{3.446936462821484*^9, 3.446936493067205*^9}, {
   3.4482332964944153`*^9, 3.448233342564022*^9}, {3.483287161868603*^9, 
   3.483287162519539*^9}, {3.5787553012144284`*^9, 3.5787553081574287`*^9}, 
   3.5787553808734283`*^9, {3.5787597465054235`*^9, 3.578759748089423*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"eom", " ", "=", " ", 
   RowBox[{"EOM", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"MM", ",", "rhs"}], "}"}], "=", 
    RowBox[{
     RowBox[{"MassMatrix", "[", "eom", "]"}], "//", "Simplify"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", "MM", "]"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"totalMass", " ", "=", " ", 
    RowBox[{
     RowBox[{"Mass", "[", "pelvis", "]"}], " ", "+", " ", 
     RowBox[{"Mass", "[", "stanceLeg", "]"}], "+", " ", 
     RowBox[{"Mass", "[", "swingThigh", "]"}], "+", " ", 
     RowBox[{"Mass", "[", "swingShank", "]"}]}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"totalCOMPositionTimesMass", " ", "=", " ", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Mass", "[", "pelvis", "]"}], 
       RowBox[{"PosCOM", "[", "pelvis", "]"}]}], "+", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Mass", "[", "stanceLeg", "]"}], 
       RowBox[{"PosCOM", "[", "stanceLeg", "]"}]}], " ", "+", " ", 
      RowBox[{
       RowBox[{"Mass", "[", "swingThigh", "]"}], 
       RowBox[{"PosCOM", "[", "swingThigh", "]"}]}], "  ", "+", " ", 
      RowBox[{
       RowBox[{"Mass", "[", "swingShank", "]"}], 
       RowBox[{"PosCOM", "[", "swingShank", "]"}]}]}], " ", "//", 
     "Simplify"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"PEGravity", "=", 
    RowBox[{
     RowBox[{"-", 
      RowBox[{"totalCOMPositionTimesMass", ".", "grav"}]}], "//", 
     "Simplify"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"PESpring", " ", "=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{"1", "/", "2"}], ")"}], "KSwing", " ", 
       RowBox[{"q", "[", "6", "]"}], 
       RowBox[{"q", "[", "6", "]"}]}], "//", "Simplify"}]}], ";"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"PESpring", " ", "=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{"1", "/", "2"}], ")"}], "KSwing", " ", "legAngleDisplacement",
        " ", "*", " ", "legAngleDisplacement"}], "//", "Simplify"}]}], ";"}], 
   "\[IndentingNewLine]", "*)"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"PESpring", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"PE", " ", "=", " ", 
    RowBox[{
     RowBox[{"PEGravity", "+", "PESpring"}], "//", "Simplify"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"comVelocity", " ", "=", " ", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"Mass", "[", "pelvis", "]"}], "*", 
         RowBox[{"VelCOM", "[", "pelvis", "]"}]}], " ", "+", " ", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Mass", "[", "stanceLeg", "]"}], "*", 
         RowBox[{"VelCOM", "[", "stanceLeg", "]"}]}], " ", "+", " ", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Mass", "[", "swingThigh", "]"}], "*", 
         RowBox[{"VelCOM", "[", "swingThigh", "]"}]}], " ", "+", " ", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Mass", "[", "swingShank", "]"}], "*", 
         RowBox[{"VelCOM", "[", "swingShank", "]"}]}]}], ")"}], " ", "/", " ",
       "totalMass"}], " ", "//", " ", "Simplify"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"KELinear", " ", "=", " ", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"1", "/", "2"}], ")"}], " ", "*", " ", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"Mass", "[", "pelvis", "]"}], "*", 
        RowBox[{
         RowBox[{"VelCOM", "[", "pelvis", "]"}], ".", 
         RowBox[{"VelCOM", "[", "pelvis", "]"}]}]}], " ", "+", " ", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Mass", "[", "stanceLeg", "]"}], "*", 
        RowBox[{
         RowBox[{"VelCOM", "[", "stanceLeg", "]"}], ".", 
         RowBox[{"VelCOM", "[", "stanceLeg", "]"}]}]}], "+", " ", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Mass", "[", "swingThigh", "]"}], "*", 
        RowBox[{
         RowBox[{"VelCOM", "[", "swingThigh", "]"}], ".", 
         RowBox[{"VelCOM", "[", "swingThigh", "]"}]}]}], "+", " ", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Mass", "[", "swingShank", "]"}], "*", 
        RowBox[{
         RowBox[{"VelCOM", "[", "swingShank", "]"}], ".", 
         RowBox[{"VelCOM", "[", "swingShank", "]"}]}]}]}], ")"}]}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"KELinear", " ", "=", " ", 
     RowBox[{"FullSimplify", "[", "KELinear", "]"}]}], ";"}], "*)"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"this", " ", "is", " ", "wrong"}], ",", " ", 
    RowBox[{
    "it", " ", "only", " ", "takes", " ", "into", " ", "energy", " ", "of", 
     " ", "the", " ", "com"}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{
      "not", " ", "about", " ", "the", " ", "com", "\[IndentingNewLine]", 
       "KELinear"}], " ", "=", " ", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"1", "/", "2"}], ")"}], " ", "*", " ", "totalMass", " ", "*",
         " ", 
        RowBox[{"comVelocity", ".", "comVelocity"}]}], " ", "//", " ", 
       "Simplify"}]}], ";"}]}], "\[IndentingNewLine]", "*)"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"KERotational", "=", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{"1", "/", "2"}], ")"}], "*", 
      RowBox[{"(", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"Inertia", "[", "pelvis", "]"}], ".", 
         RowBox[{"AngVel", "[", "pelvis", "]"}], ".", 
         RowBox[{"AngVel", "[", "pelvis", "]"}]}], " ", "+", " ", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Inertia", "[", "stanceLeg", "]"}], ".", 
         RowBox[{"AngVel", "[", "stanceLeg", "]"}], ".", 
         RowBox[{"AngVel", "[", "stanceLeg", "]"}]}], " ", "+", " ", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Inertia", "[", "swingThigh", "]"}], ".", 
         RowBox[{"AngVel", "[", "swingThigh", "]"}], ".", 
         RowBox[{"AngVel", "[", "swingThigh", "]"}]}], " ", "+", " ", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Inertia", "[", "swingShank", "]"}], ".", 
         RowBox[{"AngVel", "[", "swingShank", "]"}], ".", 
         RowBox[{"AngVel", "[", "swingShank", "]"}]}]}], ")"}]}], " ", "//", 
     " ", "Simplify"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"KE", " ", "=", " ", 
    RowBox[{"KELinear", " ", "+", " ", "KERotational"}]}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"KE", " ", "=", " ", "KERotational"}], ";", "\[IndentingNewLine]", 
    RowBox[{"KE", " ", "=", " ", "KELinear"}], ";"}], "*)"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"centerOfMassPosition", " ", "=", " ", 
    RowBox[{
     RowBox[{"(", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"Mass", "[", "pelvis", "]"}], "*", 
        RowBox[{"PosCOM", "[", "pelvis", "]"}]}], " ", "+", " ", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Mass", "[", "stanceLeg", "]"}], "*", 
        RowBox[{"PosCOM", "[", "stanceLeg", "]"}]}], " ", "+", " ", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Mass", "[", "swingThigh", "]"}], "*", 
        RowBox[{"PosCOM", "[", "swingThigh", "]"}]}], " ", "+", " ", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Mass", "[", "swingShank", "]"}], "*", 
        RowBox[{"PosCOM", "[", "swingShank", "]"}]}]}], ")"}], " ", "/", " ", 
     "totalMass"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"totalForceOnCOM", " ", "=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"Mass", "[", "pelvis", "]"}], "*", 
       RowBox[{"AccCOM", "[", "pelvis", "]"}]}], " ", "+", " ", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Mass", "[", "stanceLeg", "]"}], "*", 
       RowBox[{"AccCOM", "[", "stanceLeg", "]"}]}], " ", "+", " ", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Mass", "[", "swingLeg", "]"}], "*", 
       RowBox[{"AccCOM", "[", "swingLeg", "]"}]}]}]}], ";", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"totalTorqueAroundCOM", " ", "=", " ", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"Inertia", "[", "pelvis", "]"}], ".", 
        RowBox[{"AngAcc", "[", "pelvis", "]"}]}], " ", "+", " ", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Inertia", "[", "stanceLeg", "]"}], ".", 
        RowBox[{"AngAcc", "[", "stanceLeg", "]"}]}], "+", " ", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Inertia", "[", "swingLeg", "]"}], ".", 
        RowBox[{"AngAcc", "[", "swingLeg", "]"}]}]}], ")"}]}], ";"}], 
   "\[IndentingNewLine]", "*)"}]}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.446934958453143*^9, 3.4469349610737743`*^9}, {
   3.446935214939715*^9, 3.446935217192977*^9}, {3.4479841720295267`*^9, 
   3.447984174313526*^9}, {3.448097617390153*^9, 3.4480976660111527`*^9}, 
   3.4480990324075356`*^9, {3.4480990838986845`*^9, 3.4480990893202267`*^9}, 
   3.4821410703760595`*^9, {3.4902913471702175`*^9, 3.490291361226242*^9}, 
   3.490291394306774*^9, {3.4902916933210497`*^9, 3.490291716651715*^9}, {
   3.4902918000413895`*^9, 3.4902918026969204`*^9}, {3.4902956443947244`*^9, 
   3.490295651859471*^9}, {3.49029568645193*^9, 3.4902956952788124`*^9}, {
   3.490296043368618*^9, 3.4902960720574865`*^9}, {3.490296136357916*^9, 
   3.49029619200848*^9}, 3.490296227721051*^9, {3.4903044502652235`*^9, 
   3.490304457512948*^9}, {3.4912330241433697`*^9, 3.4912330244337873`*^9}, 
   3.4913154550057087`*^9, {3.5787553344854283`*^9, 3.5787553672654285`*^9}, {
   3.578759743247423*^9, 3.578759743728423*^9}, {3.578761398313866*^9, 
   3.578761403705405*^9}, {3.5787626893559575`*^9, 3.57876269818484*^9}, 
   3.5787628724162617`*^9, {3.57876304231625*^9, 3.578763076149633*^9}, 
   3.5787631622262397`*^9, 3.5787660950097313`*^9, 3.578768880586541*^9, 
   3.5787690062147264`*^9, 3.5787690575076604`*^9, 3.578769237354947*^9, {
   3.5787699477115774`*^9, 3.578769951151774*^9}, 3.5787709123040323`*^9, {
   3.5787761300831623`*^9, 3.5787761334581623`*^9}, {3.5787762304591618`*^9, 
   3.578776242861162*^9}, {3.578776454001162*^9, 3.5787764543001623`*^9}, {
   3.578776631878162*^9, 3.578776638325162*^9}, {3.5787766884801617`*^9, 
   3.5787767062151623`*^9}, 3.5787767621161623`*^9, 3.578776880931162*^9, {
   3.578776927595162*^9, 3.578776930582162*^9}, {3.578776971021162*^9, 
   3.578776978163162*^9}, 3.5787770259391623`*^9, {3.578777096757162*^9, 
   3.578777103809162*^9}, {3.578849145195913*^9, 3.578849149640913*^9}, {
   3.5788491875399127`*^9, 3.578849198579913*^9}, {3.5788492754079127`*^9, 
   3.5788493095169125`*^9}, {3.578849385834913*^9, 3.5788494022009125`*^9}, {
   3.578849501333913*^9, 3.578849545260913*^9}, {3.5788545546775484`*^9, 
   3.578854564783126*^9}, {3.578854630006857*^9, 3.5788546321169777`*^9}, {
   3.578855385895091*^9, 3.5788554326647663`*^9}, {3.578855503079794*^9, 
   3.5788555041348543`*^9}, {3.5788557247734737`*^9, 3.578855762388625*^9}, {
   3.5788558520967565`*^9, 3.5788558923260574`*^9}, {3.5790210873057876`*^9, 
   3.5790210884669037`*^9}, {3.5791018623119125`*^9, 3.579101880159832*^9}, {
   3.5792005334858494`*^9, 3.579200537236473*^9}, {3.6314675740075436`*^9, 
   3.6314676954607577`*^9}, {3.631468177441928*^9, 3.631468180201894*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"MLeg", "+", "MPelvis", "+", "MShank", "+", "MThigh"}], "0", 
      "0", 
      RowBox[{
       RowBox[{"-", "MLeg"}], " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"legMassVerticalOffsetBelowPelvis", " ", 
          RowBox[{"Cos", "[", 
           SubscriptBox["q", "4"], "]"}]}], "+", 
         RowBox[{"legMassForwardOffset", " ", 
          RowBox[{"Sin", "[", 
           SubscriptBox["q", "4"], "]"}]}]}], ")"}]}], 
      RowBox[{
       RowBox[{
        RowBox[{"-", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"LThigh", " ", "MShank"}], "+", 
           RowBox[{
           "MThigh", " ", "swingThighMassVerticalOffsetBelowPelvis"}]}], 
          ")"}]}], " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "5"], "]"}]}], "-", 
       RowBox[{"MThigh", " ", "swingThighMassForwardOffset", " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "5"], "]"}]}]}], 
      RowBox[{
       RowBox[{"-", "MShank"}], " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"swingShankMassVerticalOffsetBelowPelvis", " ", 
          RowBox[{"Cos", "[", 
           SubscriptBox["q", "6"], "]"}]}], "+", 
         RowBox[{"swingShankMassForwardOffset", " ", 
          RowBox[{"Sin", "[", 
           SubscriptBox["q", "6"], "]"}]}]}], ")"}]}]},
     {"0", 
      RowBox[{"MLeg", "+", "MPelvis", "+", "MShank", "+", "MThigh"}], "0", 
      RowBox[{
       RowBox[{
        RowBox[{"-", "legMassForwardOffset"}], " ", "MLeg", " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "4"], "]"}]}], "+", 
       RowBox[{"legMassVerticalOffsetBelowPelvis", " ", "MLeg", " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "4"], "]"}]}]}], 
      RowBox[{
       RowBox[{
        RowBox[{"-", "MThigh"}], " ", "swingThighMassForwardOffset", " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "5"], "]"}]}], "+", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"LThigh", " ", "MShank"}], "+", 
          RowBox[{
          "MThigh", " ", "swingThighMassVerticalOffsetBelowPelvis"}]}], ")"}],
         " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "5"], "]"}]}]}], 
      RowBox[{
       RowBox[{
        RowBox[{"-", "MShank"}], " ", "swingShankMassForwardOffset", " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "6"], "]"}]}], "+", 
       RowBox[{"MShank", " ", "swingShankMassVerticalOffsetBelowPelvis", " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "6"], "]"}]}]}]},
     {"0", "0", "IPelvis", "0", "0", "0"},
     {
      RowBox[{
       RowBox[{"-", "MLeg"}], " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"legMassVerticalOffsetBelowPelvis", " ", 
          RowBox[{"Cos", "[", 
           SubscriptBox["q", "4"], "]"}]}], "+", 
         RowBox[{"legMassForwardOffset", " ", 
          RowBox[{"Sin", "[", 
           SubscriptBox["q", "4"], "]"}]}]}], ")"}]}], 
      RowBox[{
       RowBox[{
        RowBox[{"-", "legMassForwardOffset"}], " ", "MLeg", " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "4"], "]"}]}], "+", 
       RowBox[{"legMassVerticalOffsetBelowPelvis", " ", "MLeg", " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "4"], "]"}]}]}], "0", 
      RowBox[{"ILeg", "+", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          SuperscriptBox["legMassForwardOffset", "2"], "+", 
          SuperscriptBox["legMassVerticalOffsetBelowPelvis", "2"]}], ")"}], 
        " ", "MLeg"}]}], "0", "0"},
     {
      RowBox[{
       RowBox[{
        RowBox[{"-", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"LThigh", " ", "MShank"}], "+", 
           RowBox[{
           "MThigh", " ", "swingThighMassVerticalOffsetBelowPelvis"}]}], 
          ")"}]}], " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "5"], "]"}]}], "-", 
       RowBox[{"MThigh", " ", "swingThighMassForwardOffset", " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "5"], "]"}]}]}], 
      RowBox[{
       RowBox[{
        RowBox[{"-", "MThigh"}], " ", "swingThighMassForwardOffset", " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "5"], "]"}]}], "+", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"LThigh", " ", "MShank"}], "+", 
          RowBox[{
          "MThigh", " ", "swingThighMassVerticalOffsetBelowPelvis"}]}], ")"}],
         " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "5"], "]"}]}]}], "0", "0", 
      RowBox[{"IThigh", "+", 
       RowBox[{
        SuperscriptBox["LThigh", "2"], " ", "MShank"}], "+", 
       RowBox[{"MThigh", " ", 
        RowBox[{"(", 
         RowBox[{
          SuperscriptBox["swingThighMassForwardOffset", "2"], "+", 
          SuperscriptBox["swingThighMassVerticalOffsetBelowPelvis", "2"]}], 
         ")"}]}]}], 
      RowBox[{"LThigh", " ", "MShank", " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"swingShankMassVerticalOffsetBelowPelvis", " ", 
          RowBox[{"Cos", "[", 
           RowBox[{
            SubscriptBox["q", "5"], "-", 
            SubscriptBox["q", "6"]}], "]"}]}], "-", 
         RowBox[{"swingShankMassForwardOffset", " ", 
          RowBox[{"Sin", "[", 
           RowBox[{
            SubscriptBox["q", "5"], "-", 
            SubscriptBox["q", "6"]}], "]"}]}]}], ")"}]}]},
     {
      RowBox[{
       RowBox[{"-", "MShank"}], " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"swingShankMassVerticalOffsetBelowPelvis", " ", 
          RowBox[{"Cos", "[", 
           SubscriptBox["q", "6"], "]"}]}], "+", 
         RowBox[{"swingShankMassForwardOffset", " ", 
          RowBox[{"Sin", "[", 
           SubscriptBox["q", "6"], "]"}]}]}], ")"}]}], 
      RowBox[{
       RowBox[{
        RowBox[{"-", "MShank"}], " ", "swingShankMassForwardOffset", " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "6"], "]"}]}], "+", 
       RowBox[{"MShank", " ", "swingShankMassVerticalOffsetBelowPelvis", " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "6"], "]"}]}]}], "0", "0", 
      RowBox[{"LThigh", " ", "MShank", " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"swingShankMassVerticalOffsetBelowPelvis", " ", 
          RowBox[{"Cos", "[", 
           RowBox[{
            SubscriptBox["q", "5"], "-", 
            SubscriptBox["q", "6"]}], "]"}]}], "-", 
         RowBox[{"swingShankMassForwardOffset", " ", 
          RowBox[{"Sin", "[", 
           RowBox[{
            SubscriptBox["q", "5"], "-", 
            SubscriptBox["q", "6"]}], "]"}]}]}], ")"}]}], 
      RowBox[{"IShank", "+", 
       RowBox[{"MShank", " ", 
        RowBox[{"(", 
         RowBox[{
          SuperscriptBox["swingShankMassForwardOffset", "2"], "+", 
          SuperscriptBox["swingShankMassVerticalOffsetBelowPelvis", "2"]}], 
         ")"}]}]}]}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.5792005523220253`*^9, {3.5792006966058073`*^9, 3.579200726412747*^9}, {
   3.57920077290569*^9, 3.5792007973740287`*^9}, {3.6314681709172983`*^9, 
   3.631468177747145*^9}, 3.631468262926616*^9, 3.6314686377458034`*^9}]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Kinematic Points", "Section",
 CellChangeTimes->{{3.446936522284877*^9, 3.446936526233658*^9}, {
  3.482180100156204*^9, 3.4821801031942043`*^9}}],

Cell["These points will be used for plotting the robot in matlab", "Text",
 CellChangeTimes->{{3.4469366383944397`*^9, 3.446936650030229*^9}, {
   3.4821442962045727`*^9, 3.482144427222968*^9}, {3.4821444934081373`*^9, 
   3.482144572612027*^9}, {3.482144603216034*^9, 3.4821447118923025`*^9}, {
   3.4821458209270163`*^9, 3.482145874433955*^9}, {3.482180118674204*^9, 
   3.4821801373532043`*^9}, 3.5787552597654285`*^9}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"pelvisPosition", " ", "=", " ", 
   RowBox[{"PosCOM", "[", "pelvis", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"thisFrame", " ", "=", " ", 
   RowBox[{"CastMtx", "[", 
    RowBox[{"pelvis", ",", " ", "ground"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pelvisR", " ", "=", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "3"}], "]"}], "]"}]}], "}"}], ",", " ", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "3"}], "]"}], "]"}]}], "}"}], ",", " ", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "3"}], "]"}], "]"}]}], "}"}]}], "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"stanceLegPosition", " ", "=", " ", 
   RowBox[{"PosCOM", "[", "stanceLeg", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"thisFrame", " ", "=", " ", 
   RowBox[{"CastMtx", "[", 
    RowBox[{"stanceLeg", ",", " ", "ground"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"stanceLegR", " ", "=", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "3"}], "]"}], "]"}]}], "}"}], ",", " ", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "3"}], "]"}], "]"}]}], "}"}], ",", " ", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "3"}], "]"}], "]"}]}], "}"}]}], "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"swingThighPosition", " ", "=", " ", 
   RowBox[{"PosCOM", "[", "swingThigh", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"thisFrame", " ", "=", " ", 
   RowBox[{"CastMtx", "[", 
    RowBox[{"swingThigh", ",", " ", "ground"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"swingThighR", " ", "=", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "3"}], "]"}], "]"}]}], "}"}], ",", " ", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "3"}], "]"}], "]"}]}], "}"}], ",", " ", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "3"}], "]"}], "]"}]}], "}"}]}], "}"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"swingShankPosition", " ", "=", " ", 
   RowBox[{"PosCOM", "[", "swingShank", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"thisFrame", " ", "=", " ", 
   RowBox[{"CastMtx", "[", 
    RowBox[{"swingShank", ",", " ", "ground"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"swingShankR", " ", "=", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "3"}], "]"}], "]"}]}], "}"}], ",", " ", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"2", ",", "3"}], "]"}], "]"}]}], "}"}], ",", " ", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "1"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "2"}], "]"}], "]"}], ",", " ", 
        RowBox[{"thisFrame", "[", 
         RowBox[{"[", 
          RowBox[{"3", ",", "3"}], "]"}], "]"}]}], "}"}]}], "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"stanceFootContactPoint", " ", "=", " ", 
   RowBox[{"PosCOM", "[", "stanceContactPoint", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"swingFootContactPoint", " ", "=", " ", 
    RowBox[{"PosCOM", "[", "swingContactPoint", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.446935543679307*^9, 3.446935599122636*^9}, {
   3.446935808059744*^9, 3.446935857823979*^9}, {3.446935929982038*^9, 
   3.446935951548718*^9}, {3.4469361242103558`*^9, 3.4469361388641233`*^9}, {
   3.4471108208344097`*^9, 3.44711084481641*^9}, 3.44711090527741*^9, {
   3.482142931321968*^9, 3.482142931321968*^9}, {3.4821447524906797`*^9, 
   3.482144771528054*^9}, {3.4821452640362463`*^9, 3.482145342809517*^9}, {
   3.482180166634204*^9, 3.482180241325204*^9}, {3.4821804823242044`*^9, 
   3.482180522189204*^9}, {3.4821805535632043`*^9, 3.482180669773204*^9}, {
   3.482181021981204*^9, 3.482181089575204*^9}, {3.4821812127322044`*^9, 
   3.482181225667204*^9}, {3.482181265289204*^9, 3.482181369539204*^9}, {
   3.4821818544702044`*^9, 3.482181870433204*^9}, {3.4821819669452043`*^9, 
   3.482182080349204*^9}, {3.4821821181352043`*^9, 3.4821821955762043`*^9}, {
   3.482182236735204*^9, 3.482182308554204*^9}, {3.4821837717652044`*^9, 
   3.482183804309204*^9}, {3.4821838841922045`*^9, 3.4821838896952043`*^9}, {
   3.482183955052204*^9, 3.482184017236204*^9}, {3.4821840489872046`*^9, 
   3.4821840714092045`*^9}, {3.4821846973782043`*^9, 
   3.4821846977912045`*^9}, {3.482187446781204*^9, 3.482187462605204*^9}, {
   3.482187504132204*^9, 3.4821875923782043`*^9}, {3.4821880850812044`*^9, 
   3.482188166834204*^9}, {3.4821882190412045`*^9, 3.4821882199492044`*^9}, 
   3.4821882775602045`*^9, {3.4821884972062044`*^9, 3.482188514183204*^9}, {
   3.4821905998062043`*^9, 3.482190617679204*^9}, {3.482190789973204*^9, 
   3.4821908211612043`*^9}, {3.4823344128998117`*^9, 
   3.4823344531318116`*^9}, {3.4824328743230295`*^9, 3.482432879268029*^9}, {
   3.482443227091878*^9, 3.482443230695238*^9}, {3.4832152405788307`*^9, 
   3.4832152450552225`*^9}, {3.578755431429428*^9, 3.5787554404574285`*^9}, {
   3.5787554860974283`*^9, 3.5787554916364284`*^9}, {3.5787563081354284`*^9, 
   3.5787563569994287`*^9}, {3.578756660995161*^9, 3.57875674958702*^9}, {
   3.5787574844024234`*^9, 3.578757498733423*^9}, {3.5787576269964237`*^9, 
   3.5787576286604233`*^9}, {3.578757901334423*^9, 3.5787579916244235`*^9}, {
   3.5787596272274237`*^9, 3.5787596465214233`*^9}, {3.57876353976799*^9, 
   3.5787635523512487`*^9}, 3.578763660234418*^9, {3.578839538771937*^9, 
   3.578839539678937*^9}, {3.6314677111138706`*^9, 3.631467743844115*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Constraint equations", "Section",
 CellChangeTimes->{{3.446936522284877*^9, 3.446936526233658*^9}}],

Cell[TextData[{
 "States:\n",
 StyleBox["flight",
  FontWeight->"Bold"],
 " shouldn\[CloseCurlyQuote]t ever happen, but might be useful if we want to \
implement an instantaneous pushoff impulse\n",
 StyleBox["kneeFree",
  FontWeight->"Bold"],
 "\n",
 StyleBox["kneeLocked",
  FontWeight->"Bold"]
}], "Text",
 CellChangeTimes->{{3.4469366383944397`*^9, 3.446936650030229*^9}, {
   3.4821442962045727`*^9, 3.482144427222968*^9}, {3.4821444934081373`*^9, 
   3.482144572612027*^9}, {3.482144603216034*^9, 3.4821447118923025`*^9}, {
   3.4821458209270163`*^9, 3.482145874433955*^9}, {3.5787580391964235`*^9, 
   3.5787580427954235`*^9}, {3.5787581602604237`*^9, 
   3.5787582881734233`*^9}, {3.5787583702004232`*^9, 
   3.5787583729364233`*^9}, {3.5787584048384237`*^9, 
   3.5787584569474235`*^9}, {3.578758515327423*^9, 3.578758526143423*^9}, {
   3.5787585591984234`*^9, 3.578758566365423*^9}, {3.5787586001094236`*^9, 
   3.5787586108434234`*^9}, {3.578758753155423*^9, 3.578758917945423*^9}, {
   3.578759011603423*^9, 3.578759027490423*^9}, 3.578762148654893*^9, {
   3.578854036109888*^9, 3.578854045517426*^9}, {3.6314677640985155`*^9, 
   3.631467799257447*^9}, {3.631467838834543*^9, 3.631467865673626*^9}, 
   3.631467939026672*^9}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"velStanceFootContactPoint", " ", "=", " ", 
   RowBox[{
    RowBox[{"VelCOM", "[", "stanceContactPoint", "]"}], " ", "//", 
    "Simplify"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"velSwingFootContactPoint", " ", "=", " ", 
    RowBox[{
     RowBox[{"VelCOM", "[", "swingContactPoint", "]"}], " ", "//", 
     "Simplify"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"allVelocityVariables", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"u", "[", "1", "]"}], ",", 
     RowBox[{"u", "[", "2", "]"}], ",", 
     RowBox[{"u", "[", "3", "]"}], ",", 
     RowBox[{"u", "[", "4", "]"}], ",", 
     RowBox[{"u", "[", "5", "]"}], ",", 
     RowBox[{"u", "[", "6", "]"}]}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"definitionsOfQDots", " ", "=", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{
       RowBox[{"D", "[", 
        RowBox[{
         RowBox[{"q", "[", "1", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
       RowBox[{"u", "[", "1", "]"}]}], ",", " ", 
      RowBox[{
       RowBox[{"D", "[", 
        RowBox[{
         RowBox[{"q", "[", "2", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
       RowBox[{"u", "[", "2", "]"}]}], " ", ",", " ", 
      RowBox[{
       RowBox[{"D", "[", 
        RowBox[{
         RowBox[{"q", "[", "3", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
       RowBox[{"u", "[", "3", "]"}]}], ",", " ", 
      RowBox[{
       RowBox[{"D", "[", 
        RowBox[{
         RowBox[{"q", "[", "4", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
       RowBox[{"u", "[", "4", "]"}]}], ",", " ", 
      RowBox[{
       RowBox[{"D", "[", 
        RowBox[{
         RowBox[{"q", "[", "5", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
       RowBox[{"u", "[", "5", "]"}]}], ",", " ", 
      RowBox[{
       RowBox[{"D", "[", 
        RowBox[{
         RowBox[{"q", "[", "6", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
       RowBox[{"u", "[", "6", "]"}]}]}], "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"constraintJacobianKneeFree", "=", "\[IndentingNewLine]", 
    RowBox[{"LinearTerms", "[", 
     RowBox[{
      RowBox[{"{", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"velStanceFootContactPoint", ".", 
         RowBox[{"ground", "[", "1", "]"}]}], ",", " ", "\[IndentingNewLine]", 
        RowBox[{"velStanceFootContactPoint", ".", 
         RowBox[{"ground", "[", "3", "]"}]}]}], "\[IndentingNewLine]", "}"}], 
      ",", "allVelocityVariables"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"constraintJacobianKneeLocked", "=", "\[IndentingNewLine]", 
    RowBox[{"LinearTerms", "[", 
     RowBox[{
      RowBox[{"{", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"velStanceFootContactPoint", ".", 
         RowBox[{"ground", "[", "1", "]"}]}], ",", " ", "\[IndentingNewLine]", 
        RowBox[{"velStanceFootContactPoint", ".", 
         RowBox[{"ground", "[", "3", "]"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"AngVel", "[", "swingThigh", "]"}], "-", 
           RowBox[{"AngVel", "[", "swingShank", "]"}]}], ")"}], ".", 
         RowBox[{"ground", "[", "2", "]"}]}]}], "\[IndentingNewLine]", "}"}], 
      ",", "allVelocityVariables"}], "]"}]}], " ", ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"constraintJacobianKneeFreeDot", " ", "=", 
   RowBox[{
    RowBox[{"D", "[", 
     RowBox[{"constraintJacobianKneeFree", ",", " ", "t"}], "]"}], " ", "//.",
     " ", "definitionsOfQDots"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"constraintJacobianKneeLockedDot", " ", "=", 
    RowBox[{
     RowBox[{"D", "[", 
      RowBox[{"constraintJacobianKneeLocked", ",", " ", "t"}], "]"}], " ", "//.",
      " ", "definitionsOfQDots"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"subs", " ", "=", 
   RowBox[{"{", " ", 
    RowBox[{
     RowBox[{"legMassVerticalOffset", "\[Rule]", " ", "0.5"}], ",", " ", 
     RowBox[{"legMassForwardOffset", " ", "\[Rule]", " ", "0"}], ",", 
     RowBox[{"L", " ", "\[Rule]", " ", "1"}], ",", " ", 
     RowBox[{"splayAngle", " ", "\[Rule]", " ", "0"}], ",", " ", 
     RowBox[{"pelvisWidth", " ", "\[Rule]", " ", "1"}]}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"constraintJacobianKneeFree", " ", "//.", " ", "subs"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"constraintJacobianKneeLocked", "//.", " ", "subs"}], "]"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", "*)"}]}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{
  3.4821455862195234`*^9, {3.482145719411043*^9, 3.482145755573042*^9}, {
   3.4821458888647056`*^9, 3.4821459473888593`*^9}, {3.482161086324837*^9, 
   3.482161142920496*^9}, {3.4821612055157547`*^9, 3.4821612758987923`*^9}, {
   3.482161652163415*^9, 3.4821617304162397`*^9}, {3.4821617828594837`*^9, 
   3.4821618063318305`*^9}, {3.4821618420544024`*^9, 3.482161891105307*^9}, {
   3.4821619519083867`*^9, 3.4821619549086866`*^9}, 3.482171517143815*^9, 
   3.482171932650361*^9, {3.4821725598870783`*^9, 3.482172741159204*^9}, {
   3.4821727916602535`*^9, 3.4821728405131383`*^9}, {3.482172879824069*^9, 
   3.482172996406299*^9}, {3.482180713891204*^9, 3.4821808596922045`*^9}, {
   3.483215716959081*^9, 3.4832158521220884`*^9}, {3.483220165686442*^9, 
   3.483220211922927*^9}, {3.4913035137269616`*^9, 3.4913035152291217`*^9}, {
   3.491303699133563*^9, 3.4913037035198703`*^9}, {3.4913042078750973`*^9, 
   3.491304212041088*^9}, {3.491536731001107*^9, 3.491536750278827*^9}, {
   3.4915371732970977`*^9, 3.491537193105581*^9}, {3.4915372544938526`*^9, 
   3.4915372701563745`*^9}, {3.4915373368723073`*^9, 3.491537345174245*^9}, {
   3.4915374464899297`*^9, 3.4915374611910686`*^9}, {3.491537697861384*^9, 
   3.4915377157270737`*^9}, {3.578760310236374*^9, 3.5787604220102453`*^9}, {
   3.578760461378182*^9, 3.5787604640914536`*^9}, {3.578760605459589*^9, 
   3.5787606819362354`*^9}, {3.5787609284698863`*^9, 3.578760929076947*^9}, {
   3.578762317008726*^9, 3.5787623371597414`*^9}, {3.5788461845068636`*^9, 
   3.578846191539567*^9}, {3.5788543235433283`*^9, 3.578854345287572*^9}, {
   3.578856407144503*^9, 3.578856435740139*^9}, {3.578856993450038*^9, 
   3.5788570071498213`*^9}, {3.5788572090993724`*^9, 3.578857236903963*^9}, 
   3.5788573934639177`*^9, {3.5788576998204403`*^9, 3.57885770226958*^9}, {
   3.5788584260129757`*^9, 3.5788584317733054`*^9}, {3.578858527162761*^9, 
   3.5788585288288565`*^9}, {3.578858841011712*^9, 3.5788589328889675`*^9}, {
   3.5788589731842723`*^9, 3.5788589757914214`*^9}, {3.579021039284986*^9, 
   3.579021044265484*^9}, {3.6314679021905193`*^9, 3.6314679338449936`*^9}, {
   3.6314679927538137`*^9, 3.6314681560007343`*^9}, {3.631468283238035*^9, 
   3.6314682915319223`*^9}, {3.631468379415342*^9, 3.6314683836623416`*^9}, {
   3.6314684187882633`*^9, 3.631468513630624*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", 
      RowBox[{"-", 
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "4"], "]"}]}], "0", "0"},
     {"0", "1", "0", 
      RowBox[{"Sin", "[", 
       SubscriptBox["q", "4"], "]"}], "0", "0"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.631468278271531*^9, 3.6314682925326333`*^9}, 
   3.6314684277506285`*^9, 3.631468502991041*^9, 3.6314686382311487`*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", 
      RowBox[{"-", 
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "4"], "]"}]}], "0", "0"},
     {"0", "1", "0", 
      RowBox[{"Sin", "[", 
       SubscriptBox["q", "4"], "]"}], "0", "0"},
     {"0", "0", "0", "0", "1", 
      RowBox[{"-", "1"}]}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.631468278271531*^9, 3.6314682925326333`*^9}, 
   3.6314684277506285`*^9, 3.631468502991041*^9, 3.6314686382351494`*^9}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Export expressions in Matlab format", "Section",
 CellChangeTimes->{{3.446937222052465*^9, 3.4469372272078342`*^9}, {
  3.4479795986645265`*^9, 3.4479796140455265`*^9}}],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"inGroundFrame", "[", "v_", "]"}], " ", ":=", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"v", ".", 
        RowBox[{"ground", "[", "1", "]"}]}], ",", " ", 
       RowBox[{"v", ".", 
        RowBox[{"ground", "[", "2", "]"}]}], ",", " ", 
       RowBox[{"v", ".", 
        RowBox[{"ground", "[", "3", "]"}]}]}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"expressionsToExport", " ", "=", " ", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "constraintJacobianKneeFree", ",", 
         "\"\<constraintJacobianKneeFree\>\""}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
        "constraintJacobianKneeFreeDot", ",", 
         "\"\<constraintJacobianKneeFreeDot\>\""}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
        "constraintJacobianKneeLocked", ",", 
         "\"\<constraintJacobianKneeLocked\>\""}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
        "constraintJacobianKneeLockedDot", ",", 
         "\"\<constraintJacobianKneeLockedDot\>\""}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"PE", ",", " ", "\"\<PE\>\""}], "}"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"PEGravity", ",", " ", "\"\<PEGravity\>\""}], "}"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"PESpring", ",", " ", "\"\<PESpring\>\""}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"KE", ",", " ", "\"\<KE\>\""}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"inGroundFrame", "[", "pelvisPosition", "]"}], ",", 
         "\"\<points.pelvis.position\>\""}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"pelvisR", ",", "\"\<points.pelvis.R\>\""}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"inGroundFrame", "[", "stanceLegPosition", "]"}], ",", 
         "\"\<points.stanceLeg.position\>\""}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"stanceLegR", ",", "\"\<points.stanceLeg.R\>\""}], "}"}], ",",
        "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"inGroundFrame", "[", "swingThighPosition", "]"}], ",", 
         "\"\<points.swingThigh.position\>\""}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"swingThighR", ",", "\"\<points.swingThigh.R\>\""}], "}"}], 
       ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"inGroundFrame", "[", "swingShankPosition", "]"}], ",", 
         "\"\<points.swingShank.position\>\""}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"swingShankR", ",", "\"\<points.swingShank.R\>\""}], "}"}], 
       ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"inGroundFrame", "[", "stanceFootContactPoint", "]"}], ",", 
         "\"\<points.stanceFootContactPoint\>\""}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"inGroundFrame", "[", "swingFootContactPoint", "]"}], ",", 
         "\"\<points.swingFootContactPoint\>\""}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"inGroundFrame", "[", "comVelocity", "]"}], ",", " ", 
         "\"\<points.comVelocity\>\""}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"inGroundFrame", "[", "centerOfMassPosition", "]"}], ",", 
         " ", "\"\<points.centerOfMassPosition\>\""}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"inGroundFrame", "[", "velStanceFootContactPoint", "]"}], 
         ",", " ", "\"\<points.velStanceFootContactPoint\>\""}], "}"}]}], 
      "\[IndentingNewLine]", "}"}]}], ";"}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{{3.482161321647367*^9, 3.482161356313833*^9}, {
   3.482161933457542*^9, 3.4821619485240483`*^9}, {3.4821716004951487`*^9, 
   3.482171738958994*^9}, {3.482171816804778*^9, 3.4821718333504324`*^9}, {
   3.482171872483345*^9, 3.4821719113702335`*^9}, {3.482172142339328*^9, 
   3.4821721464427385`*^9}, {3.4821734981882854`*^9, 
   3.4821734986218514`*^9}, {3.482181382900204*^9, 3.4821813951072044`*^9}, {
   3.482181602363204*^9, 3.482181604707204*^9}, {3.482181648657204*^9, 
   3.4821816517772045`*^9}, {3.482181880507204*^9, 3.482181912019204*^9}, {
   3.482182418028204*^9, 3.4821824209372044`*^9}, {3.4821850598172045`*^9, 
   3.482185088046204*^9}, {3.4821877332722044`*^9, 3.4821877377212043`*^9}, {
   3.482187988526204*^9, 3.4821879892742043`*^9}, {3.4832194606125956`*^9, 
   3.483219538704887*^9}, {3.4832198142010307`*^9, 3.48321981863741*^9}, {
   3.483298486402483*^9, 3.483298492461195*^9}, {3.490230651193972*^9, 
   3.490230680516904*^9}, {3.490291405300268*^9, 3.4902914138815565`*^9}, {
   3.490291726710726*^9, 3.490291738343052*^9}, {3.4902918081690145`*^9, 
   3.4902918110245857`*^9}, {3.4902962380450835`*^9, 
   3.4902962742567043`*^9}, {3.490300279283167*^9, 3.490300312386477*^9}, {
   3.4913052765617933`*^9, 3.4913052770424848`*^9}, {3.4913161334512653`*^9, 
   3.4913161961113663`*^9}, {3.491316239493747*^9, 3.4913162630976877`*^9}, {
   3.491317267371763*^9, 3.4913173241834545`*^9}, {3.491317748814043*^9, 
   3.491317753170307*^9}, {3.578762227373764*^9, 3.5787622332113476`*^9}, {
   3.5787622912061462`*^9, 3.578762306510677*^9}, {3.578762349940019*^9, 
   3.578762426615686*^9}, {3.578762458950919*^9, 3.578762659546977*^9}, {
   3.5787627506420856`*^9, 3.5787628165306735`*^9}, {3.578762848244845*^9, 
   3.578762854070427*^9}, {3.578763094001418*^9, 3.578763164821499*^9}, {
   3.5787632736103773`*^9, 3.578763291900206*^9}, {3.5787633410511203`*^9, 
   3.578763369402955*^9}, {3.57876347226024*^9, 3.5787635048655005`*^9}, {
   3.578763561589172*^9, 3.5787635634463577`*^9}, {3.578765984405405*^9, 
   3.578765988275626*^9}, {3.578766018876377*^9, 3.5787660271248484`*^9}, {
   3.57877030844621*^9, 3.578770309599276*^9}, {3.578770700749648*^9, 
   3.5787707126013265`*^9}, {3.578772543460771*^9, 3.578772559927771*^9}, 
   3.578772593390771*^9, {3.578772753504771*^9, 3.5787728165287714`*^9}, {
   3.578772849769771*^9, 3.578772858386771*^9}, {3.5787730255927715`*^9, 
   3.5787730333167715`*^9}, {3.5787734959317713`*^9, 3.578773522202771*^9}, {
   3.5787735973447714`*^9, 3.5787735980617714`*^9}, {3.5787746301550407`*^9, 
   3.578774631293268*^9}, {3.5787747382566566`*^9, 3.5787747393938847`*^9}, {
   3.578775500850464*^9, 3.5787755034077196`*^9}, {3.578775544172796*^9, 
   3.5787755689472733`*^9}, 3.5787756794223194`*^9, {3.578775786509162*^9, 
   3.5787757865901623`*^9}, {3.5787758713811617`*^9, 3.578775917345162*^9}, {
   3.578776171799162*^9, 3.5787761770581617`*^9}, 3.578777791535162*^9, {
   3.578839850768937*^9, 3.5788398612629366`*^9}, {3.578839898779937*^9, 
   3.578839901883937*^9}, {3.5788560078346643`*^9, 3.578856009913783*^9}, {
   3.578856500202826*^9, 3.578856510491414*^9}, {3.6314685313841977`*^9, 
   3.63146860287295*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"ExportCode", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"MM", ",", "rhs"}], "}"}], ",", " ", 
    RowBox[{"Expressions", "\[Rule]", " ", "expressionsToExport"}], ",", " ", 
    RowBox[{"OutputFile", "->", "outputFile"}]}], "]"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"ExportCode", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"MM", ",", "rhs"}], "}"}], ",", " ", 
     RowBox[{"Expressions", "\[Rule]", " ", "expressionsToExport"}], ",", " ", 
     RowBox[{
     "OutputFile", "->", 
      "\"\<C:\\\\Users\\\\hbclStudent\\\\Documents\\\\mathematicaOutput.m\>\"\
"}]}], "]"}], "*)"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{"ExportCode", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"MM", ",", "rhs"}], "}"}], ",", " ", 
     RowBox[{"Expressions", "\[Rule]", " ", "expressionsToExport"}], ",", " ", 
     RowBox[{
     "OutputFile", "->", 
      "\"\<D:\\\\myProjects\\\\SpringyWalking\\\\mathematica models from \
kishore\\\\springyWalkerWithKnees\\\\mathemticaOutput.m\>\""}]}], "]"}], 
   "*)"}]}]}], "Input",
 CellChangeTimes->{{3.447585536668432*^9, 3.447585549638657*^9}, {
   3.44759301796579*^9, 3.447593018875005*^9}, {3.482171540061106*^9, 
   3.4821715907761774`*^9}, {3.483289839649062*^9, 3.4832898504245567`*^9}, {
   3.483289935587014*^9, 3.4832899395427027`*^9}, {3.4844722124239798`*^9, 
   3.484472215151136*^9}, {3.491316324455917*^9, 3.4913163383959618`*^9}, {
   3.5787608391449547`*^9, 3.5787608420552464`*^9}, {3.5787622379098177`*^9, 
   3.5787622408041067`*^9}, {3.5787622717562017`*^9, 3.578762273159342*^9}, {
   3.578769783680195*^9, 3.578769789036502*^9}, {3.5787700002545824`*^9, 
   3.578770003491768*^9}, {3.578770609360421*^9, 3.5787706383740807`*^9}, {
   3.5787708776798983`*^9, 3.578770878098274*^9}, {3.5787721037493296`*^9, 
   3.5787721057515297`*^9}, 3.578772745741771*^9, {3.578777775412162*^9, 
   3.578777782107162*^9}, 3.5788395181229367`*^9, {3.5788583953302207`*^9, 
   3.5788583964652863`*^9}, 3.6314686263056145`*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"Opening file \\\"\"\>", 
   "\[InvisibleSpace]", \
"\<\"C:\\\\Users\\\\john\\\\workspace\\\\DynamicsKernels\\\\\
BallisticAndCompassWalker\\\\mathematicaOutputBallisticWalker.m\"\>", 
   "\[InvisibleSpace]", "\<\"\\\"\"\>"}],
  SequenceForm[
  "Opening file \"", 
   "C:\\Users\\john\\workspace\\DynamicsKernels\\BallisticAndCompassWalker\\\
mathematicaOutputBallisticWalker.m", "\""],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.5787704446169987`*^9, 3.5787706733030787`*^9, 3.5787707329694915`*^9, 
   3.5787709029476185`*^9, 3.5787720847294283`*^9, 3.578772129185873*^9, 
   3.578772581841771*^9, 3.5787726118637714`*^9, 3.578772781946771*^9, 
   3.5787728367577715`*^9, 3.578772881762771*^9, 3.5787730811987715`*^9, 
   3.578773515317771*^9, 3.578773545795771*^9, 3.578773615402771*^9, 
   3.57877465300461*^9, 3.5787747590462914`*^9, 3.578775520942473*^9, 
   3.578775589068285*^9, 3.578775772098586*^9, 3.578775806520162*^9, 
   3.5787759370641623`*^9, 3.5787761980641623`*^9, 3.578776260203162*^9, 
   3.578776470593162*^9, 3.5787766595311623`*^9, 3.578776721111162*^9, 
   3.578776780154162*^9, 3.578776839467162*^9, 3.578776908712162*^9, 
   3.578776948372162*^9, 3.5787769974391623`*^9, 3.5787771216091623`*^9, 
   3.578777809773162*^9, {3.5788397941969366`*^9, 3.5788398165979366`*^9}, 
   3.578839879489937*^9, 3.5788399170439367`*^9, 3.5788462299584084`*^9, 
   3.578849226964913*^9, 3.5788493098089128`*^9, 3.578849416569913*^9, {
   3.5788495361609125`*^9, 3.578849560945913*^9}, 3.578853902562249*^9, 
   3.578854599384105*^9, 3.5788546451917253`*^9, 3.5788565245262175`*^9, 
   3.578857253882934*^9, {3.5788574084187727`*^9, 3.5788574379034595`*^9}, 
   3.57885772797205*^9, 3.5788577762418113`*^9, 3.5788584537755637`*^9, 
   3.578858509064726*^9, 3.578858545244796*^9, 3.5791019211213026`*^9, 
   3.579102483659737*^9, 3.5791045035342903`*^9, 3.5791048069872904`*^9, 
   3.5792005544345026`*^9, {3.5792006973910427`*^9, 3.5792007270189285`*^9}, {
   3.579200773694927*^9, 3.5792007983203125`*^9}, 3.6314686382771993`*^9}],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"Current directory: \"\>", 
   "\[InvisibleSpace]", "\<\"C:\\\\Users\\\\john\\\\Documents\"\>"}],
  SequenceForm["Current directory: ", "C:\\Users\\john\\Documents"],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.5787704446169987`*^9, 3.5787706733030787`*^9, 3.5787707329694915`*^9, 
   3.5787709029476185`*^9, 3.5787720847294283`*^9, 3.578772129185873*^9, 
   3.578772581841771*^9, 3.5787726118637714`*^9, 3.578772781946771*^9, 
   3.5787728367577715`*^9, 3.578772881762771*^9, 3.5787730811987715`*^9, 
   3.578773515317771*^9, 3.578773545795771*^9, 3.578773615402771*^9, 
   3.57877465300461*^9, 3.5787747590462914`*^9, 3.578775520942473*^9, 
   3.578775589068285*^9, 3.578775772098586*^9, 3.578775806520162*^9, 
   3.5787759370641623`*^9, 3.5787761980641623`*^9, 3.578776260203162*^9, 
   3.578776470593162*^9, 3.5787766595311623`*^9, 3.578776721111162*^9, 
   3.578776780154162*^9, 3.578776839467162*^9, 3.578776908712162*^9, 
   3.578776948372162*^9, 3.5787769974391623`*^9, 3.5787771216091623`*^9, 
   3.578777809773162*^9, {3.5788397941969366`*^9, 3.5788398165979366`*^9}, 
   3.578839879489937*^9, 3.5788399170439367`*^9, 3.5788462299584084`*^9, 
   3.578849226964913*^9, 3.5788493098089128`*^9, 3.578849416569913*^9, {
   3.5788495361609125`*^9, 3.578849560945913*^9}, 3.578853902562249*^9, 
   3.578854599384105*^9, 3.5788546451917253`*^9, 3.5788565245262175`*^9, 
   3.578857253882934*^9, {3.5788574084187727`*^9, 3.5788574379034595`*^9}, 
   3.57885772797205*^9, 3.5788577762418113`*^9, 3.5788584537755637`*^9, 
   3.578858509064726*^9, 3.578858545244796*^9, 3.5791019211213026`*^9, 
   3.579102483659737*^9, 3.5791045035342903`*^9, 3.5791048069872904`*^9, 
   3.5792005544345026`*^9, {3.5792006973910427`*^9, 3.5792007270189285`*^9}, {
   3.579200773694927*^9, 3.5792007983203125`*^9}, 3.6314686382801833`*^9}],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"Closing file \\\"\"\>", 
   "\[InvisibleSpace]", \
"\<\"C:\\\\Users\\\\john\\\\workspace\\\\DynamicsKernels\\\\\
BallisticAndCompassWalker\\\\mathematicaOutputBallisticWalker.m\"\>", 
   "\[InvisibleSpace]", "\<\"\\\"\"\>"}],
  SequenceForm[
  "Closing file \"", 
   "C:\\Users\\john\\workspace\\DynamicsKernels\\BallisticAndCompassWalker\\\
mathematicaOutputBallisticWalker.m", "\""],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.5787704446169987`*^9, 3.5787706733030787`*^9, 3.5787707329694915`*^9, 
   3.5787709029476185`*^9, 3.5787720847294283`*^9, 3.578772129185873*^9, 
   3.578772581841771*^9, 3.5787726118637714`*^9, 3.578772781946771*^9, 
   3.5787728367577715`*^9, 3.578772881762771*^9, 3.5787730811987715`*^9, 
   3.578773515317771*^9, 3.578773545795771*^9, 3.578773615402771*^9, 
   3.57877465300461*^9, 3.5787747590462914`*^9, 3.578775520942473*^9, 
   3.578775589068285*^9, 3.578775772098586*^9, 3.578775806520162*^9, 
   3.5787759370641623`*^9, 3.5787761980641623`*^9, 3.578776260203162*^9, 
   3.578776470593162*^9, 3.5787766595311623`*^9, 3.578776721111162*^9, 
   3.578776780154162*^9, 3.578776839467162*^9, 3.578776908712162*^9, 
   3.578776948372162*^9, 3.5787769974391623`*^9, 3.5787771216091623`*^9, 
   3.578777809773162*^9, {3.5788397941969366`*^9, 3.5788398165979366`*^9}, 
   3.578839879489937*^9, 3.5788399170439367`*^9, 3.5788462299584084`*^9, 
   3.578849226964913*^9, 3.5788493098089128`*^9, 3.578849416569913*^9, {
   3.5788495361609125`*^9, 3.578849560945913*^9}, 3.578853902562249*^9, 
   3.578854599384105*^9, 3.5788546451917253`*^9, 3.5788565245262175`*^9, 
   3.578857253882934*^9, {3.5788574084187727`*^9, 3.5788574379034595`*^9}, 
   3.57885772797205*^9, 3.5788577762418113`*^9, 3.5788584537755637`*^9, 
   3.578858509064726*^9, 3.578858545244796*^9, 3.5791019211213026`*^9, 
   3.579102483659737*^9, 3.5791045035342903`*^9, 3.5791048069872904`*^9, 
   3.5792005544345026`*^9, {3.5792006973910427`*^9, 3.5792007270189285`*^9}, {
   3.579200773694927*^9, 3.5792007983203125`*^9}, 3.631468638331237*^9}]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1904, 943},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
PrivateNotebookOptions->{"VersionedStylesheet"->{"Default.nb"[8.] -> False}},
ShowSelection->True,
FrontEndVersion->"9.0 for Microsoft Windows (64-bit) (November 20, 2012)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[567, 22, 281, 5, 90, "Title"],
Cell[851, 29, 729, 16, 72, "Input"],
Cell[CellGroupData[{
Cell[1605, 49, 103, 1, 79, "Section"],
Cell[1711, 52, 653, 10, 31, "Input"],
Cell[CellGroupData[{
Cell[2389, 66, 312, 5, 34, "Subsubsection"],
Cell[2704, 73, 1478, 34, 72, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[4219, 112, 536, 8, 34, "Subsubsection"],
Cell[4758, 122, 7691, 142, 332, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[12486, 269, 228, 3, 34, "Subsubsection"],
Cell[12717, 274, 10385, 188, 552, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[23139, 467, 366, 6, 34, "Subsubsection"],
Cell[CellGroupData[{
Cell[23530, 477, 12117, 284, 1272, "Input"],
Cell[35650, 763, 7653, 205, 137, "Output"]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[43364, 975, 152, 2, 79, "Section"],
Cell[43519, 979, 422, 5, 30, "Text"],
Cell[43944, 986, 9603, 237, 592, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[53584, 1228, 105, 1, 49, "Section"],
Cell[53692, 1231, 1240, 25, 87, "Text"],
Cell[CellGroupData[{
Cell[54957, 1260, 7192, 154, 572, "Input"],
Cell[62152, 1416, 913, 24, 56, "Output"],
Cell[63068, 1442, 972, 26, 72, "Output"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[64089, 1474, 175, 2, 79, "Section"],
Cell[64267, 1478, 7248, 145, 412, "Input"],
Cell[CellGroupData[{
Cell[71540, 1627, 2134, 43, 132, "Input"],
Cell[CellGroupData[{
Cell[73699, 1674, 2099, 34, 23, "Print"],
Cell[75801, 1710, 1879, 28, 23, "Print"],
Cell[77683, 1740, 2097, 34, 23, "Print"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
