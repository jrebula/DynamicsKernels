function [MM, rhs] = getMassMatrixAndRHSForThreeDWalkerHipRollFromStanceFoot(this, time, state)

state = this.getWalkerStateObjectFromVector(state);
      
state.setQsUsAndTrigInCurrentFunction();
this.setWalkerParamsInCurrentFunction();
     
for i = 1 : length(this.controllers)
  this.controllers{i}.calculateControlAndSetInCurrentFunction(this, time, state);
end


MM = zeros(8,8); rhs = zeros(8,1);


% Mass Matrix
MM(1,1) = MLeg - c4*c5p6*c7*s4*s7*MLeg + MPelvis + MLeg*(c4*c4)*(c7*c7) + ...
c4*c5p6*c7*s4*s7*MLeg*(c8*c8) + (s4*s5p6*MLeg*cos(q4 - q5 - q6)*(c8*c8))/2. - ...
(s4*s5p6*MLeg*cos(q4 + q5 + q6)*(c8*c8))/2. + MLeg*(c4*c4)*(c8*c8)*(s7*s7) + ...
c4*c5p6*c7*s4*s7*MLeg*(s8*s8) + (s4*s5p6*MLeg*cos(q4 - q5 - q6)*(s8*s8))/2. - ...
(s4*s5p6*MLeg*cos(q4 + q5 + q6)*(s8*s8))/2. + MLeg*(c4*c4)*(s7*s7)*(s8*s8) - ...
(c4*c7*s7*MLeg*sin(q4 - q5 - q6))/2. + (c4*c7*s7*MLeg*(c8*c8)*sin(q4 - q5 - ...
q6))/2. + (c5p6*s4*MLeg*(c7*c7)*(c8*c8)*sin(q4 - q5 - q6))/2. + ...
(c5p6*s4*MLeg*(s7*s7)*sin(q4 - q5 - q6))/2. + (c4*c7*s7*MLeg*(s8*s8)*sin(q4 - ...
q5 - q6))/2. + (c5p6*s4*MLeg*(c7*c7)*(s8*s8)*sin(q4 - q5 - q6))/2. - ...
(c4*c7*s7*MLeg*sin(q4 + q5 + q6))/2. + (c4*c7*s7*MLeg*(c8*c8)*sin(q4 + q5 + ...
q6))/2. + (c5p6*s4*MLeg*(c7*c7)*(c8*c8)*sin(q4 + q5 + q6))/2. + ...
(c5p6*s4*MLeg*(s7*s7)*sin(q4 + q5 + q6))/2. + (c4*c7*s7*MLeg*(s8*s8)*sin(q4 + ...
q5 + q6))/2. + (c5p6*s4*MLeg*(c7*c7)*(s8*s8)*sin(q4 + q5 + q6))/2.; MM(1,2) = ...
c4*c7*s5p6*s7*MLeg + c5p6*s4*s5p6*MLeg*(c8*c8) - c4*c7*s5p6*s7*MLeg*(c8*c8) - ...
c5p6*s4*s5p6*MLeg*(c7*c7)*(c8*c8) - c5p6*s4*s5p6*MLeg*(s7*s7) + ...
c5p6*s4*s5p6*MLeg*(s8*s8) - c4*c7*s5p6*s7*MLeg*(s8*s8) - ...
c5p6*s4*s5p6*MLeg*(c7*c7)*(s8*s8); MM(1,3) = -(c4*c7*s7*MLeg*cos(q4 - q5 - ...
q6))/2. - (c4*c7*s7*MLeg*cos(q4 + q5 + q6))/2. - c4*s4*MLeg*(c7*c7) + ...
(c4*c7*s7*MLeg*cos(q4 - q5 - q6)*(c8*c8))/2. + (c4*c7*s7*MLeg*cos(q4 + q5 + ...
q6)*(c8*c8))/2. + (c5p6*s4*MLeg*cos(q4 - q5 - q6)*(c7*c7)*(c8*c8))/2. + ...
(c5p6*s4*MLeg*cos(q4 + q5 + q6)*(c7*c7)*(c8*c8))/2. + c5p6*c7*s7*MLeg*(s4*s4) ...
- c5p6*c7*s7*MLeg*(c8*c8)*(s4*s4) + (c5p6*s4*MLeg*cos(q4 - q5 - ...
q6)*(s7*s7))/2. + (c5p6*s4*MLeg*cos(q4 + q5 + q6)*(s7*s7))/2. - ...
c4*s4*MLeg*(c8*c8)*(s7*s7) + (c4*c7*s7*MLeg*cos(q4 - q5 - q6)*(s8*s8))/2. + ...
(c4*c7*s7*MLeg*cos(q4 + q5 + q6)*(s8*s8))/2. + (c5p6*s4*MLeg*cos(q4 - q5 - ...
q6)*(c7*c7)*(s8*s8))/2. + (c5p6*s4*MLeg*cos(q4 + q5 + q6)*(c7*c7)*(s8*s8))/2. ...
- c5p6*c7*s7*MLeg*(s4*s4)*(s8*s8) - c4*s4*MLeg*(s7*s7)*(s8*s8) - ...
(s4*s5p6*MLeg*(c8*c8)*sin(q4 - q5 - q6))/2. - (s4*s5p6*MLeg*(s8*s8)*sin(q4 - ...
q5 - q6))/2. + (s4*s5p6*MLeg*(c8*c8)*sin(q4 + q5 + q6))/2. + ...
(s4*s5p6*MLeg*(s8*s8)*sin(q4 + q5 + q6))/2.; MM(1,4) = c4*c5*L*MLeg - ...
c5*c5p6*c7*s4*s7*L*MLeg - c4*c5*legMassVerticalOffset*MLeg - ...
c4*c5*c6*c7*c8*legMassVerticalOffset*MLeg + ...
c4*c7*c8*s5*s6*legMassVerticalOffset*MLeg + ...
c5*c5p6*c6*c8*s4*s7*legMassVerticalOffset*MLeg - ...
c5p6*c8*s4*s5*s6*s7*legMassVerticalOffset*MLeg - ...
c5p6*c6*c7*s4*s5*s7*s8*legMassVerticalOffset*MLeg + ...
c5p6*c7*s4*s5p6*s7*s8*legMassVerticalOffset*MLeg - ...
c5*c5p6*c7*s4*s6*s7*s8*legMassVerticalOffset*MLeg + c4*c5*L*MPelvis + ...
c5p6*c7*s4*s5p6*s7*MLeg*pelvisWidth - (c4*s5p6*MPelvis*pelvisWidth)/2. - ...
c4*c5*MLeg*R + c5*c5p6*c7*s4*s7*MLeg*R - c4*c5*MPelvis*R + ...
c4*c5*L*MLeg*(c7*c7) + c4*c6*s5*s8*legMassVerticalOffset*MLeg*(c7*c7) + ...
c4*c5*s6*s8*legMassVerticalOffset*MLeg*(c7*c7) - ...
c4*s5p6*MLeg*pelvisWidth*(c7*c7) - c4*c5*MLeg*R*(c7*c7) + ...
c5*c5p6*c7*s4*s7*L*MLeg*(c8*c8) - c5p6*c7*s4*s5p6*s7*MLeg*pelvisWidth*(c8*c8) ...
- c5*c5p6*c7*s4*s7*MLeg*R*(c8*c8) + ...
c8*s4*s7*legMassVerticalOffset*MLeg*(s5p6*s5p6) + ...
c4*s5p6*s8*legMassVerticalOffset*MLeg*(s7*s7) + c4*c5*L*MLeg*(c8*c8)*(s7*s7) ...
- c4*s5p6*MLeg*pelvisWidth*(c8*c8)*(s7*s7) - c4*c5*MLeg*R*(c8*c8)*(s7*s7) + ...
c5*c5p6*c7*s4*s7*L*MLeg*(s8*s8) - c5p6*c7*s4*s5p6*s7*MLeg*pelvisWidth*(s8*s8) ...
- c5*c5p6*c7*s4*s7*MLeg*R*(s8*s8) + c4*c5*L*MLeg*(s7*s7)*(s8*s8) - ...
c4*s5p6*MLeg*pelvisWidth*(s7*s7)*(s8*s8) - c4*c5*MLeg*R*(s7*s7)*(s8*s8); ...
MM(1,5) = -(s4*s5*L*MLeg) - c4*c7*s6*s7*L*MLeg + ...
s4*s5*legMassVerticalOffset*MLeg + c7*c8*s4*s5p6*legMassVerticalOffset*MLeg - ...
s4*s5*L*MPelvis + c4*c7*s7*MLeg*pelvisWidth - ...
(c5p6*s4*MPelvis*pelvisWidth)/2. + s4*s5*MLeg*R + c4*c7*s6*s7*MLeg*R + ...
s4*s5*MPelvis*R + c5p6*s4*s8*legMassVerticalOffset*MLeg*(c7*c7) - ...
c6*s4*s5p6*L*MLeg*(c8*c8) + c4*c7*s6*s7*L*MLeg*(c8*c8) - ...
c4*c7*s7*MLeg*pelvisWidth*(c8*c8) + c6*s4*s5p6*MLeg*R*(c8*c8) - ...
c4*c7*s6*s7*MLeg*R*(c8*c8) + c5p6*s4*s6*L*MLeg*(c7*c7)*(c8*c8) - ...
c5p6*s4*MLeg*pelvisWidth*(c7*c7)*(c8*c8) - c5p6*s4*s6*MLeg*R*(c7*c7)*(c8*c8) ...
+ c5p6*s4*s6*L*MLeg*(s7*s7) + c5p6*s4*s8*legMassVerticalOffset*MLeg*(s7*s7) - ...
c5p6*s4*MLeg*pelvisWidth*(s7*s7) - c5p6*s4*s6*MLeg*R*(s7*s7) - ...
c6*s4*s5p6*L*MLeg*(s8*s8) + c4*c7*s6*s7*L*MLeg*(s8*s8) - ...
c4*c7*s7*MLeg*pelvisWidth*(s8*s8) + c6*s4*s5p6*MLeg*R*(s8*s8) - ...
c4*c7*s6*s7*MLeg*R*(s8*s8) + c5p6*s4*s6*L*MLeg*(c7*c7)*(s8*s8) - ...
c5p6*s4*MLeg*pelvisWidth*(c7*c7)*(s8*s8) - c5p6*s4*s6*MLeg*R*(c7*c7)*(s8*s8); ...
MM(1,6) = c7*c8*s4*s5p6*legMassVerticalOffset*MLeg + ...
c4*c7*s7*MLeg*pelvisWidth - (c5p6*s4*MPelvis*pelvisWidth)/2. + ...
c5p6*s4*s8*legMassVerticalOffset*MLeg*(c7*c7) - ...
c4*c7*s7*MLeg*pelvisWidth*(c8*c8) - c5p6*s4*MLeg*pelvisWidth*(c7*c7)*(c8*c8) ...
+ c5p6*s4*s8*legMassVerticalOffset*MLeg*(s7*s7) - ...
c5p6*s4*MLeg*pelvisWidth*(s7*s7) - c4*c7*s7*MLeg*pelvisWidth*(s8*s8) - ...
c5p6*s4*MLeg*pelvisWidth*(c7*c7)*(s8*s8); MM(1,7) = ...
-(c4*c7*c8*legMassVerticalOffset*MLeg) + ...
c5p6*c8*s4*s7*legMassVerticalOffset*MLeg; MM(1,8) = ...
c8*s4*s5p6*legMassVerticalOffset*MLeg + ...
c5p6*c7*s4*s8*legMassVerticalOffset*MLeg + ...
c4*s7*s8*legMassVerticalOffset*MLeg; 
MM(2,1) = c4*c7*s5p6*s7*MLeg - c4*c7*s5p6*s7*MLeg*(c8*c8) + (c5p6*MLeg*cos(q4 ...
- q5 - q6)*(c8*c8))/2. - (c5p6*MLeg*cos(q4 + q5 + q6)*(c8*c8))/2. - ...
c4*c7*s5p6*s7*MLeg*(s8*s8) + (c5p6*MLeg*cos(q4 - q5 - q6)*(s8*s8))/2. - ...
(c5p6*MLeg*cos(q4 + q5 + q6)*(s8*s8))/2. - (s5p6*MLeg*(c7*c7)*(c8*c8)*sin(q4 ...
- q5 - q6))/2. - (s5p6*MLeg*(s7*s7)*sin(q4 - q5 - q6))/2. - ...
(s5p6*MLeg*(c7*c7)*(s8*s8)*sin(q4 - q5 - q6))/2. - ...
(s5p6*MLeg*(c7*c7)*(c8*c8)*sin(q4 + q5 + q6))/2. - (s5p6*MLeg*(s7*s7)*sin(q4 ...
+ q5 + q6))/2. - (s5p6*MLeg*(c7*c7)*(s8*s8)*sin(q4 + q5 + q6))/2.; MM(2,2) = ...
MLeg + MPelvis + MLeg*(c5p6*c5p6)*(c8*c8) + MLeg*(c7*c7)*(c8*c8)*(s5p6*s5p6) ...
+ MLeg*(s5p6*s5p6)*(s7*s7) + MLeg*(c5p6*c5p6)*(s8*s8) + ...
MLeg*(c7*c7)*(s5p6*s5p6)*(s8*s8); MM(2,3) = -(c7*s4*s5p6*s7*MLeg) + ...
c7*s4*s5p6*s7*MLeg*(c8*c8) - (s5p6*MLeg*cos(q4 - q5 - q6)*(c7*c7)*(c8*c8))/2. ...
- (s5p6*MLeg*cos(q4 + q5 + q6)*(c7*c7)*(c8*c8))/2. - (s5p6*MLeg*cos(q4 - q5 - ...
q6)*(s7*s7))/2. - (s5p6*MLeg*cos(q4 + q5 + q6)*(s7*s7))/2. + ...
c7*s4*s5p6*s7*MLeg*(s8*s8) - (s5p6*MLeg*cos(q4 - q5 - q6)*(c7*c7)*(s8*s8))/2. ...
- (s5p6*MLeg*cos(q4 + q5 + q6)*(c7*c7)*(s8*s8))/2. - ...
(c5p6*MLeg*(c8*c8)*sin(q4 - q5 - q6))/2. - (c5p6*MLeg*(s8*s8)*sin(q4 - q5 - ...
q6))/2. + (c5p6*MLeg*(c8*c8)*sin(q4 + q5 + q6))/2. + ...
(c5p6*MLeg*(s8*s8)*sin(q4 + q5 + q6))/2.; MM(2,4) = c5*c7*s5p6*s7*L*MLeg + ...
c5p6*c8*s5p6*s7*legMassVerticalOffset*MLeg - ...
c5*c6*c8*s5p6*s7*legMassVerticalOffset*MLeg + ...
c8*s5*s5p6*s6*s7*legMassVerticalOffset*MLeg + ...
c6*c7*s5*s5p6*s7*s8*legMassVerticalOffset*MLeg + ...
c5*c7*s5p6*s6*s7*s8*legMassVerticalOffset*MLeg - c5*c7*s5p6*s7*MLeg*R - ...
c5*c7*s5p6*s7*L*MLeg*(c8*c8) + c5*c7*s5p6*s7*MLeg*R*(c8*c8) - ...
c7*s7*s8*legMassVerticalOffset*MLeg*(s5p6*s5p6) - ...
c7*s7*MLeg*pelvisWidth*(s5p6*s5p6) + ...
c7*s7*MLeg*pelvisWidth*(c8*c8)*(s5p6*s5p6) - c5*c7*s5p6*s7*L*MLeg*(s8*s8) + ...
c5*c7*s5p6*s7*MLeg*R*(s8*s8) + c7*s7*MLeg*pelvisWidth*(s5p6*s5p6)*(s8*s8); ...
MM(2,5) = -(c5*L*MLeg) + c5*legMassVerticalOffset*MLeg + ...
c5p6*c7*c8*legMassVerticalOffset*MLeg - c5*L*MPelvis + ...
(s5p6*MPelvis*pelvisWidth)/2. + c5*MLeg*R + c5*MPelvis*R - ...
s5p6*s8*legMassVerticalOffset*MLeg*(c7*c7) - c5p6*c6*L*MLeg*(c8*c8) + ...
c5p6*c6*MLeg*R*(c8*c8) - s5p6*s6*L*MLeg*(c7*c7)*(c8*c8) + ...
s5p6*MLeg*pelvisWidth*(c7*c7)*(c8*c8) + s5p6*s6*MLeg*R*(c7*c7)*(c8*c8) - ...
s5p6*s6*L*MLeg*(s7*s7) - s5p6*s8*legMassVerticalOffset*MLeg*(s7*s7) + ...
s5p6*MLeg*pelvisWidth*(s7*s7) + s5p6*s6*MLeg*R*(s7*s7) - ...
c5p6*c6*L*MLeg*(s8*s8) + c5p6*c6*MLeg*R*(s8*s8) - ...
s5p6*s6*L*MLeg*(c7*c7)*(s8*s8) + s5p6*MLeg*pelvisWidth*(c7*c7)*(s8*s8) + ...
s5p6*s6*MLeg*R*(c7*c7)*(s8*s8); MM(2,6) = ...
c5p6*c7*c8*legMassVerticalOffset*MLeg + (s5p6*MPelvis*pelvisWidth)/2. - ...
s5p6*s8*legMassVerticalOffset*MLeg*(c7*c7) + ...
s5p6*MLeg*pelvisWidth*(c7*c7)*(c8*c8) - ...
s5p6*s8*legMassVerticalOffset*MLeg*(s7*s7) + s5p6*MLeg*pelvisWidth*(s7*s7) + ...
s5p6*MLeg*pelvisWidth*(c7*c7)*(s8*s8); MM(2,7) = ...
-(c8*s5p6*s7*legMassVerticalOffset*MLeg); MM(2,8) = ...
c5p6*c8*legMassVerticalOffset*MLeg - c7*s5p6*s8*legMassVerticalOffset*MLeg; 
MM(3,1) = -(c5p6*c7*s7*MLeg*(c4*c4)) - c4*s4*MLeg*(c7*c7) + ...
(c4*s5p6*MLeg*cos(q4 - q5 - q6)*(c8*c8))/2. - (c4*s5p6*MLeg*cos(q4 + q5 + ...
q6)*(c8*c8))/2. + c5p6*c7*s7*MLeg*(c4*c4)*(c8*c8) - ...
c4*s4*MLeg*(c8*c8)*(s7*s7) + (c4*s5p6*MLeg*cos(q4 - q5 - q6)*(s8*s8))/2. - ...
(c4*s5p6*MLeg*cos(q4 + q5 + q6)*(s8*s8))/2. + c5p6*c7*s7*MLeg*(c4*c4)*(s8*s8) ...
- c4*s4*MLeg*(s7*s7)*(s8*s8) + (c7*s4*s7*MLeg*sin(q4 - q5 - q6))/2. - ...
(c7*s4*s7*MLeg*(c8*c8)*sin(q4 - q5 - q6))/2. + ...
(c4*c5p6*MLeg*(c7*c7)*(c8*c8)*sin(q4 - q5 - q6))/2. + ...
(c4*c5p6*MLeg*(s7*s7)*sin(q4 - q5 - q6))/2. - (c7*s4*s7*MLeg*(s8*s8)*sin(q4 - ...
q5 - q6))/2. + (c4*c5p6*MLeg*(c7*c7)*(s8*s8)*sin(q4 - q5 - q6))/2. + ...
(c7*s4*s7*MLeg*sin(q4 + q5 + q6))/2. - (c7*s4*s7*MLeg*(c8*c8)*sin(q4 + q5 + ...
q6))/2. + (c4*c5p6*MLeg*(c7*c7)*(c8*c8)*sin(q4 + q5 + q6))/2. + ...
(c4*c5p6*MLeg*(s7*s7)*sin(q4 + q5 + q6))/2. - (c7*s4*s7*MLeg*(s8*s8)*sin(q4 + ...
q5 + q6))/2. + (c4*c5p6*MLeg*(c7*c7)*(s8*s8)*sin(q4 + q5 + q6))/2.; MM(3,2) = ...
-(c7*s4*s5p6*s7*MLeg) + c4*c5p6*s5p6*MLeg*(c8*c8) + ...
c7*s4*s5p6*s7*MLeg*(c8*c8) - c4*c5p6*s5p6*MLeg*(c7*c7)*(c8*c8) - ...
c4*c5p6*s5p6*MLeg*(s7*s7) + c4*c5p6*s5p6*MLeg*(s8*s8) + ...
c7*s4*s5p6*s7*MLeg*(s8*s8) - c4*c5p6*s5p6*MLeg*(c7*c7)*(s8*s8); MM(3,3) = ...
MLeg + c4*c5p6*c7*s4*s7*MLeg + MPelvis + (c7*s4*s7*MLeg*cos(q4 - q5 - q6))/2. ...
+ (c7*s4*s7*MLeg*cos(q4 + q5 + q6))/2. - c4*c5p6*c7*s4*s7*MLeg*(c8*c8) - ...
(c7*s4*s7*MLeg*cos(q4 - q5 - q6)*(c8*c8))/2. - (c7*s4*s7*MLeg*cos(q4 + q5 + ...
q6)*(c8*c8))/2. + (c4*c5p6*MLeg*cos(q4 - q5 - q6)*(c7*c7)*(c8*c8))/2. + ...
(c4*c5p6*MLeg*cos(q4 + q5 + q6)*(c7*c7)*(c8*c8))/2. + MLeg*(c7*c7)*(s4*s4) + ...
(c4*c5p6*MLeg*cos(q4 - q5 - q6)*(s7*s7))/2. + (c4*c5p6*MLeg*cos(q4 + q5 + ...
q6)*(s7*s7))/2. + MLeg*(c8*c8)*(s4*s4)*(s7*s7) - ...
c4*c5p6*c7*s4*s7*MLeg*(s8*s8) - (c7*s4*s7*MLeg*cos(q4 - q5 - q6)*(s8*s8))/2. ...
- (c7*s4*s7*MLeg*cos(q4 + q5 + q6)*(s8*s8))/2. + (c4*c5p6*MLeg*cos(q4 - q5 - ...
q6)*(c7*c7)*(s8*s8))/2. + (c4*c5p6*MLeg*cos(q4 + q5 + q6)*(c7*c7)*(s8*s8))/2. ...
+ MLeg*(s4*s4)*(s7*s7)*(s8*s8) - (c4*s5p6*MLeg*(c8*c8)*sin(q4 - q5 - q6))/2. ...
- (c4*s5p6*MLeg*(s8*s8)*sin(q4 - q5 - q6))/2. + (c4*s5p6*MLeg*(c8*c8)*sin(q4 ...
+ q5 + q6))/2. + (c4*s5p6*MLeg*(s8*s8)*sin(q4 + q5 + q6))/2.; MM(3,4) = ...
-(c5*s4*L*MLeg) - c4*c5*c5p6*c7*s7*L*MLeg + c5*s4*legMassVerticalOffset*MLeg ...
+ c5*c6*c7*c8*s4*legMassVerticalOffset*MLeg - ...
c7*c8*s4*s5*s6*legMassVerticalOffset*MLeg + ...
c4*c5*c5p6*c6*c8*s7*legMassVerticalOffset*MLeg - ...
c4*c5p6*c8*s5*s6*s7*legMassVerticalOffset*MLeg - ...
c4*c5p6*c6*c7*s5*s7*s8*legMassVerticalOffset*MLeg + ...
c4*c5p6*c7*s5p6*s7*s8*legMassVerticalOffset*MLeg - ...
c4*c5*c5p6*c7*s6*s7*s8*legMassVerticalOffset*MLeg - c5*s4*L*MPelvis + ...
c4*c5p6*c7*s5p6*s7*MLeg*pelvisWidth + (s4*s5p6*MPelvis*pelvisWidth)/2. + ...
c5*s4*MLeg*R + c4*c5*c5p6*c7*s7*MLeg*R + c5*s4*MPelvis*R - ...
c5*s4*L*MLeg*(c7*c7) - c6*s4*s5*s8*legMassVerticalOffset*MLeg*(c7*c7) - ...
c5*s4*s6*s8*legMassVerticalOffset*MLeg*(c7*c7) + ...
s4*s5p6*MLeg*pelvisWidth*(c7*c7) + c5*s4*MLeg*R*(c7*c7) + ...
c4*c5*c5p6*c7*s7*L*MLeg*(c8*c8) - c4*c5p6*c7*s5p6*s7*MLeg*pelvisWidth*(c8*c8) ...
- c4*c5*c5p6*c7*s7*MLeg*R*(c8*c8) + ...
c4*c8*s7*legMassVerticalOffset*MLeg*(s5p6*s5p6) - ...
s4*s5p6*s8*legMassVerticalOffset*MLeg*(s7*s7) - c5*s4*L*MLeg*(c8*c8)*(s7*s7) ...
+ s4*s5p6*MLeg*pelvisWidth*(c8*c8)*(s7*s7) + c5*s4*MLeg*R*(c8*c8)*(s7*s7) + ...
c4*c5*c5p6*c7*s7*L*MLeg*(s8*s8) - c4*c5p6*c7*s5p6*s7*MLeg*pelvisWidth*(s8*s8) ...
- c4*c5*c5p6*c7*s7*MLeg*R*(s8*s8) - c5*s4*L*MLeg*(s7*s7)*(s8*s8) + ...
s4*s5p6*MLeg*pelvisWidth*(s7*s7)*(s8*s8) + c5*s4*MLeg*R*(s7*s7)*(s8*s8); ...
MM(3,5) = -(c4*s5*L*MLeg) + c7*s4*s6*s7*L*MLeg + ...
c4*s5*legMassVerticalOffset*MLeg + c4*c7*c8*s5p6*legMassVerticalOffset*MLeg - ...
c4*s5*L*MPelvis - c7*s4*s7*MLeg*pelvisWidth - ...
(c4*c5p6*MPelvis*pelvisWidth)/2. + c4*s5*MLeg*R - c7*s4*s6*s7*MLeg*R + ...
c4*s5*MPelvis*R + c4*c5p6*s8*legMassVerticalOffset*MLeg*(c7*c7) - ...
c4*c6*s5p6*L*MLeg*(c8*c8) - c7*s4*s6*s7*L*MLeg*(c8*c8) + ...
c7*s4*s7*MLeg*pelvisWidth*(c8*c8) + c4*c6*s5p6*MLeg*R*(c8*c8) + ...
c7*s4*s6*s7*MLeg*R*(c8*c8) + c4*c5p6*s6*L*MLeg*(c7*c7)*(c8*c8) - ...
c4*c5p6*MLeg*pelvisWidth*(c7*c7)*(c8*c8) - c4*c5p6*s6*MLeg*R*(c7*c7)*(c8*c8) ...
+ c4*c5p6*s6*L*MLeg*(s7*s7) + c4*c5p6*s8*legMassVerticalOffset*MLeg*(s7*s7) - ...
c4*c5p6*MLeg*pelvisWidth*(s7*s7) - c4*c5p6*s6*MLeg*R*(s7*s7) - ...
c4*c6*s5p6*L*MLeg*(s8*s8) - c7*s4*s6*s7*L*MLeg*(s8*s8) + ...
c7*s4*s7*MLeg*pelvisWidth*(s8*s8) + c4*c6*s5p6*MLeg*R*(s8*s8) + ...
c7*s4*s6*s7*MLeg*R*(s8*s8) + c4*c5p6*s6*L*MLeg*(c7*c7)*(s8*s8) - ...
c4*c5p6*MLeg*pelvisWidth*(c7*c7)*(s8*s8) - c4*c5p6*s6*MLeg*R*(c7*c7)*(s8*s8); ...
MM(3,6) = c4*c7*c8*s5p6*legMassVerticalOffset*MLeg - ...
c7*s4*s7*MLeg*pelvisWidth - (c4*c5p6*MPelvis*pelvisWidth)/2. + ...
c4*c5p6*s8*legMassVerticalOffset*MLeg*(c7*c7) + ...
c7*s4*s7*MLeg*pelvisWidth*(c8*c8) - c4*c5p6*MLeg*pelvisWidth*(c7*c7)*(c8*c8) ...
+ c4*c5p6*s8*legMassVerticalOffset*MLeg*(s7*s7) - ...
c4*c5p6*MLeg*pelvisWidth*(s7*s7) + c7*s4*s7*MLeg*pelvisWidth*(s8*s8) - ...
c4*c5p6*MLeg*pelvisWidth*(c7*c7)*(s8*s8); MM(3,7) = ...
c7*c8*s4*legMassVerticalOffset*MLeg + ...
c4*c5p6*c8*s7*legMassVerticalOffset*MLeg; MM(3,8) = ...
c4*c8*s5p6*legMassVerticalOffset*MLeg + ...
c4*c5p6*c7*s8*legMassVerticalOffset*MLeg - ...
s4*s7*s8*legMassVerticalOffset*MLeg; 
MM(4,1) = c4*c5*L*MLeg - c4*c5*legMassVerticalOffset*MLeg - ...
c4*c5*c6*c7*c8*legMassVerticalOffset*MLeg + ...
c4*c7*c8*s5*s6*legMassVerticalOffset*MLeg + c4*c5*L*MPelvis - ...
(c4*s5p6*MPelvis*pelvisWidth)/2. - c4*c5*MLeg*R - c4*c5*MPelvis*R + ...
(c8*s5p6*s7*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. - ...
(c8*s5p6*s7*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2. + ...
c4*c5*L*MLeg*(c7*c7) + c4*c6*s5*s8*legMassVerticalOffset*MLeg*(c7*c7) + ...
c4*c5*s6*s8*legMassVerticalOffset*MLeg*(c7*c7) - ...
c4*s5p6*MLeg*pelvisWidth*(c7*c7) - c4*c5*MLeg*R*(c7*c7) + ...
c4*s5p6*s8*legMassVerticalOffset*MLeg*(s7*s7) + c4*c5*L*MLeg*(c8*c8)*(s7*s7) ...
- c4*s5p6*MLeg*pelvisWidth*(c8*c8)*(s7*s7) - c4*c5*MLeg*R*(c8*c8)*(s7*s7) + ...
c4*c5*L*MLeg*(s7*s7)*(s8*s8) - c4*s5p6*MLeg*pelvisWidth*(s7*s7)*(s8*s8) - ...
c4*c5*MLeg*R*(s7*s7)*(s8*s8) - (c5*c7*s7*L*MLeg*sin(q4 - q5 - q6))/2. + ...
(c5*c6*c8*s7*legMassVerticalOffset*MLeg*sin(q4 - q5 - q6))/2. - ...
(c8*s5*s6*s7*legMassVerticalOffset*MLeg*sin(q4 - q5 - q6))/2. - ...
(c6*c7*s5*s7*s8*legMassVerticalOffset*MLeg*sin(q4 - q5 - q6))/2. + ...
(c7*s5p6*s7*s8*legMassVerticalOffset*MLeg*sin(q4 - q5 - q6))/2. - ...
(c5*c7*s6*s7*s8*legMassVerticalOffset*MLeg*sin(q4 - q5 - q6))/2. + ...
(c7*s5p6*s7*MLeg*pelvisWidth*sin(q4 - q5 - q6))/2. + (c5*c7*s7*MLeg*R*sin(q4 ...
- q5 - q6))/2. + (c5*c7*s7*L*MLeg*(c8*c8)*sin(q4 - q5 - q6))/2. - ...
(c7*s5p6*s7*MLeg*pelvisWidth*(c8*c8)*sin(q4 - q5 - q6))/2. - ...
(c5*c7*s7*MLeg*R*(c8*c8)*sin(q4 - q5 - q6))/2. + ...
(c5*c7*s7*L*MLeg*(s8*s8)*sin(q4 - q5 - q6))/2. - ...
(c7*s5p6*s7*MLeg*pelvisWidth*(s8*s8)*sin(q4 - q5 - q6))/2. - ...
(c5*c7*s7*MLeg*R*(s8*s8)*sin(q4 - q5 - q6))/2. - (c5*c7*s7*L*MLeg*sin(q4 + q5 ...
+ q6))/2. + (c5*c6*c8*s7*legMassVerticalOffset*MLeg*sin(q4 + q5 + q6))/2. - ...
(c8*s5*s6*s7*legMassVerticalOffset*MLeg*sin(q4 + q5 + q6))/2. - ...
(c6*c7*s5*s7*s8*legMassVerticalOffset*MLeg*sin(q4 + q5 + q6))/2. + ...
(c7*s5p6*s7*s8*legMassVerticalOffset*MLeg*sin(q4 + q5 + q6))/2. - ...
(c5*c7*s6*s7*s8*legMassVerticalOffset*MLeg*sin(q4 + q5 + q6))/2. + ...
(c7*s5p6*s7*MLeg*pelvisWidth*sin(q4 + q5 + q6))/2. + (c5*c7*s7*MLeg*R*sin(q4 ...
+ q5 + q6))/2. + (c5*c7*s7*L*MLeg*(c8*c8)*sin(q4 + q5 + q6))/2. - ...
(c7*s5p6*s7*MLeg*pelvisWidth*(c8*c8)*sin(q4 + q5 + q6))/2. - ...
(c5*c7*s7*MLeg*R*(c8*c8)*sin(q4 + q5 + q6))/2. + ...
(c5*c7*s7*L*MLeg*(s8*s8)*sin(q4 + q5 + q6))/2. - ...
(c7*s5p6*s7*MLeg*pelvisWidth*(s8*s8)*sin(q4 + q5 + q6))/2. - ...
(c5*c7*s7*MLeg*R*(s8*s8)*sin(q4 + q5 + q6))/2.; MM(4,2) = ...
c5*c7*s5p6*s7*L*MLeg + c5p6*c8*s5p6*s7*legMassVerticalOffset*MLeg - ...
c5*c6*c8*s5p6*s7*legMassVerticalOffset*MLeg + ...
c8*s5*s5p6*s6*s7*legMassVerticalOffset*MLeg + ...
c6*c7*s5*s5p6*s7*s8*legMassVerticalOffset*MLeg + ...
c5*c7*s5p6*s6*s7*s8*legMassVerticalOffset*MLeg - c5*c7*s5p6*s7*MLeg*R - ...
c5*c7*s5p6*s7*L*MLeg*(c8*c8) + c5*c7*s5p6*s7*MLeg*R*(c8*c8) - ...
c7*s7*s8*legMassVerticalOffset*MLeg*(s5p6*s5p6) - ...
c7*s7*MLeg*pelvisWidth*(s5p6*s5p6) + ...
c7*s7*MLeg*pelvisWidth*(c8*c8)*(s5p6*s5p6) - c5*c7*s5p6*s7*L*MLeg*(s8*s8) + ...
c5*c7*s5p6*s7*MLeg*R*(s8*s8) + c7*s7*MLeg*pelvisWidth*(s5p6*s5p6)*(s8*s8); ...
MM(4,3) = -(c5*s4*L*MLeg) + c5*s4*legMassVerticalOffset*MLeg + ...
c5*c6*c7*c8*s4*legMassVerticalOffset*MLeg - ...
c7*c8*s4*s5*s6*legMassVerticalOffset*MLeg - c5*s4*L*MPelvis + ...
(s4*s5p6*MPelvis*pelvisWidth)/2. + c5*s4*MLeg*R + c5*s4*MPelvis*R - ...
(c5*c7*s7*L*MLeg*cos(q4 - q5 - q6))/2. + ...
(c5*c6*c8*s7*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. - ...
(c8*s5*s6*s7*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. - ...
(c6*c7*s5*s7*s8*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. + ...
(c7*s5p6*s7*s8*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. - ...
(c5*c7*s6*s7*s8*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. + ...
(c7*s5p6*s7*MLeg*pelvisWidth*cos(q4 - q5 - q6))/2. + (c5*c7*s7*MLeg*R*cos(q4 ...
- q5 - q6))/2. - (c5*c7*s7*L*MLeg*cos(q4 + q5 + q6))/2. + ...
(c5*c6*c8*s7*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2. - ...
(c8*s5*s6*s7*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2. - ...
(c6*c7*s5*s7*s8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2. + ...
(c7*s5p6*s7*s8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2. - ...
(c5*c7*s6*s7*s8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2. + ...
(c7*s5p6*s7*MLeg*pelvisWidth*cos(q4 + q5 + q6))/2. + (c5*c7*s7*MLeg*R*cos(q4 ...
+ q5 + q6))/2. - c5*s4*L*MLeg*(c7*c7) - ...
c6*s4*s5*s8*legMassVerticalOffset*MLeg*(c7*c7) - ...
c5*s4*s6*s8*legMassVerticalOffset*MLeg*(c7*c7) + ...
s4*s5p6*MLeg*pelvisWidth*(c7*c7) + c5*s4*MLeg*R*(c7*c7) + ...
(c5*c7*s7*L*MLeg*cos(q4 - q5 - q6)*(c8*c8))/2. - ...
(c7*s5p6*s7*MLeg*pelvisWidth*cos(q4 - q5 - q6)*(c8*c8))/2. - ...
(c5*c7*s7*MLeg*R*cos(q4 - q5 - q6)*(c8*c8))/2. + (c5*c7*s7*L*MLeg*cos(q4 + q5 ...
+ q6)*(c8*c8))/2. - (c7*s5p6*s7*MLeg*pelvisWidth*cos(q4 + q5 + ...
q6)*(c8*c8))/2. - (c5*c7*s7*MLeg*R*cos(q4 + q5 + q6)*(c8*c8))/2. - ...
s4*s5p6*s8*legMassVerticalOffset*MLeg*(s7*s7) - c5*s4*L*MLeg*(c8*c8)*(s7*s7) ...
+ s4*s5p6*MLeg*pelvisWidth*(c8*c8)*(s7*s7) + c5*s4*MLeg*R*(c8*c8)*(s7*s7) + ...
(c5*c7*s7*L*MLeg*cos(q4 - q5 - q6)*(s8*s8))/2. - ...
(c7*s5p6*s7*MLeg*pelvisWidth*cos(q4 - q5 - q6)*(s8*s8))/2. - ...
(c5*c7*s7*MLeg*R*cos(q4 - q5 - q6)*(s8*s8))/2. + (c5*c7*s7*L*MLeg*cos(q4 + q5 ...
+ q6)*(s8*s8))/2. - (c7*s5p6*s7*MLeg*pelvisWidth*cos(q4 + q5 + ...
q6)*(s8*s8))/2. - (c5*c7*s7*MLeg*R*cos(q4 + q5 + q6)*(s8*s8))/2. - ...
c5*s4*L*MLeg*(s7*s7)*(s8*s8) + s4*s5p6*MLeg*pelvisWidth*(s7*s7)*(s8*s8) + ...
c5*s4*MLeg*R*(s7*s7)*(s8*s8) - (c8*s5p6*s7*legMassVerticalOffset*MLeg*sin(q4 ...
- q5 - q6))/2. + (c8*s5p6*s7*legMassVerticalOffset*MLeg*sin(q4 + q5 + ...
q6))/2.; MM(4,4) = 2*c5*c7*c8*s5*s6*L*legMassVerticalOffset*MLeg + ...
2*c5*c6*c7*c8*s5p6*legMassVerticalOffset*MLeg*pelvisWidth - ...
2*c7*c8*s5*s5p6*s6*legMassVerticalOffset*MLeg*pelvisWidth - ...
c5*s5p6*L*MPelvis*pelvisWidth - 2*c5*c7*c8*s5*s6*legMassVerticalOffset*MLeg*R ...
+ c5*s5p6*MPelvis*pelvisWidth*R + ILeg*(c5*c5) - ...
2*c6*c7*c8*s6*s8*ILeg*(c5*c5) + 2*c6*c7*c8*s6*s8*ILegSmall*(c5*c5) - ...
2*L*legMassVerticalOffset*MLeg*(c5*c5) - ...
2*c6*c7*c8*L*legMassVerticalOffset*MLeg*(c5*c5) - 2*L*MLeg*R*(c5*c5) + ...
2*legMassVerticalOffset*MLeg*R*(c5*c5) + ...
2*c6*c7*c8*legMassVerticalOffset*MLeg*R*(c5*c5) - 2*L*MPelvis*R*(c5*c5) + ...
IPelvisY*(c5p6*c5p6) - 2*c5*c7*c8*s5*s8*ILeg*(c6*c6) + ...
2*c5*c7*c8*s5*s8*ILegSmall*(c6*c6) + ...
2*c5*c6*s5*s8*L*legMassVerticalOffset*MLeg*(c7*c7) - ...
2*c5*s5p6*L*MLeg*pelvisWidth*(c7*c7) - ...
2*c6*s5*s5p6*s8*legMassVerticalOffset*MLeg*pelvisWidth*(c7*c7) - ...
2*c5*s5p6*s6*s8*legMassVerticalOffset*MLeg*pelvisWidth*(c7*c7) - ...
2*c5*c6*s5*s8*legMassVerticalOffset*MLeg*R*(c7*c7) + ...
2*c5*s5p6*MLeg*pelvisWidth*R*(c7*c7) + ...
2*s6*s8*L*legMassVerticalOffset*MLeg*(c5*c5)*(c7*c7) - ...
2*L*MLeg*R*(c5*c5)*(c7*c7) - ...
2*s6*s8*legMassVerticalOffset*MLeg*R*(c5*c5)*(c7*c7) - ...
2*c5*c6*s5*s6*ILeg*(c8*c8) + ILeg*(c5*c5)*(c6*c6)*(c8*c8) + ...
2*c5*c6*s5*s6*ILegSmall*(c7*c7)*(c8*c8) + 2*c6*c7*c8*s6*s8*ILeg*(s5*s5) + ...
ILegSmall*(s5*s5) - 2*c6*c7*c8*s6*s8*ILegSmall*(s5*s5) + ...
ILegSmall*(c6*c6)*(c7*c7)*(c8*c8)*(s5*s5) + IPelvisZ*(s5p6*s5p6) + ...
2*c5*c7*c8*s5*s8*ILeg*(s6*s6) - 2*c5*c7*c8*s5*s8*ILegSmall*(s6*s6) + ...
ILegSmall*(c5*c5)*(c7*c7)*(c8*c8)*(s6*s6) + ILeg*(c8*c8)*(s5*s5)*(s6*s6) + ...
2*c5*s5p6*s8*L*legMassVerticalOffset*MLeg*(s7*s7) - ...
2*c5*s5p6*s8*legMassVerticalOffset*MLeg*R*(s7*s7) - ...
2*c5*s5p6*L*MLeg*pelvisWidth*(c8*c8)*(s7*s7) + ...
2*c5*s5p6*MLeg*pelvisWidth*R*(c8*c8)*(s7*s7) - ...
2*L*MLeg*R*(c5*c5)*(c8*c8)*(s7*s7) + ILeg*(s5p6*s5p6)*(s7*s7) - ...
2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(s5p6*s5p6)*(s7*s7) - ...
2*c5*c6*s5*s6*ILegSmall*(s8*s8) + ILegSmall*(c5*c5)*(c6*c6)*(s8*s8) + ...
2*c5*c6*s5*s6*ILeg*(c7*c7)*(s8*s8) + ILeg*(c6*c6)*(c7*c7)*(s5*s5)*(s8*s8) + ...
ILeg*(c5*c5)*(c7*c7)*(s6*s6)*(s8*s8) + ILegSmall*(s5*s5)*(s6*s6)*(s8*s8) - ...
2*c5*s5p6*L*MLeg*pelvisWidth*(s7*s7)*(s8*s8) + ...
2*c5*s5p6*MLeg*pelvisWidth*R*(s7*s7)*(s8*s8) - ...
2*L*MLeg*R*(c5*c5)*(s7*s7)*(s8*s8) + MLeg*(c5*c5)*(L*L) + ...
MPelvis*(c5*c5)*(L*L) + MLeg*(c5*c5)*(c7*c7)*(L*L) + ...
MLeg*(c5*c5)*(c8*c8)*(s7*s7)*(L*L) + MLeg*(c5*c5)*(s7*s7)*(s8*s8)*(L*L) + ...
MLeg*(c5*c5)*(legMassVerticalOffset*legMassVerticalOffset) - ...
2*c6*c7*c8*s6*s8*MLeg*(c5*c5)*(legMassVerticalOffset*legMassVerticalOffset) - ...
2*c5*c7*c8*s5*s8*MLeg*(c6*c6)*(legMassVerticalOffset*legMassVerticalOffset) - ...
2*c5*c6*s5*s6*MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset) + ...
MLeg*(c5*c5)*(c6*c6)*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset) + ...
2*c6*c7*c8*s6*s8*MLeg*(s5*s5)*(legMassVerticalOffset*legMassVerticalOffset) + ...
2*c5*c7*c8*s5*s8*MLeg*(s6*s6)*(legMassVerticalOffset*legMassVerticalOffset) + ...
MLeg*(c8*c8)*(s5*s5)*(s6*s6)*(legMassVerticalOffset*legMassVerticalOffset) + ...
MLeg*(s5p6*s5p6)*(s7*s7)*(legMassVerticalOffset*legMassVerticalOffset) + ...
2*c5*c6*s5*s6*MLeg*(c7*c7)*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) + MLeg*(c6*c6)*(c7*c7)*(s5*s5)*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) + MLeg*(c5*c5)*(c7*c7)*(s6*s6)*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) + (MPelvis*(s5p6*s5p6)*(pelvisWidth*pelvisWidth))/4. + MLeg*(c7*c7)*(s5p6*s5p6)*(pelvisWidth*pelvisWidth) + MLeg*(c8*c8)*(s5p6*s5p6)*(s7*s7)*(pelvisWidth*pelvisWidth) + MLeg*(s5p6*s5p6)*(s7*s7)*(s8*s8)*(pelvisWidth*pelvisWidth) + MLeg*(c5*c5)*(R*R) + MPelvis*(c5*c5)*(R*R) + MLeg*(c5*c5)*(c7*c7)*(R*R) + MLeg*(c5*c5)*(c8*c8)*(s7*s7)*(R*R) + MLeg*(c5*c5)*(s7*s7)*(s8*s8)*(R*R); MM(4,5) = c7*s5p6*s7*ILeg + c5*c6*c8*s7*s8*ILeg - c8*s5*s6*s7*s8*ILeg - c5*c6*c8*s7*s8*ILegSmall + c8*s5*s6*s7*s8*ILegSmall - c6*c8*s5p6*s7*L*legMassVerticalOffset*MLeg + c5*c6*c8*s6*s7*L*legMassVerticalOffset*MLeg - c6*c7*s5*s6*s7*s8*L*legMassVerticalOffset*MLeg + c7*s5p6*s6*s7*s8*L*legMassVerticalOffset*MLeg + c5*c7*s7*L*MLeg*pelvisWidth + c7*s5p6*s6*s7*L*MLeg*pelvisWidth - c5*c6*c8*s7*legMassVerticalOffset*MLeg*pelvisWidth + c8*s5*s6*s7*legMassVerticalOffset*MLeg*pelvisWidth + c6*c7*s5*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth - c7*s5p6*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth + c5*c7*s6*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth + 2*c5*c7*s6*s7*L*MLeg*R + c6*c8*s5p6*s7*legMassVerticalOffset*MLeg*R - c5*c6*c8*s6*s7*legMassVerticalOffset*MLeg*R + c6*c7*s5*s6*s7*s8*legMassVerticalOffset*MLeg*R - c7*s5p6*s6*s7*s8*legMassVerticalOffset*MLeg*R - c5*c7*s7*MLeg*pelvisWidth*R - c7*s5p6*s6*s7*MLeg*pelvisWidth*R - c6*c7*s5*s7*ILegSmall*(c8*c8) - c5*c7*s6*s7*ILegSmall*(c8*c8) - c5*c7*s7*L*MLeg*pelvisWidth*(c8*c8) - c7*s5p6*s6*s7*L*MLeg*pelvisWidth*(c8*c8) - 2*c5*c7*s6*s7*L*MLeg*R*(c8*c8) + c5*c7*s7*MLeg*pelvisWidth*R*(c8*c8) + c7*s5p6*s6*s7*MLeg*pelvisWidth*R*(c8*c8) - c8*s5*s7*L*legMassVerticalOffset*MLeg*(s6*s6) - c5*c7*s7*s8*L*legMassVerticalOffset*MLeg*(s6*s6) + c8*s5*s7*legMassVerticalOffset*MLeg*R*(s6*s6) + c5*c7*s7*s8*legMassVerticalOffset*MLeg*R*(s6*s6) - c6*c7*s5*s7*ILeg*(s8*s8) - c5*c7*s6*s7*ILeg*(s8*s8) - c5*c7*s7*L*MLeg*pelvisWidth*(s8*s8) - c7*s5p6*s6*s7*L*MLeg*pelvisWidth*(s8*s8) - 2*c5*c7*s6*s7*L*MLeg*R*(s8*s8) + c5*c7*s7*MLeg*pelvisWidth*R*(s8*s8) + c7*s5p6*s6*s7*MLeg*pelvisWidth*R*(s8*s8) - c5*c7*s6*s7*MLeg*(L*L) + c5*c7*s6*s7*MLeg*(c8*c8)*(L*L) + c5*c7*s6*s7*MLeg*(s8*s8)*(L*L) + c7*s5p6*s7*MLeg*(legMassVerticalOffset*legMassVerticalOffset) + c5*c6*c8*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) - c8*s5*s6*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) - c6*c7*s5*s7*MLeg*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) - c5*c7*s6*s7*MLeg*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) - c7*s5p6*s7*MLeg*(pelvisWidth*pelvisWidth) + c7*s5p6*s7*MLeg*(c8*c8)*(pelvisWidth*pelvisWidth) + c7*s5p6*s7*MLeg*(s8*s8)*(pelvisWidth*pelvisWidth) - c5*c7*s6*s7*MLeg*(R*R) + c5*c7*s6*s7*MLeg*(c8*c8)*(R*R) + c5*c7*s6*s7*MLeg*(s8*s8)*(R*R); MM(4,6) = c7*s5p6*s7*ILeg + c5*c6*c8*s7*s8*ILeg - c8*s5*s6*s7*s8*ILeg - c5*c6*c8*s7*s8*ILegSmall + c8*s5*s6*s7*s8*ILegSmall + c5*c7*s7*L*MLeg*pelvisWidth - c5*c6*c8*s7*legMassVerticalOffset*MLeg*pelvisWidth + c8*s5*s6*s7*legMassVerticalOffset*MLeg*pelvisWidth + c6*c7*s5*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth - c7*s5p6*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth + c5*c7*s6*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth - c5*c7*s7*MLeg*pelvisWidth*R - c6*c7*s5*s7*ILegSmall*(c8*c8) - c5*c7*s6*s7*ILegSmall*(c8*c8) - c5*c7*s7*L*MLeg*pelvisWidth*(c8*c8) + c5*c7*s7*MLeg*pelvisWidth*R*(c8*c8) - c6*c7*s5*s7*ILeg*(s8*s8) - c5*c7*s6*s7*ILeg*(s8*s8) - c5*c7*s7*L*MLeg*pelvisWidth*(s8*s8) + c5*c7*s7*MLeg*pelvisWidth*R*(s8*s8) + c7*s5p6*s7*MLeg*(legMassVerticalOffset*legMassVerticalOffset) + c5*c6*c8*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) - c8*s5*s6*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) - c6*c7*s5*s7*MLeg*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) - c5*c7*s6*s7*MLeg*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) - c7*s5p6*s7*MLeg*(pelvisWidth*pelvisWidth) + c7*s5p6*s7*MLeg*(c8*c8)*(pelvisWidth*pelvisWidth) + c7*s5p6*s7*MLeg*(s8*s8)*(pelvisWidth*pelvisWidth); MM(4,7) = -(c6*c7*c8*s5*s8*ILeg) - c5*c7*c8*s6*s8*ILeg + c6*c7*c8*s5*s8*ILegSmall + c5*c7*c8*s6*s8*ILegSmall - c5*c7*c8*L*legMassVerticalOffset*MLeg + c7*c8*s5p6*legMassVerticalOffset*MLeg*pelvisWidth + c5*c7*c8*legMassVerticalOffset*MLeg*R + c5*c6*ILeg*(c8*c8) - s5*s6*ILeg*(c8*c8) + c5*c6*ILegSmall*(s8*s8) - s5*s6*ILegSmall*(s8*s8) - c6*c7*c8*s5*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) - c5*c7*c8*s6*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) + c5*c6*MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset) - s5*s6*MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset); MM(4,8) = s5p6*s7*ILeg + c5*s7*s8*L*legMassVerticalOffset*MLeg - s5p6*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth - c5*s7*s8*legMassVerticalOffset*MLeg*R + s5p6*s7*MLeg*(legMassVerticalOffset*legMassVerticalOffset); ...

MM(5,1) = -(s4*s5*L*MLeg) - c4*c7*s6*s7*L*MLeg + ...
s4*s5*legMassVerticalOffset*MLeg + c4*c7*s7*MLeg*pelvisWidth + s4*s5*MLeg*R + ...
c4*c7*s6*s7*MLeg*R + (c7*c8*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. ...
- (c6*L*MPelvis*cos(q4 - q5 - q6))/2. + (c6*MPelvis*R*cos(q4 - q5 - q6))/2. - ...
(c7*c8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2. + ...
(c6*L*MPelvis*cos(q4 + q5 + q6))/2. - (c6*MPelvis*R*cos(q4 + q5 + q6))/2. + ...
c4*c7*s6*s7*L*MLeg*(c8*c8) - c4*c7*s7*MLeg*pelvisWidth*(c8*c8) - ...
c4*c7*s6*s7*MLeg*R*(c8*c8) - (c6*L*MLeg*cos(q4 - q5 - q6)*(c8*c8))/2. + ...
(c6*MLeg*R*cos(q4 - q5 - q6)*(c8*c8))/2. + (c6*L*MLeg*cos(q4 + q5 + ...
q6)*(c8*c8))/2. - (c6*MLeg*R*cos(q4 + q5 + q6)*(c8*c8))/2. + ...
c4*c7*s6*s7*L*MLeg*(s8*s8) - c4*c7*s7*MLeg*pelvisWidth*(s8*s8) - ...
c4*c7*s6*s7*MLeg*R*(s8*s8) - (c6*L*MLeg*cos(q4 - q5 - q6)*(s8*s8))/2. + ...
(c6*MLeg*R*cos(q4 - q5 - q6)*(s8*s8))/2. + (c6*L*MLeg*cos(q4 + q5 + ...
q6)*(s8*s8))/2. - (c6*MLeg*R*cos(q4 + q5 + q6)*(s8*s8))/2. + ...
(s6*L*MPelvis*sin(q4 - q5 - q6))/2. - (MPelvis*pelvisWidth*sin(q4 - q5 - ...
q6))/4. - (s6*MPelvis*R*sin(q4 - q5 - q6))/2. + ...
(s8*legMassVerticalOffset*MLeg*(c7*c7)*sin(q4 - q5 - q6))/2. + ...
(s6*L*MLeg*(c7*c7)*(c8*c8)*sin(q4 - q5 - q6))/2. - ...
(MLeg*pelvisWidth*(c7*c7)*(c8*c8)*sin(q4 - q5 - q6))/2. - ...
(s6*MLeg*R*(c7*c7)*(c8*c8)*sin(q4 - q5 - q6))/2. + (s6*L*MLeg*(s7*s7)*sin(q4 ...
- q5 - q6))/2. + (s8*legMassVerticalOffset*MLeg*(s7*s7)*sin(q4 - q5 - q6))/2. ...
- (MLeg*pelvisWidth*(s7*s7)*sin(q4 - q5 - q6))/2. - (s6*MLeg*R*(s7*s7)*sin(q4 ...
- q5 - q6))/2. + (s6*L*MLeg*(c7*c7)*(s8*s8)*sin(q4 - q5 - q6))/2. - ...
(MLeg*pelvisWidth*(c7*c7)*(s8*s8)*sin(q4 - q5 - q6))/2. - ...
(s6*MLeg*R*(c7*c7)*(s8*s8)*sin(q4 - q5 - q6))/2. + (s6*L*MPelvis*sin(q4 + q5 ...
+ q6))/2. - (MPelvis*pelvisWidth*sin(q4 + q5 + q6))/4. - (s6*MPelvis*R*sin(q4 ...
+ q5 + q6))/2. + (s8*legMassVerticalOffset*MLeg*(c7*c7)*sin(q4 + q5 + q6))/2. ...
+ (s6*L*MLeg*(c7*c7)*(c8*c8)*sin(q4 + q5 + q6))/2. - ...
(MLeg*pelvisWidth*(c7*c7)*(c8*c8)*sin(q4 + q5 + q6))/2. - ...
(s6*MLeg*R*(c7*c7)*(c8*c8)*sin(q4 + q5 + q6))/2. + (s6*L*MLeg*(s7*s7)*sin(q4 ...
+ q5 + q6))/2. + (s8*legMassVerticalOffset*MLeg*(s7*s7)*sin(q4 + q5 + q6))/2. ...
- (MLeg*pelvisWidth*(s7*s7)*sin(q4 + q5 + q6))/2. - (s6*MLeg*R*(s7*s7)*sin(q4 ...
+ q5 + q6))/2. + (s6*L*MLeg*(c7*c7)*(s8*s8)*sin(q4 + q5 + q6))/2. - ...
(MLeg*pelvisWidth*(c7*c7)*(s8*s8)*sin(q4 + q5 + q6))/2. - ...
(s6*MLeg*R*(c7*c7)*(s8*s8)*sin(q4 + q5 + q6))/2.; MM(5,2) = -(c5*L*MLeg) + ...
c5*legMassVerticalOffset*MLeg + c5p6*c7*c8*legMassVerticalOffset*MLeg - ...
c5p6*c6*L*MPelvis - s5p6*s6*L*MPelvis + (s5p6*MPelvis*pelvisWidth)/2. + ...
c5*MLeg*R + c5p6*c6*MPelvis*R + s5p6*s6*MPelvis*R - ...
s5p6*s8*legMassVerticalOffset*MLeg*(c7*c7) - c5p6*c6*L*MLeg*(c8*c8) + ...
c5p6*c6*MLeg*R*(c8*c8) - s5p6*s6*L*MLeg*(c7*c7)*(c8*c8) + ...
s5p6*MLeg*pelvisWidth*(c7*c7)*(c8*c8) + s5p6*s6*MLeg*R*(c7*c7)*(c8*c8) - ...
s5p6*s6*L*MLeg*(s7*s7) - s5p6*s8*legMassVerticalOffset*MLeg*(s7*s7) + ...
s5p6*MLeg*pelvisWidth*(s7*s7) + s5p6*s6*MLeg*R*(s7*s7) - ...
c5p6*c6*L*MLeg*(s8*s8) + c5p6*c6*MLeg*R*(s8*s8) - ...
s5p6*s6*L*MLeg*(c7*c7)*(s8*s8) + s5p6*MLeg*pelvisWidth*(c7*c7)*(s8*s8) + ...
s5p6*s6*MLeg*R*(c7*c7)*(s8*s8); MM(5,3) = -(c4*s5*L*MLeg) + ...
c7*s4*s6*s7*L*MLeg + c4*s5*legMassVerticalOffset*MLeg - ...
c7*s4*s7*MLeg*pelvisWidth + c4*s5*MLeg*R - c7*s4*s6*s7*MLeg*R + ...
(s6*L*MPelvis*cos(q4 - q5 - q6))/2. - (MPelvis*pelvisWidth*cos(q4 - q5 - ...
q6))/4. - (s6*MPelvis*R*cos(q4 - q5 - q6))/2. + (s6*L*MPelvis*cos(q4 + q5 + ...
q6))/2. - (MPelvis*pelvisWidth*cos(q4 + q5 + q6))/4. - (s6*MPelvis*R*cos(q4 + ...
q5 + q6))/2. + (s8*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6)*(c7*c7))/2. + ...
(s8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6)*(c7*c7))/2. - ...
c7*s4*s6*s7*L*MLeg*(c8*c8) + c7*s4*s7*MLeg*pelvisWidth*(c8*c8) + ...
c7*s4*s6*s7*MLeg*R*(c8*c8) + (s6*L*MLeg*cos(q4 - q5 - q6)*(c7*c7)*(c8*c8))/2. ...
- (MLeg*pelvisWidth*cos(q4 - q5 - q6)*(c7*c7)*(c8*c8))/2. - (s6*MLeg*R*cos(q4 ...
- q5 - q6)*(c7*c7)*(c8*c8))/2. + (s6*L*MLeg*cos(q4 + q5 + ...
q6)*(c7*c7)*(c8*c8))/2. - (MLeg*pelvisWidth*cos(q4 + q5 + ...
q6)*(c7*c7)*(c8*c8))/2. - (s6*MLeg*R*cos(q4 + q5 + q6)*(c7*c7)*(c8*c8))/2. + ...
(s6*L*MLeg*cos(q4 - q5 - q6)*(s7*s7))/2. + ...
(s8*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6)*(s7*s7))/2. - ...
(MLeg*pelvisWidth*cos(q4 - q5 - q6)*(s7*s7))/2. - (s6*MLeg*R*cos(q4 - q5 - ...
q6)*(s7*s7))/2. + (s6*L*MLeg*cos(q4 + q5 + q6)*(s7*s7))/2. + ...
(s8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6)*(s7*s7))/2. - ...
(MLeg*pelvisWidth*cos(q4 + q5 + q6)*(s7*s7))/2. - (s6*MLeg*R*cos(q4 + q5 + ...
q6)*(s7*s7))/2. - c7*s4*s6*s7*L*MLeg*(s8*s8) + ...
c7*s4*s7*MLeg*pelvisWidth*(s8*s8) + c7*s4*s6*s7*MLeg*R*(s8*s8) + ...
(s6*L*MLeg*cos(q4 - q5 - q6)*(c7*c7)*(s8*s8))/2. - (MLeg*pelvisWidth*cos(q4 - ...
q5 - q6)*(c7*c7)*(s8*s8))/2. - (s6*MLeg*R*cos(q4 - q5 - ...
q6)*(c7*c7)*(s8*s8))/2. + (s6*L*MLeg*cos(q4 + q5 + q6)*(c7*c7)*(s8*s8))/2. - ...
(MLeg*pelvisWidth*cos(q4 + q5 + q6)*(c7*c7)*(s8*s8))/2. - (s6*MLeg*R*cos(q4 + ...
q5 + q6)*(c7*c7)*(s8*s8))/2. - (c7*c8*legMassVerticalOffset*MLeg*sin(q4 - q5 ...
- q6))/2. + (c6*L*MPelvis*sin(q4 - q5 - q6))/2. - (c6*MPelvis*R*sin(q4 - q5 - ...
q6))/2. + (c6*L*MLeg*(c8*c8)*sin(q4 - q5 - q6))/2. - ...
(c6*MLeg*R*(c8*c8)*sin(q4 - q5 - q6))/2. + (c6*L*MLeg*(s8*s8)*sin(q4 - q5 - ...
q6))/2. - (c6*MLeg*R*(s8*s8)*sin(q4 - q5 - q6))/2. + ...
(c7*c8*legMassVerticalOffset*MLeg*sin(q4 + q5 + q6))/2. - ...
(c6*L*MPelvis*sin(q4 + q5 + q6))/2. + (c6*MPelvis*R*sin(q4 + q5 + q6))/2. - ...
(c6*L*MLeg*(c8*c8)*sin(q4 + q5 + q6))/2. + (c6*MLeg*R*(c8*c8)*sin(q4 + q5 + ...
q6))/2. - (c6*L*MLeg*(s8*s8)*sin(q4 + q5 + q6))/2. + ...
(c6*MLeg*R*(s8*s8)*sin(q4 + q5 + q6))/2.; MM(5,4) = c7*s5p6*s7*ILeg + ...
c5*c6*c8*s7*s8*ILeg - c8*s5*s6*s7*s8*ILeg - c5*c6*c8*s7*s8*ILegSmall + ...
c8*s5*s6*s7*s8*ILegSmall - c6*c8*s5p6*s7*L*legMassVerticalOffset*MLeg + ...
c5*c6*c8*s6*s7*L*legMassVerticalOffset*MLeg - ...
c6*c7*s5*s6*s7*s8*L*legMassVerticalOffset*MLeg + ...
c7*s5p6*s6*s7*s8*L*legMassVerticalOffset*MLeg + c5*c7*s7*L*MLeg*pelvisWidth + ...
c7*s5p6*s6*s7*L*MLeg*pelvisWidth - ...
c5*c6*c8*s7*legMassVerticalOffset*MLeg*pelvisWidth + ...
c8*s5*s6*s7*legMassVerticalOffset*MLeg*pelvisWidth + ...
c6*c7*s5*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth - ...
c7*s5p6*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth + ...
c5*c7*s6*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth + ...
2*c5*c7*s6*s7*L*MLeg*R + c6*c8*s5p6*s7*legMassVerticalOffset*MLeg*R - ...
c5*c6*c8*s6*s7*legMassVerticalOffset*MLeg*R + ...
c6*c7*s5*s6*s7*s8*legMassVerticalOffset*MLeg*R - ...
c7*s5p6*s6*s7*s8*legMassVerticalOffset*MLeg*R - c5*c7*s7*MLeg*pelvisWidth*R - ...
c7*s5p6*s6*s7*MLeg*pelvisWidth*R - c6*c7*s5*s7*ILegSmall*(c8*c8) - ...
c5*c7*s6*s7*ILegSmall*(c8*c8) - c5*c7*s7*L*MLeg*pelvisWidth*(c8*c8) - ...
c7*s5p6*s6*s7*L*MLeg*pelvisWidth*(c8*c8) - 2*c5*c7*s6*s7*L*MLeg*R*(c8*c8) + ...
c5*c7*s7*MLeg*pelvisWidth*R*(c8*c8) + ...
c7*s5p6*s6*s7*MLeg*pelvisWidth*R*(c8*c8) - ...
c8*s5*s7*L*legMassVerticalOffset*MLeg*(s6*s6) - ...
c5*c7*s7*s8*L*legMassVerticalOffset*MLeg*(s6*s6) + ...
c8*s5*s7*legMassVerticalOffset*MLeg*R*(s6*s6) + ...
c5*c7*s7*s8*legMassVerticalOffset*MLeg*R*(s6*s6) - c6*c7*s5*s7*ILeg*(s8*s8) - ...
c5*c7*s6*s7*ILeg*(s8*s8) - c5*c7*s7*L*MLeg*pelvisWidth*(s8*s8) - ...
c7*s5p6*s6*s7*L*MLeg*pelvisWidth*(s8*s8) - 2*c5*c7*s6*s7*L*MLeg*R*(s8*s8) + ...
c5*c7*s7*MLeg*pelvisWidth*R*(s8*s8) + ...
c7*s5p6*s6*s7*MLeg*pelvisWidth*R*(s8*s8) - c5*c7*s6*s7*MLeg*(L*L) + ...
c5*c7*s6*s7*MLeg*(c8*c8)*(L*L) + c5*c7*s6*s7*MLeg*(s8*s8)*(L*L) + ...
c7*s5p6*s7*MLeg*(legMassVerticalOffset*legMassVerticalOffset) + ...
c5*c6*c8*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) - ...
c8*s5*s6*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) - ...
c6*c7*s5*s7*MLeg*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) - ...
c5*c7*s6*s7*MLeg*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) - ...
c7*s5p6*s7*MLeg*(pelvisWidth*pelvisWidth) + ...
c7*s5p6*s7*MLeg*(c8*c8)*(pelvisWidth*pelvisWidth) + ...
c7*s5p6*s7*MLeg*(s8*s8)*(pelvisWidth*pelvisWidth) - c5*c7*s6*s7*MLeg*(R*R) + ...
c5*c7*s6*s7*MLeg*(c8*c8)*(R*R) + c5*c7*s6*s7*MLeg*(s8*s8)*(R*R); MM(5,5) = ...
ILeg + IPelvisX - 2*L*legMassVerticalOffset*MLeg - ...
2*c6*c7*c8*L*legMassVerticalOffset*MLeg - s6*L*MPelvis*pelvisWidth - ...
2*L*MLeg*R + 2*legMassVerticalOffset*MLeg*R + ...
2*c6*c7*c8*legMassVerticalOffset*MLeg*R + s6*MPelvis*pelvisWidth*R - ...
2*L*MPelvis*R*(c6*c6) + ILeg*(c7*c7) + ...
2*s6*s8*L*legMassVerticalOffset*MLeg*(c7*c7) - ...
2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(c7*c7) - ...
2*s6*s8*legMassVerticalOffset*MLeg*R*(c7*c7) - 2*L*MLeg*R*(c6*c6)*(c8*c8) - ...
2*s6*L*MLeg*pelvisWidth*(c7*c7)*(c8*c8) + ...
2*s6*MLeg*pelvisWidth*R*(c7*c7)*(c8*c8) - 2*L*MPelvis*R*(s6*s6) - ...
2*L*MLeg*R*(c7*c7)*(c8*c8)*(s6*s6) + ...
2*s6*s8*L*legMassVerticalOffset*MLeg*(s7*s7) - ...
2*s6*L*MLeg*pelvisWidth*(s7*s7) - ...
2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(s7*s7) - ...
2*s6*s8*legMassVerticalOffset*MLeg*R*(s7*s7) + ...
2*s6*MLeg*pelvisWidth*R*(s7*s7) + ILegSmall*(c8*c8)*(s7*s7) - ...
2*L*MLeg*R*(s6*s6)*(s7*s7) - 2*L*MLeg*R*(c6*c6)*(s8*s8) - ...
2*s6*L*MLeg*pelvisWidth*(c7*c7)*(s8*s8) + ...
2*s6*MLeg*pelvisWidth*R*(c7*c7)*(s8*s8) - 2*L*MLeg*R*(c7*c7)*(s6*s6)*(s8*s8) ...
+ ILeg*(s7*s7)*(s8*s8) + MLeg*(L*L) + MPelvis*(c6*c6)*(L*L) + ...
MLeg*(c6*c6)*(c8*c8)*(L*L) + MPelvis*(s6*s6)*(L*L) + ...
MLeg*(c7*c7)*(c8*c8)*(s6*s6)*(L*L) + MLeg*(s6*s6)*(s7*s7)*(L*L) + ...
MLeg*(c6*c6)*(s8*s8)*(L*L) + MLeg*(c7*c7)*(s6*s6)*(s8*s8)*(L*L) + ...
MLeg*(legMassVerticalOffset*legMassVerticalOffset) + ...
MLeg*(c7*c7)*(legMassVerticalOffset*legMassVerticalOffset) + ...
MLeg*(s7*s7)*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) + ...
(MPelvis*(pelvisWidth*pelvisWidth))/4. + ...
MLeg*(c7*c7)*(c8*c8)*(pelvisWidth*pelvisWidth) + ...
MLeg*(s7*s7)*(pelvisWidth*pelvisWidth) + ...
MLeg*(c7*c7)*(s8*s8)*(pelvisWidth*pelvisWidth) + MLeg*(R*R) + ...
MPelvis*(c6*c6)*(R*R) + MLeg*(c6*c6)*(c8*c8)*(R*R) + MPelvis*(s6*s6)*(R*R) + ...
MLeg*(c7*c7)*(c8*c8)*(s6*s6)*(R*R) + MLeg*(s6*s6)*(s7*s7)*(R*R) + ...
MLeg*(c6*c6)*(s8*s8)*(R*R) + MLeg*(c7*c7)*(s6*s6)*(s8*s8)*(R*R); MM(5,6) = ...
IPelvisX - c6*c7*c8*L*legMassVerticalOffset*MLeg - ...
(s6*L*MPelvis*pelvisWidth)/2. + c6*c7*c8*legMassVerticalOffset*MLeg*R + ...
(s6*MPelvis*pelvisWidth*R)/2. + ILeg*(c7*c7) + ...
s6*s8*L*legMassVerticalOffset*MLeg*(c7*c7) - ...
2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(c7*c7) - ...
s6*s8*legMassVerticalOffset*MLeg*R*(c7*c7) - ...
s6*L*MLeg*pelvisWidth*(c7*c7)*(c8*c8) + s6*MLeg*pelvisWidth*R*(c7*c7)*(c8*c8) ...
+ s6*s8*L*legMassVerticalOffset*MLeg*(s7*s7) - s6*L*MLeg*pelvisWidth*(s7*s7) ...
- 2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(s7*s7) - ...
s6*s8*legMassVerticalOffset*MLeg*R*(s7*s7) + s6*MLeg*pelvisWidth*R*(s7*s7) + ...
ILegSmall*(c8*c8)*(s7*s7) - s6*L*MLeg*pelvisWidth*(c7*c7)*(s8*s8) + ...
s6*MLeg*pelvisWidth*R*(c7*c7)*(s8*s8) + ILeg*(s7*s7)*(s8*s8) + ...
MLeg*(c7*c7)*(legMassVerticalOffset*legMassVerticalOffset) + ...
MLeg*(s7*s7)*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) + ...
(MPelvis*(pelvisWidth*pelvisWidth))/4. + ...
MLeg*(c7*c7)*(c8*c8)*(pelvisWidth*pelvisWidth) + ...
MLeg*(s7*s7)*(pelvisWidth*pelvisWidth) + ...
MLeg*(c7*c7)*(s8*s8)*(pelvisWidth*pelvisWidth); MM(5,7) = c8*s7*s8*ILeg - ...
c8*s7*s8*ILegSmall + c8*s6*s7*L*legMassVerticalOffset*MLeg - ...
c8*s7*legMassVerticalOffset*MLeg*pelvisWidth - ...
c8*s6*s7*legMassVerticalOffset*MLeg*R + ...
c8*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset); MM(5,8) = ...
c7*ILeg - c6*c8*L*legMassVerticalOffset*MLeg + ...
c7*s6*s8*L*legMassVerticalOffset*MLeg - ...
c7*s8*legMassVerticalOffset*MLeg*pelvisWidth + ...
c6*c8*legMassVerticalOffset*MLeg*R - c7*s6*s8*legMassVerticalOffset*MLeg*R + ...
c7*MLeg*(legMassVerticalOffset*legMassVerticalOffset); 
MM(6,1) = c4*c7*s7*MLeg*pelvisWidth + ...
(c7*c8*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. - ...
(c7*c8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2. - ...
c4*c7*s7*MLeg*pelvisWidth*(c8*c8) - c4*c7*s7*MLeg*pelvisWidth*(s8*s8) - ...
(MPelvis*pelvisWidth*sin(q4 - q5 - q6))/4. + ...
(s8*legMassVerticalOffset*MLeg*(c7*c7)*sin(q4 - q5 - q6))/2. - ...
(MLeg*pelvisWidth*(c7*c7)*(c8*c8)*sin(q4 - q5 - q6))/2. + ...
(s8*legMassVerticalOffset*MLeg*(s7*s7)*sin(q4 - q5 - q6))/2. - ...
(MLeg*pelvisWidth*(s7*s7)*sin(q4 - q5 - q6))/2. - ...
(MLeg*pelvisWidth*(c7*c7)*(s8*s8)*sin(q4 - q5 - q6))/2. - ...
(MPelvis*pelvisWidth*sin(q4 + q5 + q6))/4. + ...
(s8*legMassVerticalOffset*MLeg*(c7*c7)*sin(q4 + q5 + q6))/2. - ...
(MLeg*pelvisWidth*(c7*c7)*(c8*c8)*sin(q4 + q5 + q6))/2. + ...
(s8*legMassVerticalOffset*MLeg*(s7*s7)*sin(q4 + q5 + q6))/2. - ...
(MLeg*pelvisWidth*(s7*s7)*sin(q4 + q5 + q6))/2. - ...
(MLeg*pelvisWidth*(c7*c7)*(s8*s8)*sin(q4 + q5 + q6))/2.; MM(6,2) = ...
c5p6*c7*c8*legMassVerticalOffset*MLeg + (s5p6*MPelvis*pelvisWidth)/2. - ...
s5p6*s8*legMassVerticalOffset*MLeg*(c7*c7) + ...
s5p6*MLeg*pelvisWidth*(c7*c7)*(c8*c8) - ...
s5p6*s8*legMassVerticalOffset*MLeg*(s7*s7) + s5p6*MLeg*pelvisWidth*(s7*s7) + ...
s5p6*MLeg*pelvisWidth*(c7*c7)*(s8*s8); MM(6,3) = -(c7*s4*s7*MLeg*pelvisWidth) ...
- (MPelvis*pelvisWidth*cos(q4 - q5 - q6))/4. - (MPelvis*pelvisWidth*cos(q4 + ...
q5 + q6))/4. + (s8*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6)*(c7*c7))/2. + ...
(s8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6)*(c7*c7))/2. + ...
c7*s4*s7*MLeg*pelvisWidth*(c8*c8) - (MLeg*pelvisWidth*cos(q4 - q5 - ...
q6)*(c7*c7)*(c8*c8))/2. - (MLeg*pelvisWidth*cos(q4 + q5 + ...
q6)*(c7*c7)*(c8*c8))/2. + (s8*legMassVerticalOffset*MLeg*cos(q4 - q5 - ...
q6)*(s7*s7))/2. - (MLeg*pelvisWidth*cos(q4 - q5 - q6)*(s7*s7))/2. + ...
(s8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6)*(s7*s7))/2. - ...
(MLeg*pelvisWidth*cos(q4 + q5 + q6)*(s7*s7))/2. + ...
c7*s4*s7*MLeg*pelvisWidth*(s8*s8) - (MLeg*pelvisWidth*cos(q4 - q5 - ...
q6)*(c7*c7)*(s8*s8))/2. - (MLeg*pelvisWidth*cos(q4 + q5 + ...
q6)*(c7*c7)*(s8*s8))/2. - (c7*c8*legMassVerticalOffset*MLeg*sin(q4 - q5 - ...
q6))/2. + (c7*c8*legMassVerticalOffset*MLeg*sin(q4 + q5 + q6))/2.; MM(6,4) = ...
c7*s5p6*s7*ILeg + c5*c6*c8*s7*s8*ILeg - c8*s5*s6*s7*s8*ILeg - ...
c5*c6*c8*s7*s8*ILegSmall + c8*s5*s6*s7*s8*ILegSmall + ...
c5*c7*s7*L*MLeg*pelvisWidth - ...
c5*c6*c8*s7*legMassVerticalOffset*MLeg*pelvisWidth + ...
c8*s5*s6*s7*legMassVerticalOffset*MLeg*pelvisWidth + ...
c6*c7*s5*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth - ...
c7*s5p6*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth + ...
c5*c7*s6*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth - ...
c5*c7*s7*MLeg*pelvisWidth*R - c6*c7*s5*s7*ILegSmall*(c8*c8) - ...
c5*c7*s6*s7*ILegSmall*(c8*c8) - c5*c7*s7*L*MLeg*pelvisWidth*(c8*c8) + ...
c5*c7*s7*MLeg*pelvisWidth*R*(c8*c8) - c6*c7*s5*s7*ILeg*(s8*s8) - ...
c5*c7*s6*s7*ILeg*(s8*s8) - c5*c7*s7*L*MLeg*pelvisWidth*(s8*s8) + ...
c5*c7*s7*MLeg*pelvisWidth*R*(s8*s8) + ...
c7*s5p6*s7*MLeg*(legMassVerticalOffset*legMassVerticalOffset) + ...
c5*c6*c8*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) - ...
c8*s5*s6*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) - ...
c6*c7*s5*s7*MLeg*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) - ...
c5*c7*s6*s7*MLeg*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) - ...
c7*s5p6*s7*MLeg*(pelvisWidth*pelvisWidth) + ...
c7*s5p6*s7*MLeg*(c8*c8)*(pelvisWidth*pelvisWidth) + ...
c7*s5p6*s7*MLeg*(s8*s8)*(pelvisWidth*pelvisWidth); MM(6,5) = IPelvisX - ...
c6*c7*c8*L*legMassVerticalOffset*MLeg - (s6*L*MPelvis*pelvisWidth)/2. + ...
c6*c7*c8*legMassVerticalOffset*MLeg*R + (s6*MPelvis*pelvisWidth*R)/2. + ...
ILeg*(c7*c7) + s6*s8*L*legMassVerticalOffset*MLeg*(c7*c7) - ...
2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(c7*c7) - ...
s6*s8*legMassVerticalOffset*MLeg*R*(c7*c7) - ...
s6*L*MLeg*pelvisWidth*(c7*c7)*(c8*c8) + s6*MLeg*pelvisWidth*R*(c7*c7)*(c8*c8) ...
+ s6*s8*L*legMassVerticalOffset*MLeg*(s7*s7) - s6*L*MLeg*pelvisWidth*(s7*s7) ...
- 2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(s7*s7) - ...
s6*s8*legMassVerticalOffset*MLeg*R*(s7*s7) + s6*MLeg*pelvisWidth*R*(s7*s7) + ...
ILegSmall*(c8*c8)*(s7*s7) - s6*L*MLeg*pelvisWidth*(c7*c7)*(s8*s8) + ...
s6*MLeg*pelvisWidth*R*(c7*c7)*(s8*s8) + ILeg*(s7*s7)*(s8*s8) + ...
MLeg*(c7*c7)*(legMassVerticalOffset*legMassVerticalOffset) + ...
MLeg*(s7*s7)*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) + ...
(MPelvis*(pelvisWidth*pelvisWidth))/4. + ...
MLeg*(c7*c7)*(c8*c8)*(pelvisWidth*pelvisWidth) + ...
MLeg*(s7*s7)*(pelvisWidth*pelvisWidth) + ...
MLeg*(c7*c7)*(s8*s8)*(pelvisWidth*pelvisWidth); MM(6,6) = IPelvisX + ...
ILeg*(c7*c7) - 2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(c7*c7) - ...
2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(s7*s7) + ...
ILegSmall*(c8*c8)*(s7*s7) + ILeg*(s7*s7)*(s8*s8) + ...
MLeg*(c7*c7)*(legMassVerticalOffset*legMassVerticalOffset) + ...
MLeg*(s7*s7)*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset) + ...
(MPelvis*(pelvisWidth*pelvisWidth))/4. + ...
MLeg*(c7*c7)*(c8*c8)*(pelvisWidth*pelvisWidth) + ...
MLeg*(s7*s7)*(pelvisWidth*pelvisWidth) + ...
MLeg*(c7*c7)*(s8*s8)*(pelvisWidth*pelvisWidth); MM(6,7) = c8*s7*s8*ILeg - ...
c8*s7*s8*ILegSmall - c8*s7*legMassVerticalOffset*MLeg*pelvisWidth + ...
c8*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset); MM(6,8) = ...
c7*ILeg - c7*s8*legMassVerticalOffset*MLeg*pelvisWidth + ...
c7*MLeg*(legMassVerticalOffset*legMassVerticalOffset); 
MM(7,1) = -(c4*c7*c8*legMassVerticalOffset*MLeg) + ...
(c8*s7*legMassVerticalOffset*MLeg*sin(q4 - q5 - q6))/2. + ...
(c8*s7*legMassVerticalOffset*MLeg*sin(q4 + q5 + q6))/2.; MM(7,2) = ...
-(c8*s5p6*s7*legMassVerticalOffset*MLeg); MM(7,3) = ...
c7*c8*s4*legMassVerticalOffset*MLeg + ...
(c8*s7*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. + ...
(c8*s7*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2.; MM(7,4) = ...
-(c6*c7*c8*s5*s8*ILeg) - c5*c7*c8*s6*s8*ILeg + c6*c7*c8*s5*s8*ILegSmall + ...
c5*c7*c8*s6*s8*ILegSmall - c5*c7*c8*L*legMassVerticalOffset*MLeg + ...
c7*c8*s5p6*legMassVerticalOffset*MLeg*pelvisWidth + ...
c5*c7*c8*legMassVerticalOffset*MLeg*R + c5*c6*ILeg*(c8*c8) - ...
s5*s6*ILeg*(c8*c8) + c5*c6*ILegSmall*(s8*s8) - s5*s6*ILegSmall*(s8*s8) - ...
c6*c7*c8*s5*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) - ...
c5*c7*c8*s6*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset) + ...
c5*c6*MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset) - ...
s5*s6*MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset); MM(7,5) = ...
c8*s7*s8*ILeg - c8*s7*s8*ILegSmall + c8*s6*s7*L*legMassVerticalOffset*MLeg - ...
c8*s7*legMassVerticalOffset*MLeg*pelvisWidth - ...
c8*s6*s7*legMassVerticalOffset*MLeg*R + ...
c8*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset); MM(7,6) = ...
c8*s7*s8*ILeg - c8*s7*s8*ILegSmall - ...
c8*s7*legMassVerticalOffset*MLeg*pelvisWidth + ...
c8*s7*s8*MLeg*(legMassVerticalOffset*legMassVerticalOffset); MM(7,7) = ...
ILeg*(c8*c8) + ILegSmall*(s8*s8) + ...
MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset); MM(7,8) = 0; 
MM(8,1) = c4*s7*s8*legMassVerticalOffset*MLeg + ...
(c8*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. - ...
(c8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2. + ...
(c7*s8*legMassVerticalOffset*MLeg*sin(q4 - q5 - q6))/2. + ...
(c7*s8*legMassVerticalOffset*MLeg*sin(q4 + q5 + q6))/2.; MM(8,2) = ...
c5p6*c8*legMassVerticalOffset*MLeg - c7*s5p6*s8*legMassVerticalOffset*MLeg; ...
MM(8,3) = -(s4*s7*s8*legMassVerticalOffset*MLeg) + ...
(c7*s8*legMassVerticalOffset*MLeg*cos(q4 - q5 - q6))/2. + ...
(c7*s8*legMassVerticalOffset*MLeg*cos(q4 + q5 + q6))/2. - ...
(c8*legMassVerticalOffset*MLeg*sin(q4 - q5 - q6))/2. + ...
(c8*legMassVerticalOffset*MLeg*sin(q4 + q5 + q6))/2.; MM(8,4) = s5p6*s7*ILeg ...
+ c5*s7*s8*L*legMassVerticalOffset*MLeg - ...
s5p6*s7*s8*legMassVerticalOffset*MLeg*pelvisWidth - ...
c5*s7*s8*legMassVerticalOffset*MLeg*R + ...
s5p6*s7*MLeg*(legMassVerticalOffset*legMassVerticalOffset); MM(8,5) = c7*ILeg ...
- c6*c8*L*legMassVerticalOffset*MLeg + c7*s6*s8*L*legMassVerticalOffset*MLeg ...
- c7*s8*legMassVerticalOffset*MLeg*pelvisWidth + ...
c6*c8*legMassVerticalOffset*MLeg*R - c7*s6*s8*legMassVerticalOffset*MLeg*R + ...
c7*MLeg*(legMassVerticalOffset*legMassVerticalOffset); MM(8,6) = c7*ILeg - ...
c7*s8*legMassVerticalOffset*MLeg*pelvisWidth + ...
c7*MLeg*(legMassVerticalOffset*legMassVerticalOffset); MM(8,7) = 0; MM(8,8) = ...
ILeg + MLeg*(legMassVerticalOffset*legMassVerticalOffset); 

% righthand side terms
rhs(1) = -2*(c4*c7 - c5p6*s4*s7)*s8*u7*u8*legMassVerticalOffset*MLeg + ...
(-((-(c7*s4) - c4*c5p6*s7)*(c4*c7 - c5p6*s4*s7)*g*MLeg) - (c5p6*c7*c8*s4 + ...
c4*c8*s7 - s4*s5p6*s8)*(-(c8*s4*s7) + c4*(s5*(-(c7*c8*s6) - c6*s8) + ...
c5*(c6*c7*c8 - s6*s8)))*g*MLeg - (c8*s4*s5p6 + c5p6*c7*s4*s8 + ...
c4*s7*s8)*(-(s4*s7*s8) + c4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - ...
c7*s6*s8)))*g*MLeg)*cos(groundAngle) + u4*(u8*(-(c5p6*(c4*c7 - ...
c5p6*s4*s7)*s8*legMassVerticalOffset*MLeg) - (c4*c7 - ...
c5p6*s4*s7)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg + s5p6*(-(c7*c8*(c4*c7 - ...
c5p6*s4*s7)*legMassVerticalOffset*MLeg) - 2*s7*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg)) + u7*(-(c7*s5p6*(c4*s7*s8 + ...
s4*(c8*s5p6 + c5p6*c7*s8))*legMassVerticalOffset*MLeg) - s8*(c4*s7*s8 + ...
s4*(c8*s5p6 + c5p6*c7*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + c8*(-((c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) - 2*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg)) + u6*(-(c5*(c4*c7 - ...
c5p6*s4*s7)*(c8*s6 + c6*c7*s8)*legMassVerticalOffset*MLeg) - s5*(c4*c7 - ...
c5p6*s4*s7)*(c6*c8 - c7*s6*s8)*legMassVerticalOffset*MLeg + ...
c7*(-2*s5p6*s7*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg - (c4*c7 - c5p6*s4*s7)*(c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - s5*s8))*legMassVerticalOffset*MLeg) + ...
s7*s8*(-((c4*s7*s8 + s4*(c8*s5p6 + c5p6*c7*s8))*(c6*(c7*c8*s5 + c5*s8) + ...
s6*(c5*c7*c8 - s5*s8))*legMassVerticalOffset*MLeg) - 2*(c8*(c5p6*c7*s4 + ...
c4*s7) - s4*s5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg) + c5p6*(2*c7*(c4*c7 - ...
c5p6*s4*s7)*MLeg*pelvisWidth + c4*MPelvis*pelvisWidth + s7*(-((c4*s7*s8 + ...
s4*(c8*s5p6 + c5p6*c7*s8))*legMassVerticalOffset*MLeg) + 2*s8*(c4*s7*s8 + ...
s4*(c8*s5p6 + c5p6*c7*s8))*MLeg*pelvisWidth)) + c8*(s7*((c4*s7*s8 + ...
s4*(c8*s5p6 + c5p6*c7*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + 2*c5p6*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*MLeg*pelvisWidth) + s5p6*(c4*c7 - ...
c5p6*s4*s7)*legMassVerticalOffset*MLeg*(s7*s7))) + u5*(-((c4*c7 - ...
c5p6*s4*s7)*(c6*(c8*s5 + c5*c7*s8) + s6*(c5*c8 - ...
c7*s5*s8))*legMassVerticalOffset*MLeg) + s7*(c5p6*(-((c4*s7*s8 + s4*(c8*s5p6 ...
+ c5p6*c7*s8))*legMassVerticalOffset*MLeg) + s8*(c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*MLeg*pelvisWidth) + s8*(-((c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) - 2*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + (c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*MLeg*(c5p6*pelvisWidth + 2*s5*(L - R)))) + ...
c7*(-2*s5p6*s7*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg - (c4*c7 - c5p6*s4*s7)*(c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - s5*s8))*legMassVerticalOffset*MLeg + c5p6*(c4*c7 - ...
c5p6*s4*s7)*MLeg*pelvisWidth + (c4*c7 - c5p6*s4*s7)*MLeg*(c5p6*pelvisWidth + ...
2*s5*(L - R))) + c4*(MPelvis*(c5p6*pelvisWidth + 2*s5*(L - R)) + 2*s5*MLeg*(L ...
- legMassVerticalOffset - R)) + c8*(s7*((c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + c5p6*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*MLeg*pelvisWidth + (c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*MLeg*(c5p6*pelvisWidth + 2*s5*(L - R))) + s5p6*(c4*c7 - ...
c5p6*s4*s7)*legMassVerticalOffset*MLeg*(s7*s7)))) + u6*(u8*(2*c8*s7*(c4*c7 - ...
c5p6*s4*s7)*legMassVerticalOffset*MLeg - 2*c7*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg) + s7*u7*(-2*c8*s8*(c8*(c5p6*c7*s4 + ...
c4*s7) - s4*s5p6*s8)*legMassVerticalOffset*MLeg + (c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*legMassVerticalOffset*MLeg + (c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*legMassVerticalOffset*MLeg*(c8*c8) - (c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*legMassVerticalOffset*MLeg*(s8*s8))) + u5*(u8*(2*c8*s7*(c4*c7 - ...
c5p6*s4*s7)*legMassVerticalOffset*MLeg - 2*c7*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg) + s7*u7*(-2*c8*s8*(c8*(c5p6*c7*s4 + ...
c4*s7) - s4*s5p6*s8)*legMassVerticalOffset*MLeg + (c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*legMassVerticalOffset*MLeg + (c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*legMassVerticalOffset*MLeg*(c8*c8) - (c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*legMassVerticalOffset*MLeg*(s8*s8)) + u6*(2*s8*(c8*(c5p6*c7*s4 + ...
c4*s7) - s4*s5p6*s8)*MLeg*pelvisWidth - s4*s5p6*MPelvis*pelvisWidth - ...
2*(c8*(c5p6*c7*s4 + c4*s7) - s4*s5p6*s8)*legMassVerticalOffset*MLeg*(c7*c7) + ...
c8*(2*c7*s7*(c4*c7 - c5p6*s4*s7)*legMassVerticalOffset*MLeg - 2*(c4*s7*s8 + ...
s4*(c8*s5p6 + c5p6*c7*s8))*MLeg*pelvisWidth + 2*s8*(c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*legMassVerticalOffset*MLeg*(s7*s7)) - 2*(c8*(c5p6*c7*s4 + c4*s7) ...
- s4*s5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)*(s8*s8))) + ...
(s8*(((c8*(c5p6*c7*s4 + c4*s7) - s4*s5p6*s8)*MLeg*pelvisWidth)/2. + ...
((c8*(c5p6*c7*s4 + c4*s7) - s4*s5p6*s8)*MLeg*(pelvisWidth - 2*s6*(L - ...
R)))/2.) + c6*(-(s7*(c4*c7 - c5p6*s4*s7)*MLeg*(L - R)) + c7*s8*(c4*s7*s8 + ...
s4*(c8*s5p6 + c5p6*c7*s8))*MLeg*(L - R) + c5p6*s4*MPelvis*(L - R)) + ...
s4*(-(s5p6*MPelvis*(pelvisWidth - 2*s6*(L - R)))/2. - c5*MLeg*(-L + ...
legMassVerticalOffset + R)) - (c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg*(c7*c7) + c8*(-((c4*s7*s8 + ...
s4*(c8*s5p6 + c5p6*c7*s8))*MLeg*pelvisWidth)/2. - ((c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*MLeg*(pelvisWidth - 2*s6*(L - R)))/2. + c7*(s7*(c4*c7 - ...
c5p6*s4*s7)*legMassVerticalOffset*MLeg + c6*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*MLeg*(L - R)) + s8*(c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*legMassVerticalOffset*MLeg*(s7*s7)) - (c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)*(s8*s8))*(u5*u5) + ...
(s8*(c8*(c5p6*c7*s4 + c4*s7) - s4*s5p6*s8)*MLeg*pelvisWidth - ...
(s4*s5p6*MPelvis*pelvisWidth)/2. - (c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg*(c7*c7) + c8*(c7*s7*(c4*c7 - ...
c5p6*s4*s7)*legMassVerticalOffset*MLeg - (c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*MLeg*pelvisWidth + s8*(c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*legMassVerticalOffset*MLeg*(s7*s7)) - (c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)*(s8*s8))*(u6*u6) + ...
(-(c8*s8*(c4*s7*s8 + s4*(c8*s5p6 + c5p6*c7*s8))*legMassVerticalOffset*MLeg) - ...
(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg*(c8*c8))*(u7*u7) - (c8*(c5p6*c7*s4 + ...
c4*s7) - s4*s5p6*s8)*legMassVerticalOffset*MLeg*(u8*u8) + ...
u4*u4*(-(s5p6*s7*(c4*c7 - c5p6*s4*s7)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) - (c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset*MLeg + ...
c5p6*(s7*((s5p6*(c4*c7 - c5p6*s4*s7)*MLeg*pelvisWidth)/2. + ((c4*c7 - ...
c5p6*s4*s7)*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2.) + ...
c7*(s5p6*(-(c8*(c8*(c5p6*c7*s4 + c4*s7) - s4*s5p6*s8)*MLeg*pelvisWidth)/2. - ...
(s8*(c4*s7*s8 + s4*(c8*s5p6 + c5p6*c7*s8))*MLeg*pelvisWidth)/2.) - ...
(s8*(c4*s7*s8 + s4*(c8*s5p6 + c5p6*c7*s8))*MLeg*(s5p6*pelvisWidth - 2*c5*(L - ...
R)))/2.)) + s8*((s5p6*(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. + ((c8*(c5p6*c7*s4 + ...
c4*s7) - s4*s5p6*s8)*MLeg*pelvisWidth*(s5p6*s5p6))/2.) + ...
c8*(-(c5p6*c7*(c8*(c5p6*c7*s4 + c4*s7) - s4*s5p6*s8)*MLeg*(s5p6*pelvisWidth - ...
2*c5*(L - R)))/2. - (s5p6*(c4*s7*s8 + s4*(c8*s5p6 + ...
c5p6*c7*s8))*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. - ((c4*s7*s8 + ...
s4*(c8*s5p6 + c5p6*c7*s8))*MLeg*pelvisWidth*(s5p6*s5p6))/2.) - ...
(c8*(c5p6*c7*s4 + c4*s7) - ...
s4*s5p6*s8)*legMassVerticalOffset*MLeg*(s5p6*s5p6)*(s7*s7) - (c8*(c5p6*c7*s4 ...
+ c4*s7) - s4*s5p6*s8)*legMassVerticalOffset*MLeg*((-(s5*(c8*s6 + c6*c7*s8)) ...
+ c5*(c6*c8 - c7*s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))) ...
+ s4*(-(MPelvis*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. + MLeg*(L - ...
legMassVerticalOffset - R)*power(c5,3) + (s5*MLeg*(L - legMassVerticalOffset ...
- R)*sin(2*q5))/2.)) + (c5p6*c7*c8*s4 + c4*c8*s7 - s4*s5p6*s8)*(c4*c8*s7 + ...
s4*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - ...
s6*s8)))*g*MLeg*sin(groundAngle) + (c8*s4*s5p6 + c5p6*c7*s4*s8 + ...
c4*s7*s8)*(c4*s7*s8 + s4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - ...
c7*s6*s8)))*g*MLeg*sin(groundAngle) + (g*MLeg*(c4*c4) + ...
g*MLeg*(c5*c5)*(s4*s4))*sin(groundAngle) + (g*MPelvis*(c4*c4) + ...
g*MPelvis*(c5p6*c5p6)*(s4*s4))*sin(groundAngle) + ...
g*MLeg*(s4*s4)*(s5*s5)*sin(groundAngle) + ...
g*MPelvis*(s4*s4)*(s5p6*s5p6)*sin(groundAngle) + g*MLeg*((c4*c7 - ...
c5p6*s4*s7)*(c4*c7 - c5p6*s4*s7))*sin(groundAngle); 
rhs(2) = lateralPelvisForce - 2*s5p6*s7*s8*u7*u8*legMassVerticalOffset*MLeg + ...
(-(s5p6*s7*(-(c7*s4) - c4*c5p6*s7)*g*MLeg) - (-(c7*c8*s5p6) - ...
c5p6*s8)*(-(c8*s4*s7) + c4*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - ...
s6*s8)))*g*MLeg - (c5p6*c8 - c7*s5p6*s8)*(-(s4*s7*s8) + c4*(c5*(c8*s6 + ...
c6*c7*s8) + s5*(c6*c8 - c7*s6*s8)))*g*MLeg)*cos(groundAngle) + ...
u6*(u8*(-2*c7*(-(c7*c8*s5p6) - c5p6*s8)*legMassVerticalOffset*MLeg + ...
2*c8*s5p6*legMassVerticalOffset*MLeg*(s7*s7)) + ...
s7*u7*(-2*c8*s8*(-(c7*c8*s5p6) - c5p6*s8)*legMassVerticalOffset*MLeg + ...
(c5p6*c8 - c7*s5p6*s8)*legMassVerticalOffset*MLeg + (c5p6*c8 - ...
c7*s5p6*s8)*legMassVerticalOffset*MLeg*(c8*c8) - (c5p6*c8 - ...
c7*s5p6*s8)*legMassVerticalOffset*MLeg*(s8*s8))) + ...
u5*(u8*(-2*c7*(-(c7*c8*s5p6) - c5p6*s8)*legMassVerticalOffset*MLeg + ...
2*c8*s5p6*legMassVerticalOffset*MLeg*(s7*s7)) + ...
s7*u7*(-2*c8*s8*(-(c7*c8*s5p6) - c5p6*s8)*legMassVerticalOffset*MLeg + ...
(c5p6*c8 - c7*s5p6*s8)*legMassVerticalOffset*MLeg + (c5p6*c8 - ...
c7*s5p6*s8)*legMassVerticalOffset*MLeg*(c8*c8) - (c5p6*c8 - ...
c7*s5p6*s8)*legMassVerticalOffset*MLeg*(s8*s8)) + u6*(2*s8*(-(c7*c8*s5p6) - ...
c5p6*s8)*MLeg*pelvisWidth - c5p6*MPelvis*pelvisWidth - 2*(-(c7*c8*s5p6) - ...
c5p6*s8)*legMassVerticalOffset*MLeg*(c7*c7) + c8*(-2*(c5p6*c8 - ...
c7*s5p6*s8)*MLeg*pelvisWidth + 2*c7*s5p6*legMassVerticalOffset*MLeg*(s7*s7) + ...
2*s8*(c5p6*c8 - c7*s5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)) - ...
2*(-(c7*c8*s5p6) - c5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)*(s8*s8))) + ...
(s8*(((-(c7*c8*s5p6) - c5p6*s8)*MLeg*pelvisWidth)/2. + ((-(c7*c8*s5p6) - ...
c5p6*s8)*MLeg*(pelvisWidth - 2*s6*(L - R)))/2.) - (c5p6*MPelvis*(pelvisWidth ...
- 2*s6*(L - R)))/2. + s5*MLeg*(-L + legMassVerticalOffset + R) - ...
(-(c7*c8*s5p6) - c5p6*s8)*legMassVerticalOffset*MLeg*(c7*c7) + c8*(-((c5p6*c8 ...
- c7*s5p6*s8)*MLeg*pelvisWidth)/2. - ((c5p6*c8 - ...
c7*s5p6*s8)*MLeg*(pelvisWidth - 2*s6*(L - R)))/2. + s8*(c5p6*c8 - ...
c7*s5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7) + c7*(c6*(-(c7*c8*s5p6) - ...
c5p6*s8)*MLeg*(L - R) + s5p6*legMassVerticalOffset*MLeg*(s7*s7))) + ...
c6*(c7*s8*(c5p6*c8 - c7*s5p6*s8)*MLeg*(L - R) + s5p6*(-(MPelvis*(L - R)) - ...
MLeg*(L - R)*(s7*s7))) - (-(c7*c8*s5p6) - ...
c5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)*(s8*s8))*(u5*u5) + ...
(s8*(-(c7*c8*s5p6) - c5p6*s8)*MLeg*pelvisWidth - ...
(c5p6*MPelvis*pelvisWidth)/2. - (-(c7*c8*s5p6) - ...
c5p6*s8)*legMassVerticalOffset*MLeg*(c7*c7) + c8*(-((c5p6*c8 - ...
c7*s5p6*s8)*MLeg*pelvisWidth) + c7*s5p6*legMassVerticalOffset*MLeg*(s7*s7) + ...
s8*(c5p6*c8 - c7*s5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)) - ...
(-(c7*c8*s5p6) - c5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)*(s8*s8))*(u6*u6) ...
+ (-(c8*s8*(c5p6*c8 - c7*s5p6*s8)*legMassVerticalOffset*MLeg) - ...
(-(c7*c8*s5p6) - c5p6*s8)*legMassVerticalOffset*MLeg*(c8*c8))*(u7*u7) - ...
(-(c7*c8*s5p6) - c5p6*s8)*legMassVerticalOffset*MLeg*(u8*u8) + ...
u4*(u7*(-(c7*s5p6*(c5p6*c8 - c7*s5p6*s8)*legMassVerticalOffset*MLeg) - ...
s8*(c5p6*c8 - c7*s5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + c8*(-((c5p6*c8 - ...
c7*s5p6*s8)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) - 2*(-(c7*c8*s5p6) - ...
c5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg)) + ...
s7*u8*(s5p6*(-(c5p6*s8*legMassVerticalOffset*MLeg) - 2*(-(c7*c8*s5p6) - ...
c5p6*s8)*legMassVerticalOffset*MLeg - (c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) - ...
c7*c8*legMassVerticalOffset*MLeg*(s5p6*s5p6)) + u6*(s7*(s8*(-((c5p6*c8 - ...
c7*s5p6*s8)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) - 2*(-(c7*c8*s5p6) - ...
c5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg) + s5p6*(-(c5*(c8*s6 + ...
c6*c7*s8)*legMassVerticalOffset*MLeg) - s5*(c6*c8 - ...
c7*s6*s8)*legMassVerticalOffset*MLeg + c7*(-2*(-(c7*c8*s5p6) - ...
c5p6*s8)*legMassVerticalOffset*MLeg - (c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg)) + c5p6*(-((c5p6*c8 - ...
c7*s5p6*s8)*legMassVerticalOffset*MLeg) + 2*c7*s5p6*MLeg*pelvisWidth + ...
2*c8*(-(c7*c8*s5p6) - c5p6*s8)*MLeg*pelvisWidth + 2*s8*(c5p6*c8 - ...
c7*s5p6*s8)*MLeg*pelvisWidth)) + c8*(s7*(c5p6*c8 - c7*s5p6*s8)*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset*MLeg + ...
legMassVerticalOffset*MLeg*(s5p6*s5p6)*power(s7,3))) + ...
u5*(s7*(c5p6*(-((c5p6*c8 - c7*s5p6*s8)*legMassVerticalOffset*MLeg) + ...
s8*(c5p6*c8 - c7*s5p6*s8)*MLeg*pelvisWidth) + s5p6*(-((c6*(c8*s5 + c5*c7*s8) ...
+ s6*(c5*c8 - c7*s5*s8))*legMassVerticalOffset*MLeg) + c7*(-2*(-(c7*c8*s5p6) ...
- c5p6*s8)*legMassVerticalOffset*MLeg - (c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 ...
- s5*s8))*legMassVerticalOffset*MLeg + c5p6*MLeg*pelvisWidth + ...
MLeg*(c5p6*pelvisWidth + 2*s5*(L - R)))) + s8*(-((c5p6*c8 - ...
c7*s5p6*s8)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) - 2*(-(c7*c8*s5p6) - ...
c5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + (c5p6*c8 - ...
c7*s5p6*s8)*MLeg*(c5p6*pelvisWidth + 2*s5*(L - R)))) + c8*(s7*((c5p6*c8 - ...
c7*s5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + c5p6*(-(c7*c8*s5p6) - ...
c5p6*s8)*MLeg*pelvisWidth + (-(c7*c8*s5p6) - c5p6*s8)*MLeg*(c5p6*pelvisWidth ...
+ 2*s5*(L - R))) + legMassVerticalOffset*MLeg*(s5p6*s5p6)*power(s7,3)))) + ...
u4*u4*(-((c5p6*c8 - c7*s5p6*s8)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg) - s5*MLeg*(L - legMassVerticalOffset - ...
R)*(c5*c5) + s8*((s5p6*(-(c7*c8*s5p6) - c5p6*s8)*MLeg*(s5p6*pelvisWidth - ...
2*c5*(L - R)))/2. + ((-(c7*c8*s5p6) - ...
c5p6*s8)*MLeg*pelvisWidth*(s5p6*s5p6))/2.) + c8*(-(c5p6*c7*(-(c7*c8*s5p6) - ...
c5p6*s8)*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. - (s5p6*(c5p6*c8 - ...
c7*s5p6*s8)*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. - ((c5p6*c8 - ...
c7*s5p6*s8)*MLeg*pelvisWidth*(s5p6*s5p6))/2.) - (-(c7*c8*s5p6) - ...
c5p6*s8)*legMassVerticalOffset*MLeg*(s5p6*s5p6)*(s7*s7) - (c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(s5p6*s5p6)*(s7*s7) + ...
c5p6*(c7*(s5p6*(-(c8*(-(c7*c8*s5p6) - c5p6*s8)*MLeg*pelvisWidth)/2. - ...
(s8*(c5p6*c8 - c7*s5p6*s8)*MLeg*pelvisWidth)/2.) - (s8*(c5p6*c8 - ...
c7*s5p6*s8)*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2.) + ...
(s5p6*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R))*(s7*s7))/2. + ...
(MLeg*pelvisWidth*(s5p6*s5p6)*(s7*s7))/2.) - (-(c7*c8*s5p6) - ...
c5p6*s8)*legMassVerticalOffset*MLeg*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))) + (c5*MLeg*(L ...
- legMassVerticalOffset - R)*sin(2*q5))/2.) + s5p6*s7*(c4*c7 - ...
c5p6*s4*s7)*g*MLeg*sin(groundAngle) + (-(c7*c8*s5p6) - c5p6*s8)*(c4*c8*s7 + ...
s4*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - ...
s6*s8)))*g*MLeg*sin(groundAngle) + (c5p6*c8 - c7*s5p6*s8)*(c4*s7*s8 + ...
s4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - c7*s6*s8)))*g*MLeg*sin(groundAngle); 
rhs(3) = c5p6*(c4*c6*s5 + c4*c5*s6)*lateralPelvisForce - s5p6*(c4*c5*c6 - ...
c4*s5*s6)*lateralPelvisForce - 2*(-(c7*s4) - ...
c4*c5p6*s7)*s8*u7*u8*legMassVerticalOffset*MLeg + (-((-(c7*s4) - ...
c4*c5p6*s7)*(-(c7*s4) - (c4*c5*c6 - c4*s5*s6)*s7)*g*MLeg) - (c7*c8*(c4*c5*c6 ...
- c4*s5*s6) - c8*s4*s7 - (c4*c6*s5 + c4*c5*s6)*s8)*(-(c8*s4*s7) + ...
c4*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - s6*s8)))*g*MLeg - (c8*(c4*c6*s5 ...
+ c4*c5*s6) + c7*(c4*c5*c6 - c4*s5*s6)*s8 - s4*s7*s8)*(-(s4*s7*s8) + ...
c4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - c7*s6*s8)))*g*MLeg)*cos(groundAngle) ...
- s5p6*(c4*c6*s5 + c4*c5*s6)*g*MPelvis*cos(q4 + groundAngle) - c5p6*(c4*c5*c6 ...
- c4*s5*s6)*g*MPelvis*cos(q4 + groundAngle) - ...
g*MPelvis*cos(groundAngle)*(s4*s4) + cos(groundAngle)*(-(g*MLeg*(c4*c4)) - ...
g*MLeg*(s4*s4)) + u4*(u8*(-(c5p6*(-(c7*s4) - ...
c4*c5p6*s7)*s8*legMassVerticalOffset*MLeg) - (-(c7*s4) - ...
c4*c5p6*s7)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg + s5p6*(-(c7*c8*(-(c7*s4) - ...
c4*c5p6*s7)*legMassVerticalOffset*MLeg) - 2*s7*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg)) + u7*(-(c7*s5p6*(c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*legMassVerticalOffset*MLeg) - s8*(c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + c8*(-((c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) - 2*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg)) + u6*(-(c5*(-(c7*s4) - ...
c4*c5p6*s7)*(c8*s6 + c6*c7*s8)*legMassVerticalOffset*MLeg) - s5*(-(c7*s4) - ...
c4*c5p6*s7)*(c6*c8 - c7*s6*s8)*legMassVerticalOffset*MLeg + ...
c7*(-2*s5p6*s7*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg - (-(c7*s4) - ...
c4*c5p6*s7)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) + s7*s8*(-((c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) - 2*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg) + c5p6*(2*c7*(-(c7*s4) - ...
c4*c5p6*s7)*MLeg*pelvisWidth - s4*MPelvis*pelvisWidth + s7*(-((c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*legMassVerticalOffset*MLeg) + 2*s8*(c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*MLeg*pelvisWidth)) + c8*(s7*((c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + 2*c5p6*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*MLeg*pelvisWidth) + s5p6*(-(c7*s4) - ...
c4*c5p6*s7)*legMassVerticalOffset*MLeg*(s7*s7))) + u5*(-((-(c7*s4) - ...
c4*c5p6*s7)*(c6*(c8*s5 + c5*c7*s8) + s6*(c5*c8 - ...
c7*s5*s8))*legMassVerticalOffset*MLeg) + s7*(c5p6*(-((c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*legMassVerticalOffset*MLeg) + s8*(c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*MLeg*pelvisWidth) + s8*(-((c4*c8*s5p6 + (c4*c5p6*c7 ...
- s4*s7)*s8)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg) - 2*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + (c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*MLeg*(c5p6*pelvisWidth + 2*s5*(L - R)))) + ...
c7*(-2*s5p6*s7*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg - (-(c7*s4) - ...
c4*c5p6*s7)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg + c5p6*(-(c7*s4) - ...
c4*c5p6*s7)*MLeg*pelvisWidth + (-(c7*s4) - c4*c5p6*s7)*MLeg*(c5p6*pelvisWidth ...
+ 2*s5*(L - R))) + s4*(-(MPelvis*(c5p6*pelvisWidth + 2*s5*(L - R))) - ...
2*s5*MLeg*(L - legMassVerticalOffset - R)) + c8*(s7*((c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + c5p6*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*MLeg*pelvisWidth + (c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*MLeg*(c5p6*pelvisWidth + 2*s5*(L - R))) + s5p6*(-(c7*s4) - ...
c4*c5p6*s7)*legMassVerticalOffset*MLeg*(s7*s7)))) + u6*(u8*(2*c8*s7*(-(c7*s4) ...
- c4*c5p6*s7)*legMassVerticalOffset*MLeg - 2*c7*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg) + s7*u7*(-2*c8*s8*(c8*(c4*c5p6*c7 - ...
s4*s7) - c4*s5p6*s8)*legMassVerticalOffset*MLeg + (c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*legMassVerticalOffset*MLeg + (c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*legMassVerticalOffset*MLeg*(c8*c8) - (c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*legMassVerticalOffset*MLeg*(s8*s8))) + u5*(u8*(2*c8*s7*(-(c7*s4) - ...
c4*c5p6*s7)*legMassVerticalOffset*MLeg - 2*c7*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg) + s7*u7*(-2*c8*s8*(c8*(c4*c5p6*c7 - ...
s4*s7) - c4*s5p6*s8)*legMassVerticalOffset*MLeg + (c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*legMassVerticalOffset*MLeg + (c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*legMassVerticalOffset*MLeg*(c8*c8) - (c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*legMassVerticalOffset*MLeg*(s8*s8)) + u6*(2*s8*(c8*(c4*c5p6*c7 - ...
s4*s7) - c4*s5p6*s8)*MLeg*pelvisWidth - c4*s5p6*MPelvis*pelvisWidth - ...
2*(c8*(c4*c5p6*c7 - s4*s7) - c4*s5p6*s8)*legMassVerticalOffset*MLeg*(c7*c7) + ...
c8*(2*c7*s7*(-(c7*s4) - c4*c5p6*s7)*legMassVerticalOffset*MLeg - ...
2*(c4*c8*s5p6 + (c4*c5p6*c7 - s4*s7)*s8)*MLeg*pelvisWidth + 2*s8*(c4*c8*s5p6 ...
+ (c4*c5p6*c7 - s4*s7)*s8)*legMassVerticalOffset*MLeg*(s7*s7)) - ...
2*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)*(s8*s8))) + ...
(s8*(((c8*(c4*c5p6*c7 - s4*s7) - c4*s5p6*s8)*MLeg*pelvisWidth)/2. + ...
((c8*(c4*c5p6*c7 - s4*s7) - c4*s5p6*s8)*MLeg*(pelvisWidth - 2*s6*(L - ...
R)))/2.) + c6*(c7*(c8*(c8*(c4*c5p6*c7 - s4*s7) - c4*s5p6*s8)*MLeg*(L - R) + ...
s8*(c4*c8*s5p6 + (c4*c5p6*c7 - s4*s7)*s8)*MLeg*(L - R)) - s7*(-(c7*s4) - ...
c4*c5p6*s7)*MLeg*(L - R)) + c4*(-(s5p6*MPelvis*(pelvisWidth - 2*s6*(L - ...
R)))/2. + c5p6*c6*MPelvis*(L - R) - c5*MLeg*(-L + legMassVerticalOffset + R)) ...
- (c8*(c4*c5p6*c7 - s4*s7) - c4*s5p6*s8)*legMassVerticalOffset*MLeg*(c7*c7) + ...
c8*(c7*s7*(-(c7*s4) - c4*c5p6*s7)*legMassVerticalOffset*MLeg - ((c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*MLeg*pelvisWidth)/2. - ((c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*MLeg*(pelvisWidth - 2*s6*(L - R)))/2. + s8*(c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*legMassVerticalOffset*MLeg*(s7*s7)) - ...
(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)*(s8*s8))*(u5*u5) + ...
(s8*(c8*(c4*c5p6*c7 - s4*s7) - c4*s5p6*s8)*MLeg*pelvisWidth - ...
(c4*s5p6*MPelvis*pelvisWidth)/2. - (c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg*(c7*c7) + c8*(c7*s7*(-(c7*s4) - ...
c4*c5p6*s7)*legMassVerticalOffset*MLeg - (c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*MLeg*pelvisWidth + s8*(c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*legMassVerticalOffset*MLeg*(s7*s7)) - (c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg*(s7*s7)*(s8*s8))*(u6*u6) + ...
(-(c8*s8*(c4*c8*s5p6 + (c4*c5p6*c7 - s4*s7)*s8)*legMassVerticalOffset*MLeg) - ...
(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg*(c8*c8))*(u7*u7) - (c8*(c4*c5p6*c7 - ...
s4*s7) - c4*s5p6*s8)*legMassVerticalOffset*MLeg*(u8*u8) + ...
u4*u4*(-(s5p6*s7*(-(c7*s4) - c4*c5p6*s7)*(c6*(c7*c8*s5 + c5*s8) + ...
s6*(c5*c7*c8 - s5*s8))*legMassVerticalOffset*MLeg) - (c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg + c5p6*(s7*((s5p6*(-(c7*s4) - ...
c4*c5p6*s7)*MLeg*pelvisWidth)/2. + ((-(c7*s4) - ...
c4*c5p6*s7)*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2.) + ...
c7*(s5p6*(-(c8*(c8*(c4*c5p6*c7 - s4*s7) - c4*s5p6*s8)*MLeg*pelvisWidth)/2. - ...
(s8*(c4*c8*s5p6 + (c4*c5p6*c7 - s4*s7)*s8)*MLeg*pelvisWidth)/2.) - ...
(s8*(c4*c8*s5p6 + (c4*c5p6*c7 - s4*s7)*s8)*MLeg*(s5p6*pelvisWidth - 2*c5*(L - ...
R)))/2.)) + s8*((s5p6*(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. + ((c8*(c4*c5p6*c7 - ...
s4*s7) - c4*s5p6*s8)*MLeg*pelvisWidth*(s5p6*s5p6))/2.) + ...
c8*(-(c5p6*c7*(c8*(c4*c5p6*c7 - s4*s7) - c4*s5p6*s8)*MLeg*(s5p6*pelvisWidth - ...
2*c5*(L - R)))/2. - (s5p6*(c4*c8*s5p6 + (c4*c5p6*c7 - ...
s4*s7)*s8)*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. - ((c4*c8*s5p6 + ...
(c4*c5p6*c7 - s4*s7)*s8)*MLeg*pelvisWidth*(s5p6*s5p6))/2.) - (c8*(c4*c5p6*c7 ...
- s4*s7) - c4*s5p6*s8)*legMassVerticalOffset*MLeg*(s5p6*s5p6)*(s7*s7) - ...
(c8*(c4*c5p6*c7 - s4*s7) - ...
c4*s5p6*s8)*legMassVerticalOffset*MLeg*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 ...
- c7*s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))) + ...
c4*(-(MPelvis*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. + MLeg*(L - ...
legMassVerticalOffset - R)*power(c5,3) + (s5*MLeg*(L - legMassVerticalOffset ...
- R)*sin(2*q5))/2.)) - c4*s4*g*MLeg*sin(groundAngle) + (c4*c7 - ...
c5p6*s4*s7)*(-(c7*s4) - (c4*c5*c6 - c4*s5*s6)*s7)*g*MLeg*sin(groundAngle) + ...
(c7*c8*(c4*c5*c6 - c4*s5*s6) - c8*s4*s7 - (c4*c6*s5 + c4*c5*s6)*s8)*(c4*c8*s7 ...
+ s4*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - ...
s6*s8)))*g*MLeg*sin(groundAngle) + (c8*(c4*c6*s5 + c4*c5*s6) + c7*(c4*c5*c6 - ...
c4*s5*s6)*s8 - s4*s7*s8)*(c4*s7*s8 + s4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - ...
c7*s6*s8)))*g*MLeg*sin(groundAngle) - c4*s4*g*MPelvis*sin(groundAngle) + ...
c4*s4*g*MLeg*(c5*c5)*sin(groundAngle) + ...
c4*s4*g*MLeg*(s5*s5)*sin(groundAngle); 
rhs(4) = u7*u8*(c8*(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - ...
s6*s8))*ILegSmall + s8*(2*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILeg - (-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILegSmall - 2*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + ...
c7*(-(s5p6*pelvisWidth) + c5*(L - R))))) + (-((-(c7*s4) - ...
c4*c5p6*s7)*g*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R)))) - ...
(-(s4*s7*s8) + c4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - ...
c7*s6*s8)))*g*MLeg*(s5p6*s7*legMassVerticalOffset + ...
s7*s8*(-(s5p6*pelvisWidth) + c5*(L - R))))*cos(groundAngle) + ...
u6*(s7*u8*(s8*(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall + ...
c8*(-2*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg + (-(s5*(c8*s6 ...
+ c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall + ...
2*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R))) - ...
2*c7*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - R)))) + ...
u7*(c7*(-(c8*(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall) - ...
s8*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall) + ...
legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(s7*s7) + ...
legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(c8*c8)*(s7*s7) - ...
2*s8*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(c8*c8)*(s7*s7) - legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset ...
+ s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(s7*s7)*(s8*s8) + s5p6*(ILeg*(s7*s7) ...
+ ILeg*(c8*c8)*(s7*s7) - ILegSmall*(c8*c8)*(s7*s7) - ILeg*(s7*s7)*(s8*s8) + ...
ILegSmall*(s7*s7)*(s8*s8)))) + u4*(s7*u7*(c8*(s5p6*(-((c6*(c7*c8*s5 + c5*s8) ...
+ s6*(c5*c7*c8 - s5*s8))*ILeg) - 2*(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - ...
s6*s8))*ILegSmall) - (c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))) + s8*(-(s5p6*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg) - (-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset ...
+ s8*(-(s5p6*pelvisWidth) + c5*(L - R)))) - 2*(-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + ...
c5*(L - R))*(c8*c8) + ...
c7*(-(s5p6*legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))) - ILeg*(s5p6*s5p6))) + ...
u8*((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*(-(s5*(c8*s6 + c6*c7*s8)) ...
+ c5*(c6*c8 - c7*s6*s8))*ILeg + (c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - ...
s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall + ...
c7*s5p6*(c8*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg - ...
s8*(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall) + ...
c5p6*s8*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg - ...
legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R)))) - ...
(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R))) + ...
c8*(c5p6*(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall + ...
s5p6*(-(c7*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + ...
c5*(L - R)))) - 2*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(s7*s7)))) + u6*(c5*((c8*s6 + c6*c7*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*ILeg + (c6*c7*c8 - s6*s8)*(c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*ILegSmall - (c8*s6 + ...
c6*c7*s8)*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 ...
- c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R)))) ...
+ s5*((c6*c8 - c7*s6*s8)*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILeg + (-(c7*c8*s6) - c6*s8)*(c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*ILegSmall - (c6*c8 - ...
c7*s6*s8)*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 ...
- c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R)))) ...
+ c7*((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg + (c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILegSmall - (c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R)))) + ...
c5p6*(2*c7*MLeg*pelvisWidth*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R))) + ...
(MPelvis*pelvisWidth*(-(s5p6*pelvisWidth) + 2*c5*(L - R)))/2. - ...
legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(s7*s7) + ...
2*s8*MLeg*pelvisWidth*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + ...
c5*(L - R)))*(s7*s7) + 2*MLeg*pelvisWidth*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(c8*c8)*(s7*s7) + s5p6*(2*IPelvisY - 2*IPelvisZ - ILeg*(s7*s7))) + ...
s8*(-((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(s7*s7)) + s5p6*(-((c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg*(s7*s7)) - (c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*ILegSmall*(s7*s7))) + c8*((-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset ...
+ s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(s7*s7) - 2*s8*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(s7*s7) + s5p6*(legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + ...
c5*(L - R)))*(s7*s7) - 2*c7*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + ...
c5*(L - R))*(s7*s7)))) + u5*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - c7*s6*s8))*ILeg + ...
(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - s6*s8))*(c5*(-(c7*c8*s6) - c6*s8) ...
- s5*(c6*c7*c8 - s6*s8))*ILegSmall - (c6*(c8*s5 + c5*c7*s8) + s6*(c5*c8 - ...
c7*s5*s8))*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + ...
c5*(L - R))) + c7*((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg + ...
(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) ...
+ c5*(c6*c8 - c7*s6*s8))*ILegSmall - (c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R))) + ...
MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - ...
R)))*(c5p6*pelvisWidth + 2*s5*(L - R))) + (MPelvis*(-(s5p6*pelvisWidth) + ...
2*c5*(L - R))*(c5p6*pelvisWidth + 2*s5*(L - R)))/2. + ...
MLeg*(-(s5p6*pelvisWidth) + c5*(L - R))*(c5p6*pelvisWidth + 2*s5*(L - ...
R))*(c8*c8)*(s7*s7) + c5p6*(c7*MLeg*pelvisWidth*(-((-(s5*(c8*s6 + c6*c7*s8)) ...
+ c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + ...
c5*(L - R))) - legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(s7*s7) + ...
s8*MLeg*pelvisWidth*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + ...
c5*(L - R)))*(s7*s7) + MLeg*pelvisWidth*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(c8*c8)*(s7*s7) + s5p6*(2*IPelvisY - 2*IPelvisZ - ILeg*(s7*s7))) + ...
s8*(-((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(s7*s7)) + ...
MLeg*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + c5*(L - ...
R)))*(c5p6*pelvisWidth + 2*s5*(L - R))*(s7*s7) + s5p6*(-((c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg*(s7*s7)) - (c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*ILegSmall*(s7*s7))) + c8*((-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset ...
+ s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(s7*s7) - 2*s8*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(s7*s7) + s5p6*(legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + ...
c5*(L - R)))*(s7*s7) - 2*c7*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + ...
c5*(L - R))*(s7*s7))) + c5*s5*(2*ILeg - 2*ILegSmall + 2*MLeg*((L - ...
legMassVerticalOffset - R)*(L - legMassVerticalOffset - R))))) + ...
s7*(-(c8*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(u8*u8)) + u7*u7*(c8*s8*(s5p6*(-ILeg + ILegSmall) - ...
legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))) - ...
legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - R))*power(c8,3))) + ...
u4*u4*(s7*(-(s5p6*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R)))) - ...
(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset ...
+ s8*(-(s5p6*pelvisWidth) + c5*(L - R))) + ...
c5p6*((s5p6*MLeg*pelvisWidth*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - ...
R))))/2. + (MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - ...
R)))*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. + ...
c7*(-(s8*MLeg*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + c5*(L - ...
R)))*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. - (MLeg*(s5p6*pelvisWidth - ...
2*c5*(L - R))*(-(s5p6*pelvisWidth) + c5*(L - R))*(c8*c8))/2. + ...
s5p6*(-(s8*MLeg*pelvisWidth*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R))))/2. - ...
(MLeg*pelvisWidth*(-(s5p6*pelvisWidth) + c5*(L - R))*(c8*c8))/2.)))) + ...
c8*(s7*(-(s5p6*MLeg*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + ...
c5*(L - R)))*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. - ...
(MLeg*pelvisWidth*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + ...
c5*(L - R)))*(s5p6*s5p6))/2. + s8*((s5p6*MLeg*(s5p6*pelvisWidth - 2*c5*(L - ...
R))*(-(s5p6*pelvisWidth) + c5*(L - R)))/2. + ...
(MLeg*pelvisWidth*(-(s5p6*pelvisWidth) + c5*(L - R))*(s5p6*s5p6))/2.) - ...
legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - R))*((-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8)))) - legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(s5p6*s5p6)*power(s7,3))) + c8*(u6*u6)*(s7*(c7*(-((-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg) + (-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*ILegSmall + legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 ...
+ c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + ...
c7*(-(s5p6*pelvisWidth) + c5*(L - R)))) - ...
MLeg*pelvisWidth*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + ...
c5*(L - R))) + s8*MLeg*pelvisWidth*(-(s5p6*pelvisWidth) + c5*(L - R)) - ...
legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - R))*(c7*c7)) - ...
legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(s8*s8)*power(s7,3) + ...
s8*(legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*power(s7,3) + s5p6*(ILeg*power(s7,3) - ...
ILegSmall*power(s7,3)))) + u5*(s7*u8*(s8*(c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*ILegSmall + c8*(-2*(-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*ILeg + (-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILegSmall + 2*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + ...
c7*(-(s5p6*pelvisWidth) + c5*(L - R))) - ...
2*c7*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - R)))) + ...
u7*(c7*(-(c8*(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall) - ...
s8*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall) + ...
legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(s7*s7) + ...
legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(c8*c8)*(s7*s7) - ...
2*s8*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(c8*c8)*(s7*s7) - legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset ...
+ s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*(s7*s7)*(s8*s8) + s5p6*(ILeg*(s7*s7) ...
+ ILeg*(c8*c8)*(s7*s7) - ILegSmall*(c8*c8)*(s7*s7) - ILeg*(s7*s7)*(s8*s8) + ...
ILegSmall*(s7*s7)*(s8*s8))) + c8*u6*(s7*(c7*(-2*(-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*ILeg + 2*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILegSmall + 2*legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + ...
c7*(-(s5p6*pelvisWidth) + c5*(L - R)))) - ...
2*MLeg*pelvisWidth*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + ...
c5*(L - R))) + 2*s8*MLeg*pelvisWidth*(-(s5p6*pelvisWidth) + c5*(L - R)) - ...
2*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - R))*(c7*c7)) - ...
2*legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(s8*s8)*power(s7,3) + ...
s8*(2*legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*power(s7,3) + s5p6*(2*ILeg*power(s7,3) ...
- 2*ILegSmall*power(s7,3))))) + u5*u5*(c6*s7*(-(MLeg*(-((-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + ...
c7*(-(s5p6*pelvisWidth) + c5*(L - R)))*(L - R)) + ...
c7*(s8*MLeg*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + c5*(L - ...
R)))*(L - R) + MLeg*(-(s5p6*pelvisWidth) + c5*(L - R))*(L - R)*(c8*c8))) + ...
c8*(s7*(c7*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg) + ...
(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall + ...
legMassVerticalOffset*MLeg*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset) + c7*(-(s5p6*pelvisWidth) + c5*(L - R)))) - ...
(MLeg*pelvisWidth*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + ...
c5*(L - R))))/2. + (s8*MLeg*pelvisWidth*(-(s5p6*pelvisWidth) + c5*(L - ...
R)))/2. - (MLeg*(s5p6*legMassVerticalOffset + s8*(-(s5p6*pelvisWidth) + c5*(L ...
- R)))*(pelvisWidth - 2*s6*(L - R)))/2. - ...
legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - R))*(c7*c7)) - ...
legMassVerticalOffset*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(s8*s8)*power(s7,3) + s8*((s7*MLeg*(-(s5p6*pelvisWidth) + c5*(L - ...
R))*(pelvisWidth - 2*s6*(L - R)))/2. + ...
legMassVerticalOffset*MLeg*(s5p6*legMassVerticalOffset + ...
s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*power(s7,3) + s5p6*(ILeg*power(s7,3) - ...
ILegSmall*power(s7,3))))) + (c4*c7 - c5p6*s4*s7)*g*MLeg*(-((-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset) + ...
c7*(-(s5p6*pelvisWidth) + c5*(L - R)))*sin(groundAngle) + (c4*s7*s8 + ...
s4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - ...
c7*s6*s8)))*g*MLeg*(s5p6*s7*legMassVerticalOffset + ...
s7*s8*(-(s5p6*pelvisWidth) + c5*(L - R)))*sin(groundAngle) + ...
c8*(-(s7*(-(c8*s4*s7) + c4*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - ...
s6*s8)))*g*MLeg*(-(s5p6*pelvisWidth) + c5*(L - R))*cos(groundAngle)) + ...
s7*(c4*c8*s7 + s4*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - ...
s6*s8)))*g*MLeg*(-(s5p6*pelvisWidth) + c5*(L - R))*sin(groundAngle)) + ...
(g*MPelvis*(-(s5p6*pelvisWidth) + 2*c5*(L - R))*sin(q4 + groundAngle))/2. + ...
c5*g*MLeg*(L - legMassVerticalOffset - R)*sin(q4 + groundAngle); 
rhs(5) = c5p6*lateralPelvisForce*(-(c6*L) + c6*R) - ...
s5p6*lateralPelvisForce*(s6*L - pelvisWidth/2. - s6*R) + (-((-(c8*s4*s7) + ...
c4*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - s6*s8)))*g*MLeg*(-(s8*(-(c6*L) ...
+ c6*R)) + c7*c8*(s6*L - pelvisWidth - s6*R))) - (-(c7*s4) - ...
c4*c5p6*s7)*g*MLeg*(-(s7*s8*legMassVerticalOffset) - s7*(s6*L - pelvisWidth - ...
s6*R)) - (-(s4*s7*s8) + c4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - ...
c7*s6*s8)))*g*MLeg*(c7*legMassVerticalOffset + c8*(-(c6*L) + c6*R) + ...
c7*s8*(s6*L - pelvisWidth - s6*R)))*cos(groundAngle) - s5*g*MLeg*(-L + ...
legMassVerticalOffset + R)*cos(q4 + groundAngle) - s5p6*g*MPelvis*(-(c6*L) + ...
c6*R)*cos(q4 + groundAngle) - c5p6*g*MPelvis*(s6*L - pelvisWidth/2. - ...
s6*R)*cos(q4 + groundAngle) + ...
s7*u7*u8*(-2*s8*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth + s6*(-L + R)) + ILegSmall*(c8*c8) + 2*ILeg*(s8*s8) - ...
ILegSmall*(s8*s8)) + ...
u6*(u8*(-2*c7*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - ...
c6*s8*(-L + R)) + ...
c8*(2*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth + ...
s6*(-L + R))*(s7*s7) + s8*(-2*ILeg*(s7*s7) + 2*ILegSmall*(s7*s7)))) + ...
s7*u7*(legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R)) - ...
2*c8*s8*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - ...
c6*s8*(-L + R)) + legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R))*(c8*c8) - ...
legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + s8*(-pelvisWidth + ...
s6*(L - R))) + c6*c8*(-L + R))*(s8*s8) + c7*(ILeg + ILeg*(c8*c8) - ...
2*ILegSmall*(c8*c8) - ILeg*(s8*s8)))) + ...
u5*(u8*(-2*c7*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - ...
c6*s8*(-L + R)) + ...
c8*(2*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth + ...
s6*(-L + R))*(s7*s7) + s8*(-2*ILeg*(s7*s7) + 2*ILegSmall*(s7*s7)))) + ...
u6*(-(c6*MPelvis*pelvisWidth*(-L + R)) + ...
2*s8*MLeg*pelvisWidth*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + R)) - ...
2*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + ...
R))*(c7*c7) + c8*(-2*MLeg*pelvisWidth*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R)) + ...
2*s8*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + s8*(-pelvisWidth ...
+ s6*(L - R))) + c6*c8*(-L + R))*(s7*s7) + ...
2*c7*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth + ...
s6*(-L + R))*(s7*s7)) - 2*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + ...
s6*(L - R)) - c6*s8*(-L + R))*(s7*s7)*(s8*s8)) + ...
s7*u7*(legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R)) - ...
2*c8*s8*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - ...
c6*s8*(-L + R)) + legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R))*(c8*c8) - ...
legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + s8*(-pelvisWidth + ...
s6*(L - R))) + c6*c8*(-L + R))*(s8*s8) + c7*(ILeg + ILeg*(c8*c8) - ...
2*ILegSmall*(c8*c8) - ILeg*(s8*s8)))) + ...
(s8*((MLeg*pelvisWidth*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + ...
R)))/2. + (MLeg*(pelvisWidth - 2*s6*(L - R))*(c7*c8*(-pelvisWidth + s6*(L - ...
R)) - c6*s8*(-L + R)))/2.) - legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth ...
+ s6*(L - R)) - c6*s8*(-L + R))*(c7*c7) + c6*(MPelvis*(-pelvisWidth/2. + ...
s6*(L - R))*(L - R) - (MPelvis*(pelvisWidth - 2*s6*(L - R))*(-L + R))/2. + ...
c7*s8*MLeg*(L - R)*(c7*(legMassVerticalOffset + s8*(-pelvisWidth + s6*(L - ...
R))) + c6*c8*(-L + R)) - MLeg*(L - R)*(-(s8*legMassVerticalOffset) + ...
pelvisWidth + s6*(-L + R))*(s7*s7)) + ...
c8*(-(MLeg*pelvisWidth*(c7*(legMassVerticalOffset + s8*(-pelvisWidth + s6*(L ...
- R))) + c6*c8*(-L + R)))/2. - (MLeg*(pelvisWidth - 2*s6*(L - ...
R))*(c7*(legMassVerticalOffset + s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L ...
+ R)))/2. + s8*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R))*(s7*s7) + c7*(c6*MLeg*(L - ...
R)*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + R)) + ...
legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth + ...
s6*(-L + R))*(s7*s7))) - legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + ...
s6*(L - R)) - c6*s8*(-L + R))*(s7*s7)*(s8*s8))*(u5*u5) + ...
(-(c6*MPelvis*pelvisWidth*(-L + R))/2. + ...
s8*MLeg*pelvisWidth*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + R)) - ...
legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + ...
R))*(c7*c7) + c8*(-(MLeg*pelvisWidth*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R))) + ...
s8*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + s8*(-pelvisWidth + ...
s6*(L - R))) + c6*c8*(-L + R))*(s7*s7) + ...
c7*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth + ...
s6*(-L + R))*(s7*s7)) - legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + ...
s6*(L - R)) - c6*s8*(-L + R))*(s7*s7)*(s8*s8))*(u6*u6) + (c8*s8*(c7*(-ILeg + ...
ILegSmall) - legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R))) - ...
legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + ...
R))*(c8*c8))*(u7*u7) - legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + ...
s6*(L - R)) - c6*s8*(-L + R))*(u8*u8) + u4*(u7*(-(s8*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R))) + c7*(c8*(-((c6*(c7*c8*s5 ...
+ c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg) - (c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*ILegSmall) + s8*(-((-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*ILeg) + (-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILegSmall) - ...
s5p6*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + s8*(-pelvisWidth ...
+ s6*(L - R))) + c6*c8*(-L + R))) + c8*(-((c6*(c7*c8*s5 + c5*s8) + ...
s6*(c5*c7*c8 - s5*s8))*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset ...
+ s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R))) - 2*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - ...
c6*s8*(-L + R))) + s5p6*(-(ILeg*(c7*c7)) - ILegSmall*(s7*s7))) + ...
s7*u8*(s8*((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg + ...
(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall) - (c6*(c7*c8*s5 ...
+ c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth ...
+ s6*(-L + R)) + s5p6*(-2*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + ...
s6*(L - R)) - c6*s8*(-L + R)) + c7*c8*(s8*(ILeg - ILegSmall) - ...
legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth + ...
s6*(-L + R)))) + ...
c5p6*(-(s8*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth + s6*(-L + R))) + ILegSmall*(c8*c8) + ILeg*(s8*s8))) + ...
u6*(s7*(c5*(s8*(c8*s6 + c6*c7*s8)*ILeg - (c8*s6 + ...
c6*c7*s8)*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth + s6*(-L + R))) + s5*(s8*(c6*c8 - c7*s6*s8)*ILeg - (c6*c8 - ...
c7*s6*s8)*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth + s6*(-L + R))) + c7*(-((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth ...
+ s6*(-L + R))) - 2*s5p6*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + ...
s6*(L - R)) - c6*s8*(-L + R))) + s8*(-((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 ...
- s5*s8))*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R))) - 2*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - ...
c6*s8*(-L + R))) + ...
c5p6*(-(legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R))) + ...
2*s8*MLeg*pelvisWidth*(c7*(legMassVerticalOffset + s8*(-pelvisWidth + s6*(L - ...
R))) + c6*c8*(-L + R)) + c7*(-ILeg + ...
2*MLeg*pelvisWidth*(-(s8*legMassVerticalOffset) + pelvisWidth + s6*(-L + ...
R))))) + c8*(s7*(s5*(-(c7*c8*s6) - c6*s8)*ILegSmall + c5*(c6*c7*c8 - ...
s6*s8)*ILegSmall + c7*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILeg - (-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILegSmall) + (-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R)) + ...
2*c5p6*MLeg*pelvisWidth*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + R))) ...
+ s5p6*(legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth ...
+ s6*(-L + R))*power(s7,3) + s8*(-(ILeg*power(s7,3)) + ...
ILegSmall*power(s7,3))))) + u5*(s7*(-((c6*(c8*s5 + c5*c7*s8) + s6*(c5*c8 - ...
c7*s5*s8))*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth + s6*(-L + R))) + c7*(c8*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILeg - (-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILegSmall) - (c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth ...
+ s6*(-L + R)) + MLeg*(c5p6*pelvisWidth + 2*s5*(L - ...
R))*(-(s8*legMassVerticalOffset) + pelvisWidth + s6*(-L + R)) - ...
2*s5p6*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - ...
c6*s8*(-L + R))) + s8*((c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - c7*s6*s8))*ILeg - ...
(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R)) + MLeg*(c5p6*pelvisWidth + ...
2*s5*(L - R))*(c7*(legMassVerticalOffset + s8*(-pelvisWidth + s6*(L - R))) + ...
c6*c8*(-L + R)) - 2*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - ...
c6*s8*(-L + R))) + ...
c5p6*(-(legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R))) + ...
s8*MLeg*pelvisWidth*(c7*(legMassVerticalOffset + s8*(-pelvisWidth + s6*(L - ...
R))) + c6*c8*(-L + R)) + c7*(-ILeg + ...
MLeg*pelvisWidth*(-(s8*legMassVerticalOffset) + pelvisWidth + s6*(-L + R))))) ...
+ c8*(s7*((s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - s6*s8))*ILegSmall + ...
(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R)) + ...
c5p6*MLeg*pelvisWidth*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + R)) + ...
MLeg*(c5p6*pelvisWidth + 2*s5*(L - R))*(c7*c8*(-pelvisWidth + s6*(L - R)) - ...
c6*s8*(-L + R))) + ...
s5p6*(legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth + ...
s6*(-L + R))*power(s7,3) + s8*(-(ILeg*power(s7,3)) + ...
ILegSmall*power(s7,3)))))) + u4*u4*(c5*s5*(-ILeg + ILegSmall) - (c6*(c7*c8*s5 ...
+ c5*s8) + s6*(c5*c7*c8 - s5*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R)) + c7*(-((c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - s5*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILeg) - (c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - ...
s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall - ...
(c5p6*s8*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R))*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R)))/2.) + ...
c8*(-(s5p6*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R))*(c7*(legMassVerticalOffset ...
+ s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R)))/2. - ...
(MLeg*pelvisWidth*(c7*(legMassVerticalOffset + s8*(-pelvisWidth + s6*(L - ...
R))) + c6*c8*(-L + R))*(s5p6*s5p6))/2.) - ...
legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + ...
R))*(s5p6*s5p6)*(s7*s7) + s5p6*(-(c6*MPelvis*(s5p6*pelvisWidth - 2*c5*(L - ...
R))*(-L + R))/2. + (s8*MLeg*(s5p6*pelvisWidth - 2*c5*(L - ...
R))*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + R)))/2. - (c6*(c7*c8*s5 ...
+ c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth ...
+ s6*(-L + R))*(s7*s7)) + s8*((MLeg*pelvisWidth*(c7*c8*(-pelvisWidth + s6*(L ...
- R)) - c6*s8*(-L + R))*(s5p6*s5p6))/2. + s5p6*((c6*(c7*c8*s5 + c5*s8) + ...
s6*(c5*c7*c8 - s5*s8))*ILeg*(s7*s7) + (c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*ILegSmall*(s7*s7))) + ...
c5p6*(-(MPelvis*(s5p6*pelvisWidth - 2*c5*(L - R))*(-pelvisWidth/2. + s6*(L - ...
R)))/2. + c7*(-(s5p6*s8*MLeg*pelvisWidth*(c7*(legMassVerticalOffset + ...
s8*(-pelvisWidth + s6*(L - R))) + c6*c8*(-L + R)))/2. + ...
c8*(-(s5p6*MLeg*pelvisWidth*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + ...
R)))/2. - (MLeg*(s5p6*pelvisWidth - 2*c5*(L - R))*(c7*c8*(-pelvisWidth + ...
s6*(L - R)) - c6*s8*(-L + R)))/2.)) + (MLeg*(s5p6*pelvisWidth - 2*c5*(L - ...
R))*(-(s8*legMassVerticalOffset) + pelvisWidth + s6*(-L + R))*(s7*s7))/2. + ...
s5p6*(-IPelvisY + IPelvisZ + (MLeg*pelvisWidth*(-(s8*legMassVerticalOffset) + ...
pelvisWidth + s6*(-L + R))*(s7*s7))/2.)) - ...
legMassVerticalOffset*MLeg*(c7*c8*(-pelvisWidth + s6*(L - R)) - c6*s8*(-L + ...
R))*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))) + (MLeg*(L - legMassVerticalOffset - ...
R)*(-L + legMassVerticalOffset + R)*sin(2*q5))/2.) + (c4*c8*s7 + ...
s4*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - s6*s8)))*g*MLeg*(-(s8*(-(c6*L) ...
+ c6*R)) + c7*c8*(s6*L - pelvisWidth - s6*R))*sin(groundAngle) + (c4*c7 - ...
c5p6*s4*s7)*g*MLeg*(-(s7*s8*legMassVerticalOffset) - s7*(s6*L - pelvisWidth - ...
s6*R))*sin(groundAngle) + (c4*s7*s8 + s4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - ...
c7*s6*s8)))*g*MLeg*(c7*legMassVerticalOffset + c8*(-(c6*L) + c6*R) + ...
c7*s8*(s6*L - pelvisWidth - s6*R))*sin(groundAngle); 
rhs(6) = (s5p6*lateralPelvisForce*pelvisWidth)/2. + (c7*c8*(-(c8*s4*s7) + ...
c4*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - s6*s8)))*g*MLeg*pelvisWidth - ...
(-(c7*s4) - c4*c5p6*s7)*g*MLeg*(-(s7*s8*legMassVerticalOffset) + ...
s7*pelvisWidth) - (-(s4*s7*s8) + c4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - ...
c7*s6*s8)))*g*MLeg*(c7*legMassVerticalOffset - ...
c7*s8*pelvisWidth))*cos(groundAngle) + (c5p6*g*MPelvis*pelvisWidth*cos(q4 + ...
groundAngle))/2. + ...
s7*u7*u8*(-2*s8*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth) + ILegSmall*(c8*c8) + 2*ILeg*(s8*s8) - ILegSmall*(s8*s8)) + ...
u6*(c8*u8*(2*legMassVerticalOffset*MLeg*pelvisWidth*(c7*c7) + ...
2*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)*(s7*s7) + s8*(-2*ILeg*(s7*s7) + 2*ILegSmall*(s7*s7))) + ...
c7*s7*u7*(ILeg + legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth) + ILeg*(c8*c8) - 2*ILegSmall*(c8*c8) + ...
2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(c8*c8) + ...
legMassVerticalOffset*MLeg*(legMassVerticalOffset - s8*pelvisWidth)*(c8*c8) - ...
ILeg*(s8*s8) - legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)*(s8*s8))) + u4*u4*(s5p6*(-((c6*(c7*c8*s5 + c5*s8) + ...
s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)*(s7*s7)) + s8*((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*ILeg*(s7*s7) + (c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - ...
s6*s8))*ILegSmall*(s7*s7))) + c5p6*((MPelvis*pelvisWidth*(s5p6*pelvisWidth - ...
2*c5*(L - R)))/4. + s8*(-(s5p6*MLeg*pelvisWidth*(legMassVerticalOffset - ...
s8*pelvisWidth)*(c7*c7))/2. - (MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)*(s5p6*pelvisWidth - 2*c5*(L - R))*(c7*c7))/2.) + ...
(MLeg*pelvisWidth*(s5p6*pelvisWidth - 2*c5*(L - R))*(c7*c7)*(c8*c8))/2. + ...
(MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth)*(s5p6*pelvisWidth - 2*c5*(L ...
- R))*(s7*s7))/2. + s5p6*(-IPelvisY + IPelvisZ + ...
(MLeg*pelvisWidth*(-(s8*legMassVerticalOffset) + pelvisWidth)*(s7*s7))/2. + ...
(MLeg*(c7*c7)*(c8*c8)*(pelvisWidth*pelvisWidth))/2.)) + c7*(-((c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - s5*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILeg) - (c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - ...
s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall - ...
(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth) + c8*(-(s5p6*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. - ...
(MLeg*pelvisWidth*(legMassVerticalOffset - s8*pelvisWidth)*(s5p6*s5p6))/2. + ...
legMassVerticalOffset*MLeg*pelvisWidth*(s5p6*s5p6)*(s7*s7) + ...
legMassVerticalOffset*MLeg*pelvisWidth*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 ...
- c7*s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))) + ...
s8*(-(s5p6*MLeg*pelvisWidth*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. - ...
(MLeg*(s5p6*s5p6)*(pelvisWidth*pelvisWidth))/2.)))) + ...
c8*(u6*u6)*(c7*(-(MLeg*pelvisWidth*(legMassVerticalOffset - s8*pelvisWidth)) ...
+ legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)*(s7*s7) + legMassVerticalOffset*MLeg*pelvisWidth*(s7*s7)*(s8*s8) ...
+ s8*(legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)*(s7*s7) - MLeg*(pelvisWidth*pelvisWidth))) + ...
legMassVerticalOffset*MLeg*pelvisWidth*power(c7,3)) + ...
u5*u5*(c6*(-(MPelvis*pelvisWidth*(L - R))/2. + s8*MLeg*(legMassVerticalOffset ...
- s8*pelvisWidth)*(L - R)*(c7*c7) - MLeg*pelvisWidth*(L - R)*(c7*c7)*(c8*c8) ...
- MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth)*(L - R)*(s7*s7)) + ...
c8*(c7*(-(MLeg*pelvisWidth*(legMassVerticalOffset - s8*pelvisWidth))/2. - ...
(MLeg*(legMassVerticalOffset - s8*pelvisWidth)*(pelvisWidth - 2*s6*(L - ...
R)))/2. + legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)*(s7*s7) + legMassVerticalOffset*MLeg*pelvisWidth*(s7*s7)*(s8*s8) ...
+ s8*(-(MLeg*pelvisWidth*(pelvisWidth - 2*s6*(L - R)))/2. + ...
legMassVerticalOffset*MLeg*(legMassVerticalOffset - s8*pelvisWidth)*(s7*s7) - ...
(MLeg*(pelvisWidth*pelvisWidth))/2.)) + ...
legMassVerticalOffset*MLeg*pelvisWidth*power(c7,3))) + u5*(c7*s7*u7*(ILeg + ...
legMassVerticalOffset*MLeg*(legMassVerticalOffset - s8*pelvisWidth) + ...
ILeg*(c8*c8) - 2*ILegSmall*(c8*c8) + ...
2*s8*legMassVerticalOffset*MLeg*pelvisWidth*(c8*c8) + ...
legMassVerticalOffset*MLeg*(legMassVerticalOffset - s8*pelvisWidth)*(c8*c8) - ...
ILeg*(s8*s8) - legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)*(s8*s8)) + ...
c8*(u8*(2*legMassVerticalOffset*MLeg*pelvisWidth*(c7*c7) + ...
2*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)*(s7*s7) + s8*(-2*ILeg*(s7*s7) + 2*ILegSmall*(s7*s7))) + ...
u6*(c7*(-2*MLeg*pelvisWidth*(legMassVerticalOffset - s8*pelvisWidth) + ...
2*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)*(s7*s7) + ...
2*legMassVerticalOffset*MLeg*pelvisWidth*(s7*s7)*(s8*s8) + ...
s8*(2*legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)*(s7*s7) - 2*MLeg*(pelvisWidth*pelvisWidth))) + ...
2*legMassVerticalOffset*MLeg*pelvisWidth*power(c7,3)))) + ...
c7*(c8*legMassVerticalOffset*MLeg*pelvisWidth*(u8*u8) + u7*u7*(c8*s8*(-ILeg + ...
ILegSmall - legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)) + legMassVerticalOffset*MLeg*pelvisWidth*power(c8,3))) + ...
u4*(u7*(c7*(c8*(-((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg) - ...
(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall - (c6*(c7*c8*s5 ...
+ c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(legMassVerticalOffset - s8*pelvisWidth)) ...
+ s8*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg) + ...
(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall - (-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)) + 2*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*pelvisWidth*(c8*c8)) + ...
s5p6*(-(ILeg*(c7*c7)) - legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)*(c7*c7) - ILegSmall*(s7*s7))) + s7*u8*(s8*((c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg + (c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*ILegSmall) - (c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth) + c7*c8*s5p6*(s8*(ILeg - ILegSmall) + ...
2*legMassVerticalOffset*MLeg*pelvisWidth - ...
legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth)) + ...
c5p6*(-(s8*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)) + ILegSmall*(c8*c8) + ILeg*(s8*s8))) + u5*(s7*(s8*(c5*(c8*s6 + ...
c6*c7*s8) + s5*(c6*c8 - c7*s6*s8))*ILeg - (c6*(c8*s5 + c5*c7*s8) + s6*(c5*c8 ...
- c7*s5*s8))*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth) + c7*(-((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)) + c8*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg - ...
(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall + ...
2*s8*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*pelvisWidth + (-(s5*(c8*s6 + c6*c7*s8)) ...
+ c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)) + s8*(-((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(legMassVerticalOffset - s8*pelvisWidth)) ...
+ MLeg*(legMassVerticalOffset - s8*pelvisWidth)*(c5p6*pelvisWidth + 2*s5*(L - ...
R))) + MLeg*(-(s8*legMassVerticalOffset) + pelvisWidth)*(c5p6*pelvisWidth + ...
2*s5*(L - R)) - MLeg*pelvisWidth*(c5p6*pelvisWidth + 2*s5*(L - R))*(c8*c8) + ...
c5p6*(-ILeg + MLeg*pelvisWidth*(-(s8*legMassVerticalOffset) + pelvisWidth) - ...
legMassVerticalOffset*MLeg*(legMassVerticalOffset - s8*pelvisWidth) + ...
s8*MLeg*pelvisWidth*(legMassVerticalOffset - s8*pelvisWidth) - ...
MLeg*(c8*c8)*(pelvisWidth*pelvisWidth)))) + c8*(s7*(s5*(-(c7*c8*s6) - c6*s8) ...
+ c5*(c6*c7*c8 - s6*s8))*ILegSmall + ...
s5p6*(2*s7*legMassVerticalOffset*MLeg*pelvisWidth*(c7*c7) + ...
legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)*power(s7,3) + s8*(-(ILeg*power(s7,3)) + ...
ILegSmall*power(s7,3))))) + u6*(s7*(c5*(s8*(c8*s6 + c6*c7*s8)*ILeg - (c8*s6 + ...
c6*c7*s8)*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)) + s5*(s8*(c6*c8 - c7*s6*s8)*ILeg - (c6*c8 - ...
c7*s6*s8)*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)) + c7*(-((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)) - s8*(c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*legMassVerticalOffset*MLeg*(legMassVerticalOffset - s8*pelvisWidth) + ...
c8*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall) + ...
2*s8*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*legMassVerticalOffset*MLeg*pelvisWidth + (-(s5*(c8*s6 + c6*c7*s8)) ...
+ c5*(c6*c8 - c7*s6*s8))*legMassVerticalOffset*MLeg*(legMassVerticalOffset - ...
s8*pelvisWidth)) + c5p6*(-ILeg + ...
2*MLeg*pelvisWidth*(-(s8*legMassVerticalOffset) + pelvisWidth) - ...
legMassVerticalOffset*MLeg*(legMassVerticalOffset - s8*pelvisWidth) + ...
2*s8*MLeg*pelvisWidth*(legMassVerticalOffset - s8*pelvisWidth) - ...
2*MLeg*(c8*c8)*(pelvisWidth*pelvisWidth)))) + c8*(s7*(c7*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg + s5*(-(c7*c8*s6) - c6*s8)*ILegSmall ...
+ c5*(c6*c7*c8 - s6*s8)*ILegSmall) + ...
s5p6*(2*s7*legMassVerticalOffset*MLeg*pelvisWidth*(c7*c7) + ...
legMassVerticalOffset*MLeg*(-(s8*legMassVerticalOffset) + ...
pelvisWidth)*power(s7,3) + s8*(-(ILeg*power(s7,3)) + ...
ILegSmall*power(s7,3)))))) - c7*c8*(c4*c8*s7 + s4*(s5*(-(c7*c8*s6) - c6*s8) + ...
c5*(c6*c7*c8 - s6*s8)))*g*MLeg*pelvisWidth*sin(groundAngle) + (c4*c7 - ...
c5p6*s4*s7)*g*MLeg*(-(s7*s8*legMassVerticalOffset) + ...
s7*pelvisWidth)*sin(groundAngle) + (c4*s7*s8 + s4*(c5*(c8*s6 + c6*c7*s8) + ...
s5*(c6*c8 - c7*s6*s8)))*g*MLeg*(c7*legMassVerticalOffset - ...
c7*s8*pelvisWidth)*sin(groundAngle); 
rhs(7) = -((-q5 + q7)*KSwing) + c8*(s8*u7*u8*(2*ILeg - 2*ILegSmall + ...
2*MLeg*(legMassVerticalOffset*legMassVerticalOffset)) + ...
s7*(u4*u4)*(c5p6*(-(s5p6*legMassVerticalOffset*MLeg*pelvisWidth)/2. - ...
(legMassVerticalOffset*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2.) + ...
s5p6*((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg + (c5*(-(c7*c8*s6) ...
- c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall + (c6*(c7*c8*s5 + c5*s8) + ...
s6*(c5*c7*c8 - s5*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset)))) ...
+ s7*(u6*u8*(-2*ILeg*(c8*c8) + ILegSmall*(c8*c8) - ILegSmall*(s8*s8) - ...
2*MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset)) + ...
c7*(u6*u6)*(-(ILeg*(c8*c8)) + ILegSmall*(c8*c8) - ...
MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset)) + ...
u5*(c7*u6*(-2*ILeg*(c8*c8) + 2*ILegSmall*(c8*c8) - ...
2*MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset)) + ...
u8*(-2*ILeg*(c8*c8) + ILegSmall*(c8*c8) - ILegSmall*(s8*s8) - ...
2*MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset))) + ...
u5*u5*(c6*c8*legMassVerticalOffset*MLeg*(L - R) + c7*(-(ILeg*(c8*c8)) + ...
ILegSmall*(c8*c8) - ...
MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset)))) + ...
u4*(u8*(c7*s5p6*(ILeg*(c8*c8) + ILegSmall*(s8*s8) + ...
MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset)) + ...
c8*((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg + (c5*(-(c7*c8*s6) - ...
c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall + (c6*(c7*c8*s5 + c5*s8) + ...
s6*(c5*c7*c8 - s5*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset) + ...
c5p6*s8*(ILeg - ILegSmall + ...
MLeg*(legMassVerticalOffset*legMassVerticalOffset)))) + ...
u6*(-(s5*s8*(-(c7*c8*s6) - c6*s8)*ILegSmall) + c5*(-(s8*(c6*c7*c8 - ...
s6*s8)*ILegSmall) + c8*(c8*s6 + ...
c6*c7*s8)*MLeg*(legMassVerticalOffset*legMassVerticalOffset)) + ...
s5p6*(-(ILeg*(c8*c8)*(s7*s7)) + ILegSmall*(c8*c8)*(s7*s7) - ...
MLeg*(c8*c8)*(s7*s7)*(legMassVerticalOffset*legMassVerticalOffset)) + ...
c8*(c5*(c8*s6 + c6*c7*s8)*ILeg + s5*((c6*c8 - c7*s6*s8)*ILeg + (c6*c8 - ...
c7*s6*s8)*MLeg*(legMassVerticalOffset*legMassVerticalOffset)) + ...
c7*((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg + (c5*(-(c7*c8*s6) - ...
c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall - ...
2*c5p6*legMassVerticalOffset*MLeg*pelvisWidth + (c6*(c7*c8*s5 + c5*s8) + ...
s6*(c5*c7*c8 - s5*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset)))) ...
+ u5*(-(s8*(s5*(-(c7*c8*s6) - c6*s8) + c5*(c6*c7*c8 - s6*s8))*ILegSmall) + ...
s5p6*(-(ILeg*(c8*c8)*(s7*s7)) + ILegSmall*(c8*c8)*(s7*s7) - ...
MLeg*(c8*c8)*(s7*s7)*(legMassVerticalOffset*legMassVerticalOffset)) + ...
c8*((c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - c7*s6*s8))*ILeg + (c6*(c8*s5 + ...
c5*c7*s8) + s6*(c5*c8 - ...
c7*s5*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset) + ...
c7*((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg + (c5*(-(c7*c8*s6) - ...
c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall - ...
c5p6*legMassVerticalOffset*MLeg*pelvisWidth - ...
legMassVerticalOffset*MLeg*(c5p6*pelvisWidth + 2*s5*(L - R)) + (c6*(c7*c8*s5 ...
+ c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset))))) + ...
c8*((-(c7*s4) - c4*c5p6*s7)*g*legMassVerticalOffset*MLeg*cos(groundAngle) - ...
(c4*c7 - c5p6*s4*s7)*g*legMassVerticalOffset*MLeg*sin(groundAngle)); 
rhs(8) = -((-(s4*s7*s8) + c4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - ...
c7*s6*s8)))*g*legMassVerticalOffset*MLeg*cos(groundAngle)) + ...
u4*u4*(-((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*(-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg) - (c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*ILegSmall + ...
c5p6*c7*s8*(-(s5p6*legMassVerticalOffset*MLeg*pelvisWidth)/2. - ...
(legMassVerticalOffset*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2.) + ...
c8*(-(s5p6*legMassVerticalOffset*MLeg*(s5p6*pelvisWidth - 2*c5*(L - R)))/2. - ...
(legMassVerticalOffset*MLeg*pelvisWidth*(s5p6*s5p6))/2.) - (c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - s5*s8))*(-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - ...
c7*s6*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset)) + ...
s7*u6*u7*(ILeg + ILeg*(c8*c8) - ILegSmall*(c8*c8) - ILeg*(s8*s8) + ...
ILegSmall*(s8*s8) + MLeg*(legMassVerticalOffset*legMassVerticalOffset) + ...
MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset) - ...
MLeg*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset)) + ...
c8*(s8*(u7*u7)*(-ILeg + ILegSmall - ...
MLeg*(legMassVerticalOffset*legMassVerticalOffset)) + ...
u6*u6*(-(legMassVerticalOffset*MLeg*pelvisWidth) + s8*(ILeg*(s7*s7) - ...
ILegSmall*(s7*s7) + ...
MLeg*(s7*s7)*(legMassVerticalOffset*legMassVerticalOffset)))) + ...
u5*u5*(c6*c7*s8*legMassVerticalOffset*MLeg*(L - R) + ...
c8*(-(legMassVerticalOffset*MLeg*pelvisWidth)/2. - ...
(legMassVerticalOffset*MLeg*(pelvisWidth - 2*s6*(L - R)))/2. + ...
s8*(ILeg*(s7*s7) - ILegSmall*(s7*s7) + ...
MLeg*(s7*s7)*(legMassVerticalOffset*legMassVerticalOffset)))) + ...
u5*(s7*u7*(ILeg + ILeg*(c8*c8) - ILegSmall*(c8*c8) - ILeg*(s8*s8) + ...
ILegSmall*(s8*s8) + MLeg*(legMassVerticalOffset*legMassVerticalOffset) + ...
MLeg*(c8*c8)*(legMassVerticalOffset*legMassVerticalOffset) - ...
MLeg*(s8*s8)*(legMassVerticalOffset*legMassVerticalOffset)) + ...
c8*u6*(-2*legMassVerticalOffset*MLeg*pelvisWidth + s8*(2*ILeg*(s7*s7) - ...
2*ILegSmall*(s7*s7) + ...
2*MLeg*(s7*s7)*(legMassVerticalOffset*legMassVerticalOffset)))) + ...
u4*(u7*(c7*s5p6*(-ILeg - MLeg*(legMassVerticalOffset*legMassVerticalOffset)) ...
+ c8*(-((c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg) - ...
(c5*(-(c7*c8*s6) - c6*s8) - s5*(c6*c7*c8 - s6*s8))*ILegSmall - (c6*(c7*c8*s5 ...
+ c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset)) + ...
s8*(-((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg) + (-(s5*(c8*s6 ...
+ c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall - (-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset))) + ...
s7*(u6*(c5p6*(-ILeg + 2*s8*legMassVerticalOffset*MLeg*pelvisWidth - ...
MLeg*(legMassVerticalOffset*legMassVerticalOffset)) + s8*(-((c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg) - (c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*ILegSmall - (c6*(c7*c8*s5 + c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset)) + ...
c8*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg - (-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall + (-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset))) + ...
u5*(c5p6*(-ILeg + s8*legMassVerticalOffset*MLeg*pelvisWidth - ...
MLeg*(legMassVerticalOffset*legMassVerticalOffset)) + s8*(-((c6*(c7*c8*s5 + ...
c5*s8) + s6*(c5*c7*c8 - s5*s8))*ILeg) - (c5*(-(c7*c8*s6) - c6*s8) - ...
s5*(c6*c7*c8 - s6*s8))*ILegSmall + ...
legMassVerticalOffset*MLeg*(c5p6*pelvisWidth + 2*s5*(L - R)) - (c6*(c7*c8*s5 ...
+ c5*s8) + s6*(c5*c7*c8 - ...
s5*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset)) + ...
c8*((-(s5*(c8*s6 + c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILeg - (-(s5*(c8*s6 + ...
c6*c7*s8)) + c5*(c6*c8 - c7*s6*s8))*ILegSmall + (-(s5*(c8*s6 + c6*c7*s8)) + ...
c5*(c6*c8 - c7*s6*s8))*MLeg*(legMassVerticalOffset*legMassVerticalOffset))))) ...
+ (c4*s7*s8 + s4*(c5*(c8*s6 + c6*c7*s8) + s5*(c6*c8 - ...
c7*s6*s8)))*g*legMassVerticalOffset*MLeg*sin(groundAngle); 

